function WindowHighlighter(a){this.edenUI=a,this.lastDialog=void 0,this.lastDialogMinimized=!1,this.lastDialogHidden=!1,this.previousZIndex=void 0}function Polyglot(){this.defaultLanguage=null,this.languages={},this.currentLanguage=null,this.languageModeRegex="%([a-zA-Z]+)"}function noop(){}function listenTo(a,b,c){this.listeners[a]||(this.listeners[a]=[]),this.listeners[a].push({target:b,callback:c})}function emit(a,b){var c=this.listeners[a];if(c){var d;for(d=0;d<c.length;++d){var e=c[d].target,f=c[d].callback;f.apply(e,b)}}}function concatAndResolveUrl(a,b){for(var c=a.split("/"),d=b.split("/"),e=[],f=0,g=c.length;f<g;f++)if(".."==c[f])e.pop();else{if("."==c[f])continue;e.push(c[f])}for(var f=0,g=d.length;f<g;f++)if(".."==d[f])e.pop();else{if("."==d[f])continue;e.push(d[f])}return e.join("/")}function touchHandler(a){var b=a.changedTouches[0],c=document.createEvent("MouseEvent");c.initMouseEvent({touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup"}[a.type],!0,!0,window,1,b.screenX,b.screenY,b.clientX,b.clientY,!1,!1,!1,!1,0,null),b.target.dispatchEvent(c),a.target.className.indexOf("ui-dialog-titlebar")==-1&&a.target.className.indexOf("ui-resizable-handle")==-1||a.preventDefault()}function Construit(options,callback){root=new Folder,eden=new Eden(root);var menuBar="false"!=URLUtil.getParameterByName("menus"),pluginsStr=URLUtil.getParameterByName("plugins"),views=URLUtil.getParameterByName("views"),include=URLUtil.getArrayParameterByName("include"),exec=URLUtil.getParameterByName("exec"),load=URLUtil.getParameterByName("load"),lang=URLUtil.getParameterByName("lang"),imports=URLUtil.getArrayParameterByName("import"),restore=URLUtil.getParameterByName("restore"),tag=URLUtil.getParameterByName("tag"),master=URLUtil.getParameterByName("master"),myid=URLUtil.getParameterByName("id");""==lang&&(lang="en");var plugins,defaultPlugins=["Canvas2D","DependencyMap","HTMLContent","ObservablePalette","PluginManager","ProjectList","ScriptGenerator","ScriptInput","StateTimeLine","SymbolLookUpTable","SymbolViewer","Debugger"];if(""==pluginsStr)plugins=defaultPlugins;else{var includeDefaultPlugins=" "==pluginsStr[0];includeDefaultPlugins&&(pluginsStr=pluginsStr.slice(1)),plugins=pluginsStr.split(","),includeDefaultPlugins&&(plugins=plugins.concat(defaultPlugins)),""!=views&&"default"!=views||(plugins.push("Canvas2D"),plugins.push("ProjectList"),plugins.push("ScriptInput"))}$(document).ready(function(){function invalidVersion(a){$(".loadmessage").html(a)}var browser=$.browser,bversion=browser.version.split(".");bversion=parseInt(bversion[0]),browser.msie?bversion<13&&invalidVersion("Microsoft Internet Explorer is not supported, use Edge, Firefox or Chrome."):browser.mozilla?bversion<29&&invalidVersion("Please upgrade your version of Firefox/Mozilla."):browser.webkit&&!browser.chrome?invalidVersion("Your browser is not supported by JS-Eden, please use Edge, Firefox or Chrome."):browser.chrome?bversion<39&&invalidVersion("Please upgrade your version of Chrome"):invalidVersion(browser.opera?"Opera is not supported, use Chrome or Firefox.":"Your browser is not supported by JS-Eden, use Firefox or Chrome."),document.addEventListener("touchstart",touchHandler,!0),document.addEventListener("touchmove",touchHandler,!0),document.addEventListener("touchend",touchHandler,!0),document.addEventListener("touchcancel",touchHandler,!0),edenUI=new EdenUI(eden),edenUI.scrollBarSize2=window.innerHeight-$(window).height(),$(document).on("keydown",null,"ctrl+m",function(){edenUI.cycleNextView()}).on("keyup",null,"ctrl",function(){edenUI.stopViewCycling()}).on("keydown",null,"backspace",function(a){var b=a.target,c=b.tagName.toUpperCase();"INPUT"==c||"TEXTAREA"==c||b.isContentEditable||a.preventDefault()}),"false"!=edenUI.getOptionValue("optConfirmUnload")&&window.addEventListener("beforeunload",confirmUnload);var loadLanguage=function(lang,callback){$.getScript("js/language/"+lang+".js",function(data){Language.language=lang,eval(data),menuBar&&(edenUI.menu=new EdenUI.MenuBar),callback()})},loadPlugins=function(a,b){var c=function(){if(a.length>0){var d=a.shift();edenUI.loadPlugin(d,c)}else b()};c()};doneLoading=function(a){eden.captureInitialState(),window.scrollTo(0,0),edenUI.finishedLoading(),exec&&(";"!=exec.slice(-1)&&(exec+=";"),eden.execute2(exec,"URL","",{name:"execute"},function(){})),""==myid&&""==master||(eden.peer=new Eden.Peer(""!=master?master:void 0,""!=myid?myid:void 0)),callback&&callback(a)};for(var librarySource,bootscript="import lib;\n",i=0;i<imports.length;i++)bootscript+="import "+imports[i]+";\n";bootscript+="${{ doneLoading(); }}$;\n",console.log("BOOTSCRIPT: "+bootscript),loadLanguage(lang,function(){loadPlugins(plugins,function(){$.getJSON("config.json",function(a){rt.config=a,Eden.DB.connect(Eden.DB.repositories[Eden.DB.repoindex],function(){""!=load&&""!=tag?Eden.load(load,tag,function(){doneLoading(!0)}):doneLoading(""!=restore?Eden.restore():!1)}),Eden.DB.repoindex=(Eden.DB.repoindex+1)%Eden.DB.repositories.length})})})})}function EdenSyntaxData(){this.value=void 0,this.error=!1,this.line=0}function EdenStream(a){this.code=a,this.position=0,this.position_stack=[0],this.prevposition=0,this.line=1,this.prevline=1,this.data=new EdenSyntaxData}function edenTokenTest(a){for(var b=new EdenStream(a),c=[],d={};b.valid();)c.push(b.readToken(d));return c}function fnEdenASTerror(a){this.errors.unshift(a)}function fnEdenASTleft(a){this.l=a,a.errors.length>0&&this.errors.push.apply(this.errors,a.errors)}function makeRandomName(){for(var a="",b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",c=0;c<10;c++)a+=b.charAt(Math.floor(Math.random()*b.length));return a}var Language={language:"en",loadSymbols:function(a){for(var b in this.symbols)b!=this.symbols[b]&&void 0===a.symbols[this.symbols[b]]&&(a.symbols[this.symbols[b]]=a.lookup(b))},addKeywords:function(a){for(var b in a)this.keywords[b]=a[b]},addSymbols:function(a){for(var b in a)this.symbols[b]=a[b]},importoptions:{readonly:"readonly",remote:"remote",local:"local",rebase:"rebase",noexec:"noexec",reload:"reload",force:"force",async:"async",create:"create"},doxytags:{title:"title",author:"author",version:"version",param:"param",return:"return"},keywords:{func:"func",proc:"proc",auto:"auto",para:"para",action:"action",local:"local",if:"if",is:"is",in:"in",else:"else",for:"for",while:"while",do:"do",switch:"switch",case:"case",default:"default",break:"break",continue:"continue",return:"return",when:"when",wait:"wait",include:"include",import:"import",insert:"insert",append:"append",delete:"delete",require:"require",after:"after",shift:"shift",with:"with"},symbols:{int:"int",str:"str",round:"round",min:"min",max:"max",random:"random",floor:"floor",ceil:"ceil",abs:"abs",acos:"acos",asin:"asin",atan:"atan",cos:"cos",exp:"exp",ln:"ln",log:"log",mod:"mod",randomInteger:"randomInteger",randomFloat:"randomFloat",sin:"sin",sqrt:"sqrt",sum:"sum",tan:"tan",length:"length",error:"error",substr:"substr",type:"type",createView:"createView",createCanvas:"createCanvas",zonesAt:"zonesAt",execute:"execute",indexOf:"indexOf",forget:"forget",eager:"eager",time:"time",writeln:"writeln",apply:"apply",todo:"todo",char:"char",isBoolean:"isBoolean",isCallable:"isCallable",isChar:"isChar",isDefined:"isDefined",isValue:"isValue",isFunc:"isFunc",isInt:"isInt",isNaN:"isNaN",isNumber:"isNumber",isObject:"isObject",isPoint:"isPoint",isProc:"isProc",showView:"showView",array:"array",sublist:"sublist",reverse:"reverse",search:"search",sort:"sort",tail:"tail",concat:"concat",decodeHTML:"decodeHTML"},values:{true:"true",false:"false"},errors:{}};"undefined"!=typeof require&&"undefined"!=typeof exports&&(exports.Language=Language),Point=function(a,b){this.x=a,this.y=b},Point.prototype.toString=function(){return"Point("+Eden.edenCodeForValue(this.x)+", "+Eden.edenCodeForValue(this.y)+")"},Point.prototype.getEdenCode=Point.prototype.toString;var rt={index:function(a){var b=typeof a;return"number"==b?a-1:a},length:function(a){if(null!==a&&void 0!==a)return a.length},equal:function(a,b){var c;if(a===b)return!0;if(a instanceof Array&&b instanceof Array){if(a.length!==b.length)return!1;for(c=0;c<a.length;++c)if(!rt.equal(a[c],b[c]))return!1;return!0}return!1},add:function(a,b){return void 0===a||void 0===b?void 0:a instanceof Point?new Point(a.x+b.x,a.y+b.y):a+b},subtract:function(a,b){return void 0===a||void 0===b?void 0:a instanceof Point?new Point(a.x-b.x,a.y-b.y):a-b},multiply:function(a,b){if(void 0!==a&&void 0!==b)return a*b},divide:function(a,b){if(void 0!==a&&void 0!==b)return a/b},mod:function(a,b){if(void 0!==a&&void 0!==b)return a%b},pow:function(a,b){if(void 0!==a&&void 0!==b)return Math.pow(a,b)},concat:function(a,b){return void 0===a||void 0===b?void 0:Array.isArray(a)?Array.isArray(b)?a.concat(b):(eden.error(new Error("Concatenation: When the left hand side is a list then the right hand side must also be a list, not a "+typeof b)),a):Array.isArray(b)?(eden.error(new Error("Concatenation: When the right hand side is a list then the left hand side must also be a list, not a "+typeof a)),a+JSON.stringify(b)):String(a)+b},regExpMatch:function(a,b){return void 0===a||void 0===b?void 0:b instanceof RegExp?b.test(a):new RegExp(b).test(a)},regExpNotMatch:function(a,b){return void 0===a||void 0===b?void 0:b instanceof RegExp?!b.test(a):!new RegExp(b).test(a)}};this.rt=rt,"undefined"!=typeof require&&"undefined"!=typeof exports&&(exports.rt=rt),WindowHighlighter.prototype.highlight=function(a){this.lastDialog=edenUI.getDialogWindow(a);var b=edenUI.getDialogContent(a);if(b.dialog("isOpen")){var c=b.data("dialog-extend-minimize-controls");c?(this.previousZIndex=c.css("z-index"),b.dialogExtend("restore"),this.lastDialog.removeClass("window-activated"),this.lastDialogMinimized=!0):(this.previousZIndex=this.lastDialog.css("z-index"),this.lastDialog.css("z-index",2147483646),this.lastDialogMinimized=!1),this.lastDialogHidden=!1}else this.previousZIndex=void 0,edenUI.showView(a),edenUI.moveView(a),this.lastDialogHidden=!0;this.lastDialogLeft=this.lastDialog[0].offsetLeft,this.lastDialogWidth=this.lastDialog[0].offsetWidth,this.lastDialogTop=this.lastDialog[0].offsetTop,this.lastDialogHeight=this.lastDialog[0].offsetHeight;var d=window.pageXOffset,e=window.pageYOffset;(this.lastDialogLeft>=d+window.innerWidth||this.lastDialogLeft+this.lastDialogWidth<d||this.lastDialogTop>=e+window.innerHeight||this.lastDialogTop+this.lastDialogHeight<e)&&b.parent().offset({left:d+(window.innerWidth-this.lastDialogWidth)/2,top:e+(window.innerHeight-this.lastDialogHeight)/2}),this.lastDialog.addClass("menubar-window-raise"),this.lastDialog.css("z-index",2147483646)},WindowHighlighter.prototype.stopHighlight=function(a,b){if(this.lastDialog){this.lastDialog.removeClass("menubar-window-raise");var c=edenUI.getDialogContent(a);if(c.parent().offset({left:this.lastDialogLeft,top:this.lastDialogTop}),b){var d=window.pageXOffset,e=window.pageYOffset,f=!1;this.lastDialogLeft+this.lastDialogWidth>d+window.innerWidth?(d=this.lastDialogLeft+this.lastDialogWidth-window.innerWidth,f=!0):this.lastDialogLeft<d&&(d=this.lastDialogLeft,f=!0),this.lastDialogTop+this.lastDialogHeight>e+window.innerHeight?(e=this.lastDialogTop+this.lastDialogHeight-window.innerHeight+edenUI.scrollBarSize2+edenUI.bottomBarHeight,f=!0):this.lastDialogTop<e&&(e=this.lastDialogTop-edenUI.menuBarHeight,f=!0),f&&window.scrollTo(d,e)}else this.lastDialogHidden?edenUI.hideView(a):this.lastDialogMinimized&&c.dialogExtend("minimize");void 0!==this.previousZIndex&&this.lastDialog.css("z-index",this.previousZIndex),this.lastDialog=void 0,this.lastDialogMinimized=!1,this.lastDialogHidden=!1,this.previousZIndex=void 0}},WindowHighlighter.prototype.unpin=function(a){a===this.lastDialog&&(this.previousZIndex=void 0)},function(a){function b(a){this.value=a}function c(a){var b,d;if(a instanceof Array){for(d=a.slice(),b=0;b<a.length;++b)d[b]=c(d[b]);return d}return a}function d(a,b,c){this.up_to_date=a,this.value=b,this.scope=c,this.scopes=void 0}function e(a,b){this.value=a,this.scope=b}function f(a,b,c,d,e){this.name=a,this.start=b,this.end=c,this.increment=d,this.current=e?b[0]:b,this.isin=e,this.index=1}function g(a,b,c,d,e){this.parent=b,this.context=a,this.cache=void 0,this.overrides=c,this.cause=e,this.causecount=0,this.range=d,this.rebuild()}function h(a,c,d){this.name=a||"/",this.parent=c||this,this.base=void 0,this.root=d||this,this.scope=new g(this,(void 0),{}),this.symbols={},this.evalResults={},this.globalobservers=[],this.autocalc_state=!0,this.needsExpire=[],this.needsTrigger={},this.needsGlobalNotify=[],this.globalNotifyIndex=0,this.expiryCount=new b(0),this.potentialGarbage={},this.saved_autocalc_state=!0,this.saved_autocalc_level=0,this.currentObservables=[]}function i(a,b){this.context=a,this.name=b,this.cache=a?a.scope.add(b):new d((!0),(void 0)),this.definition=void 0,this.eden_definition=void 0,this.evalResolved=!0,this.extend=void 0,this.needsGlobalNotify=!1,this.dependencies={},this.subscribers={},this.dynamicDependencies={},this.dynamicDependencyTable=[],this.dynamicDependencyRefCount={},this.observers={},this.observees={},this.jsObservers={},this.last_modified_by=void 0,this.garbage=!1}function j(a){for(var b in a){var c=a[b];c&&c.trigger()}}function k(a){for(var b=0;b<a.length;b++)a[b].fireJSObservers()}function l(a,b){this.parent=a,this.symbol=a,this.keys=[];for(var c=1;c<arguments.length;c++)this.keys.push(arguments[c])}g.prototype.hasCause=function(a){for(var b=this,c="/"+a;b;){if(b.cause.name==c)return!0;b=b.parent}return!1},g.prototype.baseCause=function(){for(var a=this;a.parent&&a.parent.parent;)a=a.parent;return a.cause.name.slice(1)},g.prototype.allCauses=function(){for(var a=[],b=this;b;)b.cause&&a.push(b.cause),b=b.parent;return a},g.prototype.allOverrides=function(){},g.prototype.hasOverride=function(a){for(var b=this;b;){for(var c=0;c<b.overrides.length;c++)if(b.overrides[c].name==a)return!0;b=b.parent}return!1},g.prototype.primaryCause=function(){return this.cause&&"/null"==this.cause.name&&this.parent&&this.parent.cause?this.parent.cause.name.slice(1):"null"},g.prototype.isRange=function(){return this.range},g.prototype.clear=function(){this!==eden.root&&(this.cache=void 0)},g.prototype.rebuild=function(){if(void 0===this.cache){this.cache={},this.add("/cause"),this.add("/has"),this.add("/from");for(var a=0;a<this.overrides.length;a++)this.addOverride(this.overrides[a])}},g.prototype.cloneAt=function(a){for(var b=[],c=0;c<this.overrides.length;c++)b.push(new f(this.overrides[c].name,this.overrides[c].start,this.overrides[c].end));for(var d=new g(this.context,this.parent,b,this.range,this.cause),c=0;c<a;c++)d.next();return d.range=!1,d},g.prototype.clone=function(){for(var a=[],b=0;b<this.overrides.length;b++){var c=new f(this.overrides[b].name,this.overrides[b].start,this.overrides[b].end);c.current=this.overrides[b].current,a.push(c)}var d=new g(this.context,this.parent,a,this.range,this.cause);return d},g.prototype.lookup=function(a){void 0===this.cache&&this.rebuild();var b=this.cache[a];return b?b:this.parent?this.parent.lookup(a):(this.cache[a]=new d((!0),(void 0)),this.cache[a])},g.prototype.add=function(a){var b=new d((!1),(void 0),this);return this.cache[a]=b,b},g.prototype.addOverride=function(a){if(this.updateOverride(a),this.context){var b=this.context.lookup(a.name);for(var c in b.subscribers)this.updateSubscriber(c)}},g.prototype.updateOverride=function(a){var b,c,f="/"+a.name;a.current instanceof e?(b=a.current.value,c=a.current.scope):(b=a.current,c=this.parent),void 0===this.cache[f]?this.cache[f]=new d((!0),b,this):(this.cache[f].value=b,this.cache[f].scope=this,this.cache[f].up_to_date=!0)},g.prototype.updateSubscriber=function(a){void 0===this.cache[a]?this.cache[a]=new d((!1),(void 0),this):(this.cache[a].up_to_date=!1,this.cache[a].value=void 0,this.cache[a].scope=this);var b=this.context.lookup(a.substr(1));for(var c in b.subscribers)this.updateSubscriber(c)},g.prototype.first=function(){for(var a=this.overrides.length-1;a>=0;a--){var b=this.overrides[a];if(void 0!==b.end&&b.current<=b.end)return!0}return!1},g.prototype.next=function(){for(var a in this.cache)this.cache[a].up_to_date=!1;for(var b=this.overrides.length-1;b>=0;b--){var c=this.overrides[b];if(void 0!==c.end||c.isin)if(c.isin){if(c.index<c.start.length)return c.current=c.start[c.index],c.index++,this.updateOverride(c),!0;c.index=1,c.current=c.start[0],this.updateOverride(c)}else{if(c.current<c.end){c.increment?c.current+=c.increment:c.current++,this.updateOverride(c);for(var d=b-1;d>=0;d--)this.updateOverride(this.overrides[d]);return!0}c.current=c.start,this.updateOverride(c)}}return!1},h.prototype.lookup=function(a){return void 0===this.symbols[a]&&(this.symbols[a]=new i(this,this.name+a),this.notifyGlobals(this.symbols[a],!0)),this.symbols[a]},h.prototype.currentObservableName=function(){return 0==this.currentObservables.length?void 0:this.currentObservables[this.currentObservables.length-1].name.slice(1)},h.prototype.beginEvaluation=function(a){this.currentObservables.push(a)},h.prototype.endEvaluation=function(a){this.currentObservables.pop()},h.prototype.queueForGarbageCollection=function(a){this.potentialGarbage[a.name]=a},h.prototype.collectGarbage=function(){for(var a in this.potentialGarbage)this.potentialGarbage[a].garbage&&delete this.symbols[a.slice(this.name.length)];this.potentialGarbage={}},h.prototype.putEval=function(a,b){this.evalResults[a]=b},h.prototype.getEval=function(a){return this.evalResults[a]},h.prototype.clearEval=function(a){delete this.evalResults[a]},h.prototype.addGlobal=function(a){this.globalobservers.push(a)},h.prototype.removeGlobal=function(a){for(var b=0;b<this.globalobservers.length;b++)if(this.globalobservers[b]===a)return this.globalobservers.splice(b,1),!0;return!1},h.prototype.notifyGlobals=function(a,b){for(var c=0;c<this.globalobservers.length;c++)void 0!==this.globalobservers[c]&&this.globalobservers[c].call(this,a,b)},h.prototype.autocalc=function(a){this.autocalc_state=a,this.expireAndFireActions()},h.prototype.beginAutocalcOff=function(){this.saved_autocalc_level++,1==this.saved_autocalc_level&&(this.saved_autocalc_state=this.autocalc_state,this.autocalc_state&&this.autocalc(!1))},h.prototype.endAutocalcOff=function(){this.saved_autocalc_level--,0==this.saved_autocalc_level&&this.saved_autocalc_state&&this.autocalc(!0)},h.prototype.expireSymbol=function(a){this.needsExpire.indexOf(a)==-1&&this.needsExpire.push(a),this.expireAndFireActions()},h.prototype.triggerSymbol=function(a){this.needsTrigger[a.name]=a,this.expireAndFireActions()},h.prototype.expireAndFireActions=function(){if(this.autocalc_state){this.expiryCount.value=0;for(var a={},b=0;b<this.needsExpire.length;b++){var c=this.needsExpire[b];c.expire(a,this.expiryCount,this.needsTrigger),c.needsGlobalNotify=!0}var d=this.needsExpire;this.needsExpire=[];var e=Object.keys(a);e.sort(function(b,c){return a[b]-a[c]});for(var f=[],b=0;b<e.length;b++){var c=this.symbols[e[b].slice(this.name.length)];c.evaluateIfDependenciesExist(),c.needsGlobalNotify=!0,f.push(c)}var g=this.needsTrigger;if(this.needsTrigger={},j(g),k(d),k(f),0==this.needsGlobalNotify.length){if(d.unshift(f.length,0),f.splice.apply(f,d),f.length>0){this.needsGlobalNotify=f;var h=this;setTimeout(function(){h.processGlobalNotifyQueue()},0)}}else{var i=this.needsGlobalNotify;f.unshift(i.length,0),i.splice.apply(i,f),d.unshift(i.length,0),i.splice.apply(i,d)}}},h.prototype.processGlobalNotifyQueue=function(){for(var a=this.needsGlobalNotify,b=0;b<a.length;){this.globalNotifyIndex++;var c=a[b];c.needsGlobalNotify&&(c.needsGlobalNotify=!1,this.notifyGlobals(c,!1)),b=this.globalNotifyIndex}this.needsGlobalNotify=[],this.globalNotifyIndex=0},h.prototype.save=function(a){var b="## Functions\n",c="\n## Definitions\n",d="\n## Restored Definition\n",e="\n## Agent Definitions\n",f="\n## Assignments\n",g="\n## Agent Assignments\n",h="\n## Input Device Assignments\n",j="\n## Restored Assignments\n",k="\n## Procedures\n";for(var l in this.symbols){var m=this.symbols[l],n=m.last_modified_by;if("object"!=typeof n||a&&a[n.name]||n.canUndo&&n.canUndo()||n instanceof i&&n.eden_definition&&n.eden_definition.startsWith("proc")||"*Input Device"==n.name||"*Restore"==n.name||"*JavaScript"==n.name||"*When"==n.name)if(m.eden_definition)m.eden_definition.startsWith("func")?b+=this.symbols[l].eden_definition+"\n":"*Restore"==n.name?d+=this.symbols[l].eden_definition+"\n":"*When"==n.name?e+=this.symbols[l].eden_definition+"\n":c+=this.symbols[l].eden_definition+"\n";else if(void 0!==m.cache.value){var o=l+" = "+Eden.edenCodeForValue(m.cache.value)+";\n";n instanceof i&&n.eden_definition&&n.eden_definition.startsWith("proc")||"*JavaScript"==n.name||"*When"==n.name?g+=o:"*Input Device"==n.name?h+=o:"*Restore"==n.name?j+=o:f+=o}}return b+c+d+e+f+j+g+h+k},i.getInputAgentName=function(){return"*Script Input"},i.hciAgent={name:"*Input Device"},i.prototype.boundValue=function(a,b){var c=this.value(a),d=a.lookup(this.name);return b?new e(c[b[0]],d.scopes[b[0]]):new e(c,d.scope)},i.prototype.value=function(a){if(a&&a.isRange())return this.multiValue(a);var b=a;this.garbage=!1,void 0===b&&(b=this.context.scope);var c=void 0===this.context||b===this.context.scope?this.cache:b.lookup(this.name);return this.definition&&(c.up_to_date||this.evaluate(b,c)),c.value},i.prototype.multiValue=function(a){var b=[];if(a.range=!1,!a.first())return[];for(;;){var c=this.value(a);if(void 0!==c&&b.push(c),0==a.next())break}a.range=!0;var d=void 0===this.context||a===this.context.scope?this.cache:a.lookup(this.name);return d.scope=a,b},i.prototype.evaluateIfDependenciesExist=function(){var a;for(a in this.dependencies)if(!this.dependencies[a].last_modified_by)return;this.evaluate(this.context.scope,this.context.scope.lookup(this.name))},i.prototype.getValueScope=function(a){return a.lookup(this.name).scope},i.prototype.evaluate=function(a,b){this.context&&this.context.beginEvaluation(this);try{if(b.up_to_date=!0,b.value=this.definition.call(this,this.context,a,b),this.extend)for(var c in this.extend)this.extend[c].code(this.context,a,b.value);if(!this.evalResolved){for(var d,e=this.eden_definition,f=/\beval\(/,g=0;(d=e.slice(g).search(f))!=-1;){var h=g+d,i=!1;for(var j in this.evalIDs){var k=e.slice(h+5,h+j.length+6);if(k==j+")"){var l=this.context.getEval(this.evalIDs[j]),m=Eden.edenCodeForValue(l);e=e.slice(0,h)+m+e.slice(h+j.length+6),g=h+m.length,i=!0;break}}i||(g=h+5)}this.eden_definition=e,this.evalResolved=!0}}catch(c){this.logError(c),b.value=void 0,b.up_to_date=!1}this.context&&this.context.endEvaluation(this)},i.prototype.clearEvalIDs=function(){var a=this.context;for(var b in this.evalIDs)a.clearEval(this.evalIDs[b]);this.evalIDs={},this.evalResolved=!1},i.prototype.clearObservees=function(){for(var a in this.observees){var b=this.observees[a];b.removeObserver(this.name)}this.observees={}},i.prototype.subscribe=function(){for(var a=m.flatten(arguments),b=0;b<a.length;++b){var c=a[b],d=this.context.lookup(c);if(d.name!=this.name){d.addSubscriber(this.name,this);var e=d.name;this.dependencies[e]=d,delete this.dynamicDependencies[e]}}return this},i.prototype.subscribeDynamic=function(a,b,c){if(c&&c.cause)return c.cause.subscribeDynamic(c.causecount++,b);if(!(b in this.dependencies)){var d,e,f=this.dynamicDependencyTable[a];void 0!==f&&(e=this.dynamicDependencyRefCount[f],1==e?(d=this.context.lookup(f),d.removeSubscriber(this.name),delete this.dynamicDependencies[d.name],delete this.dynamicDependencyRefCount[f]):this.dynamicDependencyRefCount[f]=e-1),b in this.dynamicDependencies?this.dynamicDependencyRefCount[b]++:(d=this.context.lookup(b),d.addSubscriber(this.name,this),this.dynamicDependencies[d.name]=d,this.dynamicDependencyRefCount[b]=1)}return this.dynamicDependencyTable[a]=b,this.context.lookup(b)},i.prototype.clearDependencies=function(){var a;for(var b in this.dependencies)a=this.dependencies[b],a.removeSubscriber(this.name);this.dependencies={};for(var b in this.dynamicDependencies)a=this.dynamicDependencies[b],a.removeSubscriber(this.name);this.dynamicDependencies={},this.dynamicDependencyTable=[],this.dynamicDependencyRefCount={}},i.prototype._setLastModifiedBy=function(a){this.last_modified_by=a?a:"*JavaScript"},i.prototype.define=function(a,b,c){this.garbage=!1,this._setLastModifiedBy(b),this.definition=a,this.clearObservees(),this.clearDependencies();for(var d=[],e=2;e<arguments.length;e++)d.push(arguments[e]);if(this.subscribe(d),this.extend)for(var f in this.extend)this.subscribe(this.extend[f].deps);return this.context&&this.context.expireSymbol(this),this},i.prototype.observe=function(a){a=m.flatten(arguments);for(var b=0;b<a.length;++b){var c=this.context.lookup(a[b]);this.observees[c.name]=c,c.addObserver(this.name,this)}return this.context&&this.context.triggerSymbol(this),this},i.prototype.stopObserving=function(a){this.observees[a].removeObserver(this.name),this.observees[a]=void 0},i.prototype.assign=function(a,b,d,e){b instanceof g||(e=d,d=b,b=root.scope),this.garbage=!1,a=c(a),e&&eden.emit("beforeAssign",[this,a,d]),"/autocalc"===this.name&&(a===!0?a=1:a===!1&&(a=0),this.context&&this.context.autocalc(1===a)),this.eden_definition=void 0,this.clearEvalIDs(),this.evalResolved=!0,this._setLastModifiedBy(d),this.definition=void 0,this.extend=void 0;var f=void 0===this.context||b==this.context.scope?this.cache:b.lookup(this.name);return f.value=a,f.up_to_date=!0,this.clearObservees(),this.clearDependencies(),this.context&&this.context.expireSymbol(this),this},i.prototype.assigned=function(a){return this.garbage=!1,this.eden_definition=void 0,this.clearEvalIDs(),this.evalResolved=!0,this._setLastModifiedBy(a),this.definition=void 0,this.clearObservees(),this.clearDependencies(),this},i.prototype.assignFunction=function(a,b){this.assign(a,this.context.scope,b),this.eden_definition="func "+this.name.slice(1),this.definition=function(b,c){return a}},i.prototype.mutate=function(a,b,c,d){this.garbage=!1;this._setLastModifiedBy(c),this.value(a),this.definition=void 0;for(var e=[],f=1;f<arguments.length;f++)e.push(arguments[f]);return b.apply(void 0,[this].concat(e)),this.context&&this.context.expireSymbol(this),this},i.prototype.loggers={console:function(a){console.log("<JSEDEN:"+this.name+"> "+a)}},i.prototype.logError=function(a){for(var b in this.loggers){var c=this.loggers[b];c.call(this,a)}},i.prototype.getEdenCode=function(){return"&"+this.name.slice(1)},i.prototype.trigger=function(){var a;for(a in this.observees)if(!this.observees[a].last_modified_by)return;try{this.value().call(this,this.context,this.context.scope)}catch(b){this.logError("Failed while triggering: "+b)}},i.prototype.fireJSObservers=function(){for(var a in this.jsObservers)try{this.jsObservers[a](this,this.cache.value)}catch(b){this.logError("Failed while triggering JavaScript observer for symbol "+this.name+": "+b);var c;if(this.context){var d=this.cache.value;c="object"==typeof d&&d.jsExceptions}else c=!1;throw b}},i.prototype.expire=function(a,b,c){if(this.cache.up_to_date)for(var d in this.observers)c[d]=this.observers[d];this.definition&&(this.cache.up_to_date=!1,a[this.name]=b.value,b.value++);for(var e in this.subscribers){var f=this.subscribers[e];f&&f.expire(a,b,c)}},i.prototype.isDependentOn=function(a){if(a==this.name||this.dependencies[a])return!0;var b;for(var c in this.dependencies)if(b=this.dependencies[c],b.isDependentOn(a))return!0;for(var c in this.dynamicDependencies)if(b=this.dynamicDependencies[c],b.isDependentOn(a))return!0;return!1},i.prototype.getDependencies=function(){var a=[];for(var b in this.dependencies)a.push(b.slice(1));return console.log("Dependencies"),a},i.prototype.assertNotDependentOn=function(a,b){if(void 0===b&&(b=[]),b.push(this.name.slice(1)),this.dependencies[a]){var c=b.join(" -> ")+" -> "+a.slice(1)+" -> "+b[0];throw new Error("Cyclic dependency detected: "+c)}var d;for(var e in this.dependencies)d=this.dependencies[e],d.assertNotDependentOn(a,b);for(var e in this.dynamicDependencies)d=this.dynamicDependencies[e],d.assertNotDependentOn(a,b);b.pop()},i.prototype.addSubscriber=function(a,b){this.garbage=!1,this.assertNotDependentOn(a),this.subscribers[a]=b},i.prototype.removeSubscriber=function(a){delete this.subscribers[a],void 0===this.last_modified_by&&this.canSafelyBeForgotten()&&this.forget()},i.prototype.canSafelyBeForgotten=function(){for(var a in this.subscribers)return!1;for(var b in this.observers)return!1;return!0},i.prototype.forget=function(){this.eden_definition=void 0,this.clearEvalIDs(),this.evalResolved=!0,this.definition=void 0,this.cache.value=void 0,this.cache.up_to_date=!0,this.clearObservees(),this.clearDependencies(),this.jsObservers={},this.garbage=!0,this.context.queueForGarbageCollection(this)},i.prototype.addObserver=function(a,b){this.garbage=!1,this.observers[a]=b},i.prototype.addJSObserver=function(a,b){if("function"!=typeof b)throw new Error("Failed adding JavaScript observer "+b);this.jsObservers[a]=b},i.prototype.removeObserver=function(a){delete this.observers[a],void 0===this.last_modified_by&&this.canSafelyBeForgotten()&&this.forget()},i.prototype.removeJSObserver=function(a){delete this.jsObservers[a]};var m={flatten:function(a){for(var b=[],c=0,d=a.length;c<d;++c)b=b.concat(a[c]instanceof Array?this.flatten(a[c]):a[c]);return b},construct:function(){var a=function(){};return function(b){a.prototype=b.prototype;for(var c=new a,d=[],e=1;e<arguments.length;e++)d.push(arguments[e]);return b.apply(c,d),c}}()};i.prototype.addExtension=function(a,b,c,d,e){void 0===this.extend&&(this.extend={}),this.extend[a]={code:b,source:c,deps:e},this.subscribe(e),this.context&&this.context.expireSymbol(this)},i.prototype.listAssign=function(a,b,c,d,e){if(this.definition)return void console.log("ASSIGN TO DEFINED LIST ERROR");for(var f=this.value(b),g=0;g<e.length-1;g++)f&&(f=f[e[g]]);return f?f[e[e.length-1]]=a:console.log("ASSIGN DIMENSION ERROR"),this._setLastModifiedBy(c),this.context&&this.context.expireSymbol(this),this},i.prototype.get=function(a){for(var b=[],c=0;c<arguments.length;c++)b.push(arguments[c]);return m.construct.apply(void 0,[l,this].concat(b))},l.prototype.assign=function(a,b,d,e){this.symbol.garbage=!1,a=c(a);var f=this;return e&&eden.emit("beforeAssign",[this,a,d]),this.parent.mutate(b,function(c,d){for(var e=c.value(b),g=0;g<f.keys.length-1;++g)e=e[f.keys[g]];e[f.keys[g]]=a},d),this},l.prototype.value=function(a){this.symbol.garbage=!1;for(var b=this.parent.value(a),c=0;c<this.keys.length;++c)b=b[this.keys[c]];return b},l.prototype.get=function(a){for(var b=[],c=0;c<arguments.length;c++)b.push(arguments[c]);var d=this.keys.concat(b);return i.prototype.get.apply(this.parent,d)},a.Folder=h,a.Symbol=i,a.Scope=g,a.ScopeOverride=f,a.edenCopy=c,a.BoundValue=e,"undefined"!=typeof require&&"undefined"!=typeof exports&&(exports.Folder=h,exports.Symbol=i,exports.Scope=g,exports.ScopeOverride=f,exports.edenCopy=c)}("undefined"!=typeof window?window:global),Polyglot.prototype.register=function(a,b){this.languages[a]=b},Polyglot.prototype.execute=function(a,b,c,d,e){var f=0,g=a.match(new RegExp("^"+this.languageModeRegex));g?(this.currentLanguage=g[1],f=this.currentLanguage.length+1):null===this.currentLanguage&&(this.currentLanguage=this.defaultLanguage);var h=a.length,i=a.substr(f).search(new RegExp("\n"+this.languageModeRegex));i!==-1&&(h=f+i+1);var j=a.slice(f,h),k=this;this.languages[this.currentLanguage].execute(j,b,c,d,function(){return a=a.substr(h),""===a?void(e&&e()):void k.execute(a,b,c,d,e)})},Polyglot.prototype.setDefault=function(a){this.defaultLanguage=a},this.Polyglot=Polyglot,"undefined"!=typeof require&&"undefined"!=typeof exports&&(exports.Polyglot=Polyglot);var parser=function(){function Parser(){this.yy={}}var o=function(a,b,c,d){for(c=c||{},d=a.length;d--;c[a[d]]=b);return c},$V0=[2,12],$V1=[1,47],$V2=[1,58],$V3=[1,59],$V4=[1,64],$V5=[1,35],$V6=[1,60],$V7=[1,61],$V8=[1,34],$V9=[1,37],$Va=[1,38],$Vb=[1,39],$Vc=[1,40],$Vd=[1,41],$Ve=[1,43],$Vf=[1,44],$Vg=[1,48],$Vh=[1,45],$Vi=[1,50],$Vj=[1,51],$Vk=[1,52],$Vl=[1,67],$Vm=[1,65],$Vn=[1,66],$Vo=[1,32],$Vp=[1,12],$Vq=[1,13],$Vr=[1,14],$Vs=[1,15],$Vt=[1,16],$Vu=[1,17],$Vv=[1,18],$Vw=[1,19],$Vx=[1,20],$Vy=[1,21],$Vz=[1,22],$VA=[1,24],$VB=[1,25],$VC=[1,26],$VD=[1,27],$VE=[1,28],$VF=[1,29],$VG=[1,30],$VH=[1,31],$VI=[1,49],$VJ=[1,62],$VK=[1,63],$VL=[5,46],$VM=[1,74],$VN=[1,73],$VO=[1,71],$VP=[1,72],$VQ=[1,75],$VR=[1,76],$VS=[1,77],$VT=[1,78],$VU=[1,79],$VV=[1,80],$VW=[1,81],$VX=[1,82],$VY=[1,83],$VZ=[1,84],$V_=[1,85],$V$=[1,86],$V01=[1,87],$V11=[1,88],$V21=[1,89],$V31=[1,90],$V41=[1,91],$V51=[1,70],$V61=[5,7,8,9,10,15,17,18,22,23,24,25,26,44,46,51,52,53,55,59,60,61,66,68,71,87,94,95,96,97,98,99,100,102,103,104,105,106,108,109,110,111,112,113,114,115,116,120,121],$V71=[1,104],$V81=[1,103],$V91=[1,109],$Va1=[1,114],$Vb1=[12,16,17,18,23,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,45,46,47,53,54,85,87],$Vc1=[1,120],$Vd1=[1,119],$Ve1=[2,90],$Vf1=[1,138],$Vg1=[1,136],$Vh1=[1,137],$Vi1=[1,131],$Vj1=[1,132],$Vk1=[1,133],$Vl1=[1,134],$Vm1=[1,135],$Vn1=[1,142],$Vo1=[1,145],$Vp1=[2,2],$Vq1=[1,148],$Vr1=[1,147],$Vs1=[5,7,8,9,10,12,15,16,17,18,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,51,52,53,54,55,59,60,61,66,68,71,85,87,94,95,96,97,98,99,100,102,103,104,105,106,108,109,110,111,112,113,114,115,116,120,121],$Vt1=[2,58],$Vu1=[10,12,13,15,16,17,18,23,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,85,87],$Vv1=[2,134],$Vw1=[1,161],$Vx1=[1,164],$Vy1=[2,130],$Vz1=[2,75],$VA1=[1,200],$VB1=[1,201],$VC1=[1,207],$VD1=[1,210],$VE1=[12,16,17,18,23,28,29,30,32,33,34,35,36,37,38,39,40,41,42,43,45,46,47,53,54,85,87],$VF1=[1,213],$VG1=[1,216],$VH1=[1,228],$VI1=[7,8,9,10,15,17,18,22,23,24,25,26,44,46,51,52,53,55,59,60,61,66,68,71,87,94,95,96,98,99,100,102,103,104,105,106,108,109,110,111,112,113,114,115,116,120,121,125],$VJ1=[1,238],$VK1=[44,54],$VL1=[12,16],$VM1=[12,16,17,23,28,32,33,34,35,36,37,38,39,40,41,42,43,45,46,47,53,54,85,87],$VN1=[12,16,17,32,33,34,35,36,37,38,39,40,41,42,43,45,46,53,54,85,87],$VO1=[12,16,17,36,37,40,41,42,43,45,46,53,54,85,87],$VP1=[12,16,17,40,41,42,43,45,46,53,54,85,87],$VQ1=[12,16,17,42,43,45,46,53,54,85,87],$VR1=[12,16,17,45,46,54,85,87],$VS1=[10,12,13,16,17,18,23,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,85,87],$VT1=[2,6],$VU1=[1,273],$VV1=[2,81],$VW1=[18,23,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,47,53],$VX1=[7,8,9,10,15,17,18,22,23,24,25,26,44,46,51,52,53,55,59,60,61,66,68,71,87,94,95,96,98,99,100,102,103,104,105,106,108,109,110,111,112,113,114,115,116,120,121],$VY1=[1,281],$VZ1=[12,44,87],$V_1=[10,12,13,16,17,18,23,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,45,46,47,53,54,85,87],$V$1=[45,46],$V02=[2,7],$V12=[2,83],parser={
trace:function(){},yy:{},symbols_:{error:2,script:3,"statement-list-opt":4,EOF:5,lvalue:6,OBSERVABLE:7,$ARGS:8,$ARG:9,"[":10,expression:11,"]":12,".":13,"string-literal":14,"(":15,")":16,"`":17,"*":18,"primary-expression":19,"statement-list":20,literal:21,EVAL:22,"-":23,"!":24,NOT:25,"&":26,"#":27,"+":28,"/":29,"%":30,"^":31,">":32,"<":33,">=":34,"<=":35,"==":36,"!=":37,"=~":38,"!~":39,"&&":40,AND:41,"||":42,OR:43,"{":44,",":45,"}":46,"//":47,"=":48,"+=":49,"-=":50,"++":51,"--":52,"?":53,":":54,OPENJS:55,javascript:56,ENDJS:57,JSCODE:58,NUMBER:59,BOOLEAN:60,UNDEFINED:61,"list-literal":62,"object-literal":63,"multiline-string-literal":64,"char-literal":65,"'":66,STRINGCHARACTER:67,'"':68,"string-contents-opt":69,"string-contents":70,"<%":71,"multiline-string-contents-opt":72,"%>":73,"multiline-string-contents":74,"expression-list-opt":75,"pair-list-opt":76,"pair-list":77,pair:78,"scope-list-opt":79,"scope-list":80,"scope-pair":81,"scoperange-list-opt":82,"scoperange-list":83,"scoperange-pair":84,"..":85,statement:86,";":87,"function-definition":88,"formula-definition":89,"action-specification":90,"dependency-link":91,"query-command":92,"compound-statement":93,OPTION:94,AFTER:95,IF:96,ELSE:97,WHILE:98,DO:99,FOR:100,"expression-opt":101,SWITCH:102,BREAK:103,CONTINUE:104,RETURN:105,TOGETHER:106,"include-statement-list":107,REQUIRE:108,AWAIT:109,INSERT:110,DELETE:111,APPEND:112,SHIFT:113,CASE:114,DEFAULT:115,INCLUDE:116,"expression-list":117,"function-declarator":118,"function-body":119,FUNC:120,PROC:121,"identifier-list-opt":122,"identifier-list":123,"local-var-decl":124,AUTO:125,"local-var-decl-list":126,"local-var-decl-list-opt":127,"para-alias-opt":128,"para-alias":129,PARA:130,"dependency-list":131,"~>":132,IS:133,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",7:"OBSERVABLE",8:"$ARGS",9:"$ARG",10:"[",12:"]",13:".",15:"(",16:")",17:"`",18:"*",22:"EVAL",23:"-",24:"!",25:"NOT",26:"&",27:"#",28:"+",29:"/",30:"%",31:"^",32:">",33:"<",34:">=",35:"<=",36:"==",37:"!=",38:"=~",39:"!~",40:"&&",41:"AND",42:"||",43:"OR",44:"{",45:",",46:"}",47:"//",48:"=",49:"+=",50:"-=",51:"++",52:"--",53:"?",54:":",55:"OPENJS",57:"ENDJS",58:"JSCODE",59:"NUMBER",60:"BOOLEAN",61:"UNDEFINED",66:"'",67:"STRINGCHARACTER",68:'"',71:"<%",73:"%>",85:"..",87:";",94:"OPTION",95:"AFTER",96:"IF",97:"ELSE",98:"WHILE",99:"DO",100:"FOR",102:"SWITCH",103:"BREAK",104:"CONTINUE",105:"RETURN",106:"TOGETHER",108:"REQUIRE",109:"AWAIT",110:"INSERT",111:"DELETE",112:"APPEND",113:"SHIFT",114:"CASE",115:"DEFAULT",116:"INCLUDE",120:"FUNC",121:"PROC",125:"AUTO",130:"PARA",132:"~>",133:"IS"},productions_:[0,[3,2],[6,1],[6,1],[6,1],[6,4],[6,3],[6,4],[6,3],[6,3],[6,2],[4,1],[4,0],[11,1],[11,4],[11,3],[11,1],[11,2],[11,2],[11,2],[11,2],[11,2],[11,3],[11,3],[11,3],[11,3],[11,3],[11,3],[11,3],[11,3],[11,3],[11,3],[11,3],[11,3],[11,3],[11,3],[11,3],[11,3],[11,3],[11,3],[11,5],[11,3],[11,3],[11,3],[11,3],[11,2],[11,2],[11,2],[11,2],[11,5],[11,3],[56,1],[56,2],[21,1],[21,1],[21,1],[21,1],[21,1],[21,1],[21,1],[21,1],[65,3],[14,3],[69,1],[69,0],[70,1],[70,2],[64,3],[72,1],[72,0],[74,1],[74,2],[62,3],[63,3],[76,1],[76,0],[77,1],[77,3],[78,3],[79,1],[79,0],[80,1],[80,3],[81,3],[82,1],[82,0],[83,1],[83,3],[84,5],[84,1],[19,1],[19,6],[19,4],[19,4],[19,7],[19,4],[19,4],[86,2],[86,1],[86,1],[86,1],[86,1],[86,1],[86,1],[86,4],[86,5],[86,5],[86,7],[86,5],[86,7],[86,9],[86,5],[86,2],[86,2],[86,2],[86,3],[86,2],[86,1],[86,3],[86,3],[86,7],[86,5],[86,5],[86,3],[86,3],[86,2],[86,1],[107,5],[107,6],[101,1],[101,0],[117,1],[117,3],[75,1],[75,0],[92,3],[88,2],[118,2],[118,2],[122,1],[122,0],[124,3],[126,1],[126,2],[127,1],[127,0],[128,1],[128,0],[129,3],[119,5],[90,3],[131,2],[123,1],[123,3],[91,6],[93,3],[20,1],[20,2],[89,4]],performAction:function anonymous(yytext,yyleng,yylineno,yy,yystate,$$,_$){var $0=$$.length-1;switch(yystate){case 1:var code=yy.code($$[$0-1].cps,$$[$0-1].code+" root.collectGarbage();");return"(function (root, eden, scope, includePrefix, done) {(function(context, rt) { "+yy.printObservableDeclarations()+yy.withIncludes(code,"done")+"}).call(this, root, rt);})";case 2:0!==yy.paras.length&&void 0!==yy.paras[0][$$[$0]]?this.$="args.get("+yy.paras[0][$$[$0]]+")":0!==yy.locals.length&&void 0!==yy.locals[0][$$[$0]]?this.$="local_"+$$[$0]:(yy.inEval()||(0!==yy.funcBodyDependencies.length&&yy.addFuncBodyDependency($$[$0]),yy.inDefinition()&&yy.addDependency($$[$0])),this.$=yy.observable($$[$0]));break;case 3:this.$="args";break;case 4:var n=Number($$[$0].slice(1));this.$="args.get("+(n-1)+")";break;case 5:this.$=$$[$0-3]+".get("+$$[$0-1]+" - 1)";break;case 6:this.$=$$[$0-2]+'.get("'+$$[$0]+'")';break;case 7:this.$=$$[$0-3]+".get("+$$[$0-1]+")";break;case 8:case 50:this.$=$$[$0-1];break;case 9:!yy.inEval()&&yy.inDefinition()?this.$="context.currentObservable.subscribeDynamic("+yy.backticks()+", "+$$[$0-1]+")":this.$="context.lookup("+$$[$0-1]+")";break;case 10:case 20:case 137:case 138:case 151:this.$=$$[$0];break;case 12:this.$=yy.sync("");break;case 14:var evalExp=yy.extractEdenDefinition(_$[$0-1].first_line,_$[$0-1].first_column,_$[$0-1].last_line,_$[$0-1].last_column),id=yy.leaveEval(evalExp);yy.evalExps.push("context.putEval("+id+", "+$$[$0-1]+");"),this.$="context.getEval("+id+")";break;case 15:this.$=$$[$0-2]+$$[$0-1]+$$[$0];break;case 17:this.$="-"+$$[$0];break;case 18:case 19:this.$="!"+$$[$0];break;case 21:this.$="rt.length("+$$[$0-1]+")";break;case 22:this.$="rt.add("+$$[$0-2]+", "+$$[$0]+")";break;case 23:this.$="rt.subtract("+$$[$0-2]+", "+$$[$0]+")";break;case 24:this.$="rt.multiply("+$$[$0-2]+", "+$$[$0]+")";break;case 25:this.$="rt.divide("+$$[$0-2]+", "+$$[$0]+")";break;case 26:this.$="rt.mod("+$$[$0-2]+", "+$$[$0]+")";break;case 27:this.$="rt.pow("+$$[$0-2]+", "+$$[$0]+")";break;case 28:this.$=""+$$[$0-2]+" > "+$$[$0];break;case 29:this.$=""+$$[$0-2]+" < "+$$[$0];break;case 30:this.$=""+$$[$0-2]+" >= "+$$[$0];break;case 31:this.$=""+$$[$0-2]+" <= "+$$[$0];break;case 32:this.$="rt.equal("+$$[$0-2]+", "+$$[$0]+")";break;case 33:this.$="!rt.equal("+$$[$0-2]+", "+$$[$0]+")";break;case 34:this.$="rt.regExpMatch("+$$[$0-2]+", "+$$[$0]+")";break;case 35:this.$="rt.regExpNotMatch("+$$[$0-2]+", "+$$[$0]+")";break;case 36:case 37:this.$=""+$$[$0-2]+" && "+$$[$0];break;case 38:case 39:this.$=""+$$[$0-2]+" || "+$$[$0];break;case 40:this.$="context.lookup('Point').value(scope).call(this, "+$$[$0-3]+","+$$[$0-1]+")";break;case 41:this.$="rt.concat("+$$[$0-2]+", "+$$[$0]+")";break;case 42:this.$=$$[$0-2]+".assign("+$$[$0]+", scope, this).value(scope)";break;case 43:this.$=$$[$0-2]+".assign("+$$[$0-2]+".value(scope) + "+$$[$0]+", scope, this).value(scope)";break;case 44:this.$=$$[$0-2]+".assign("+$$[$0-2]+".value(scope) - "+$$[$0]+", scope, this).value(scope)";break;case 45:this.$=$$[$0]+".assign("+$$[$0]+".value(scope) + 1, scope, this).value(scope)";break;case 46:this.$=$$[$0-1]+".assign("+$$[$0-1]+".value(scope) + 1, scope, this).value(scope) - 1";break;case 47:this.$=$$[$0]+".assign("+$$[$0]+".value(scope) - 1, scope, this).value(scope)";break;case 48:this.$=$$[$0-1]+".assign("+$$[$0-1]+".value(scope) - 1, scope, this).value(scope) + 1";break;case 49:this.$=$$[$0-4]+" ? "+$$[$0-2]+" : "+$$[$0];break;case 52:this.$=$$[$0-1]+$$[$0];break;case 55:this.$="undefined";break;case 61:this.$="'"+$$[$0-1]+"'";break;case 62:this.$='"'+$$[$0-1]+'"';break;case 64:case 69:case 75:case 80:case 85:case 130:case 140:case 145:case 147:this.$="";break;case 65:this.$="\n"!==$$[$0]?$$[$0]:"\\n";break;case 66:this.$=("\n"!==$$[$0-1]?$$[$0-1]:"\\n")+$$[$0];break;case 67:var str=$$[$0-1],match=str.match(/^([^\\]|\\\\)*(\\n)+(\s+)/);if(null!==match){var re=new RegExp("(([^\\\\]|\\\\\\\\)*)\\\\n"+match[3],"g");str=str.replace(re,"$1\\n")}"\\"==str[0]&&"n"==str[1]&&(str=str.slice(2)),this.$='"'+str+'"';break;case 70:"\n"==$$[$0]?this.$="\\n":'"'==$$[$0]?this.$='\\"':"\\"==$$[$0]?this.$="\\\\":"%\\>"==$$[$0]?this.$="%>":this.$=$$[$0];break;case 71:"\n"==$$[$0-1]?this.$="\\n"+$$[$0]:'"'==$$[$0-1]?this.$='\\"'+$$[$0]:"\\"==$$[$0-1]?this.$="\\\\"+$$[$0]:"%\\>"==$$[$0-1]?this.$="%>"+$$[$0]:this.$=$$[$0-1]+$$[$0];break;case 72:this.$="["+$$[$0-1]+"]";break;case 73:this.$="{"+$$[$0-1]+"}";break;case 77:case 82:case 87:this.$=$$[$0-2]+", "+$$[$0];break;case 78:this.$=$$[$0-2]+": "+$$[$0];break;case 83:this.$='new ScopeOverride("'+$$[$0-2]+'", '+$$[$0]+")";break;case 88:this.$='new ScopeOverride("'+$$[$0-4]+'", '+$$[$0-2]+", "+$$[$0]+")";break;case 90:this.$=$$[$0]+".value(scope)";break;case 91:this.$=$$[$0-5]+".value(scope)."+$$[$0-3]+"("+$$[$0-1]+")";break;case 92:this.$=$$[$0-3]+".value(new Scope(context, scope, ["+$$[$0-1]+"], "+$$[$0-3]+"))";break;case 93:this.$=$$[$0-3]+".multiValue(context, scope, ["+$$[$0-1]+"], "+$$[$0-3]+")";break;case 94:this.$=lvalue+".value()["+$$[$0-4]+"]("+$$[$0-1]+")";break;case 95:this.$=""+$$[$0-3]+".call("+["this"].concat($$[$0-1])+")";break;case 96:this.$=""+$$[$0-3]+"["+$$[$0-1]+" - 1]";break;case 97:this.$=yy.sync($$[$0-1]+";");break;case 104:yy.setParsingOption($$[$0-2],eval($$[$0])),this.$=yy.sync("");break;case 105:this.$=yy.sync("setTimeout(function() "+$$[$0].code+", "+$$[$0-2]+");");break;case 106:this.$=$$[$0].cps?yy.async("(function (done) {if ("+$$[$0-2]+") "+yy.withIncludes($$[$0],"done")+" else "+yy.withIncludes(yy.sync(""),"done")+"})"):yy.sync("if ("+$$[$0-2]+") "+$$[$0].code);break;case 107:this.$=$$[$0-2].cps||$$[$0].cps?yy.async("(function (done) {if ("+$$[$0-4]+") {"+yy.withIncludes($$[$0-2],"done")+"} else {"+yy.withIncludes($$[$0],"done")+"}})"):yy.sync("if ("+$$[$0-4]+") "+$$[$0-2].code+" else "+$$[$0].code);break;case 108:this.$=yy.sync("while ("+$$[$0-2]+") "+$$[$0].code);break;case 109:this.$=yy.sync("do "+$$[$0-5].code+" while ("+$$[$0-2]+");");break;case 110:this.$=yy.sync("for ("+$$[$0-6]+"; "+$$[$0-4]+"; "+$$[$0-2]+") "+$$[$0].code);break;case 111:this.$=yy.sync("switch ("+$$[$0-2]+") "+$$[$0].code);break;case 112:this.$=yy.sync("break;");break;case 113:this.$=yy.sync("continue;");break;case 114:this.$=yy.sync("return;");break;case 115:this.$=yy.sync("return "+$$[$0-1]+";");break;case 116:this.$=yy.code($$[$0].cps,"context.beginAutocalcOff(); "+$$[$0].code+" context.endAutocalcOff();");break;case 117:this.$=yy.async("eden.include","["+$$[$0].join(", ")+"]","includePrefix","this");break;case 118:this.$=yy.async("edenUI.loadPlugin",$$[$0-1],"this");break;case 119:this.$=yy.async($$[$0-1]);break;case 120:this.$=yy.sync($$[$0-5]+".mutate(scope, function(s) { scope.lookup(s.name).value.splice("+$$[$0-3]+" - 1, 0, "+$$[$0-1]+"); }, this);");break;case 121:this.$=yy.sync($$[$0-3]+".mutate(scope, function(s) { scope.lookup(s.name).value.splice("+$$[$0-1]+" - 1, 1); }, this);");break;case 122:this.$=yy.sync($$[$0-3]+".mutate(scope, function(s) { scope.lookup(s.name).value.push("+$$[$0-1]+"); }, this);");break;case 123:this.$=yy.sync($$[$0-1]+".mutate(scope, function(s) { scope.lookup(s.name).value.shift(); }, this);");break;case 124:this.$=yy.sync("case "+$$[$0-1]+": ");break;case 125:this.$=yy.sync("default: ");break;case 126:this.$=yy.sync("");break;case 127:this.$=[$$[$0-2]];break;case 128:console.log("PARSE"),this.$=[$$[$0-3]].concat($$[$0]);break;case 131:case 152:this.$=[$$[$0]];break;case 132:case 153:$$[$0].unshift($$[$0-2]),this.$=$$[$0];break;case 134:this.$=[];break;case 135:this.$=yy.sync("console.log("+$$[$0-1]+")");break;case 136:var eden_definition=JSON.stringify(yy.extractEdenDefinition(_$[$0-1].first_line,_$[$0-1].first_column,_$[$0].last_line,_$[$0].last_column)),subscribers=JSON.stringify(yy.getFuncBodyDependencies());yy.paras.pop(),yy.locals.pop(),yy.funcBodyDependencies.pop(),this.$=yy.sync("context.lookup('"+$$[$0-1]+"').define(function(context, scope) { return "+$$[$0]+"}, this,"+subscribers+").eden_definition = "+eden_definition+";");break;case 141:this.$=yy.map($$[$0-1],function(a){return yy.locals[0][a]=1,"var local_"+a+" = new Symbol();"}).join(" ");break;case 143:this.$=$$[$0-1]+"; "+$$[$0];break;case 148:yy.map($$[$0-1],function(a,b){yy.paras[0][a]=b}),this.$="";break;case 149:this.$="function() { var argsa = []; for(var i=0; i<arguments.length; i++) argsa.push(arguments[i]); var args = new Symbol().assign(argsa, scope); "+$$[$0-3]+" "+$$[$0-2]+" "+$$[$0-1].code+"}";break;case 150:var eden_definition=JSON.stringify(yy.extractEdenDefinition(_$[$0-2].first_line,_$[$0-2].first_column,_$[$0].last_line,_$[$0].last_column));yy.paras.pop(),yy.locals.pop(),yy.funcBodyDependencies.pop(),this.$=yy.sync("context.lookup('"+$$[$0-2]+"').define(function(context, scope) { return "+$$[$0]+"; }, this).observe("+JSON.stringify($$[$0-1])+").eden_definition = "+eden_definition+";");break;case 154:for(var js="",i=0;i<$$[$0-2].length;i++)js=js+"context.lookup('"+$$[$0-2][i]+"').observe(['"+$$[$0-5]+"']); ",js=js+"context.lookup('"+$$[$0-2][i]+"').subscribe(['"+$$[$0-5]+"']); ",js=js+"context.expireSymbol(context.lookup('"+$$[$0-2][i]+"')); ";this.$=yy.sync(js);break;case 155:this.$=$$[$0-1].cps?yy.async("(function () { "+yy.withIncludes($$[$0-1],"done")+" })"):yy.sync("{ "+$$[$0-1].code+" }");break;case 157:this.$=yy.code($$[$0-1].cps+$$[$0].cps,$$[$0-1].code+" "+$$[$0].code);break;case 158:var eden_definition=JSON.stringify(yy.extractEdenDefinition(_$[$0-3].first_line,_$[$0-3].first_column,_$[$0-1].last_line,_$[$0-1].last_column));yy.leaveDefinition(),this.$=yy.sync(yy.evalExps.join("\n")+yy.printEvalIDs($$[$0-3])+"("+yy.observable($$[$0-3])+".eden_definition = "+eden_definition+", "+yy.observable($$[$0-3])+".define(function(context, scope) { return "+$$[$0-1]+"; },this, "+JSON.stringify(yy.getDependencies())+"));")}},table:[{3:1,4:2,5:$V0,6:42,7:$V1,8:$V2,9:$V3,10:$V4,11:5,14:55,15:$V5,17:$V6,18:$V7,19:36,20:3,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$Vd,51:$Ve,52:$Vf,53:$Vg,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn,86:4,87:$Vo,88:6,89:7,90:8,91:9,92:10,93:11,94:$Vp,95:$Vq,96:$Vr,98:$Vs,99:$Vt,100:$Vu,102:$Vv,103:$Vw,104:$Vx,105:$Vy,106:$Vz,107:23,108:$VA,109:$VB,110:$VC,111:$VD,112:$VE,113:$VF,114:$VG,115:$VH,116:$VI,118:46,120:$VJ,121:$VK},{1:[3]},{5:[1,68]},o($VL,[2,11]),o($VL,[2,156],{86:4,11:5,88:6,89:7,90:8,91:9,92:10,93:11,107:23,21:33,19:36,6:42,118:46,62:53,63:54,14:55,64:56,65:57,20:69,7:$V1,8:$V2,9:$V3,10:$V4,15:$V5,17:$V6,18:$V7,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$Vd,51:$Ve,52:$Vf,53:$Vg,55:$Vh,59:$Vi,60:$Vj,61:$Vk,66:$Vl,68:$Vm,71:$Vn,87:$Vo,94:$Vp,95:$Vq,96:$Vr,98:$Vs,99:$Vt,100:$Vu,102:$Vv,103:$Vw,104:$Vx,105:$Vy,106:$Vz,108:$VA,109:$VB,110:$VC,111:$VD,112:$VE,113:$VF,114:$VG,115:$VH,116:$VI,120:$VJ,121:$VK}),{18:$VM,23:$VN,27:$VO,28:$VP,29:$VQ,30:$VR,31:$VS,32:$VT,33:$VU,34:$VV,35:$VW,36:$VX,37:$VY,38:$VZ,39:$V_,40:$V$,41:$V01,42:$V11,43:$V21,47:$V31,53:$V41,87:$V51},o($V61,[2,98]),o($V61,[2,99]),o($V61,[2,100]),o($V61,[2,101]),o($V61,[2,102]),o($V61,[2,103]),{7:[1,92]},{15:[1,93]},{15:[1,94]},{15:[1,95]},{6:42,7:$V1,8:$V2,9:$V3,10:$V4,11:5,14:55,15:$V5,17:$V6,18:$V7,19:36,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$Vd,51:$Ve,52:$Vf,53:$Vg,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn,86:96,87:$Vo,88:6,89:7,90:8,91:9,92:10,93:11,94:$Vp,95:$Vq,96:$Vr,98:$Vs,99:$Vt,100:$Vu,102:$Vv,103:$Vw,104:$Vx,105:$Vy,106:$Vz,107:23,108:$VA,109:$VB,110:$VC,111:$VD,112:$VE,113:$VF,114:$VG,115:$VH,116:$VI,118:46,120:$VJ,121:$VK},{15:[1,97]},{15:[1,98]},{87:[1,99]},{87:[1,100]},{6:42,7:$V71,8:$V2,9:$V3,10:$V4,11:102,14:55,15:$V5,17:$V6,18:$V7,19:36,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$V81,51:$Ve,52:$Vf,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn,87:[1,101]},{6:42,7:$V1,8:$V2,9:$V3,10:$V4,11:5,14:55,15:$V5,17:$V6,18:$V7,19:36,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$Vd,51:$Ve,52:$Vf,53:$Vg,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn,86:105,87:$Vo,88:6,89:7,90:8,91:9,92:10,93:11,94:$Vp,95:$Vq,96:$Vr,98:$Vs,99:$Vt,100:$Vu,102:$Vv,103:$Vw,104:$Vx,105:$Vy,106:$Vz,107:23,108:$VA,109:$VB,110:$VC,111:$VD,112:$VE,113:$VF,114:$VG,115:$VH,116:$VI,118:46,120:$VJ,121:$VK},o($V61,[2,117]),{6:42,7:$V71,8:$V2,9:$V3,10:$V4,11:106,14:55,15:$V5,17:$V6,18:$V7,19:36,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$V81,51:$Ve,52:$Vf,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn},{6:42,7:$V71,8:$V2,9:$V3,10:$V4,11:107,14:55,15:$V5,17:$V6,18:$V7,19:36,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$V81,51:$Ve,52:$Vf,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn},{6:108,7:$V71,8:$V2,9:$V3,15:$V91,17:$V6,18:$V7},{6:110,7:$V71,8:$V2,9:$V3,15:$V91,17:$V6,18:$V7},{6:111,7:$V71,8:$V2,9:$V3,15:$V91,17:$V6,18:$V7},{6:112,7:$V71,8:$V2,9:$V3,15:$V91,17:$V6,18:$V7},{10:$V4,14:55,21:113,44:$Va1,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn},{54:[1,115]},o($V61,[2,126]),o($Vb1,[2,13]),{15:[1,116]},{6:118,7:$V71,8:$V2,9:$V3,10:$V4,11:117,14:55,15:$V5,17:$V6,18:$V7,19:36,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$V81,51:$Ve,52:$Vf,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn},o($Vb1,[2,16],{10:$Vc1,15:$Vd1}),{6:42,7:$V71,8:$V2,9:$V3,10:$V4,11:121,14:55,15:$V5,17:$V6,18:$V7,19:36,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$V81,51:$Ve,52:$Vf,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn},{6:42,7:$V71,8:$V2,9:$V3,10:$V4,11:122,14:55,15:$V5,17:$V6,18:$V7,19:36,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$V81,51:$Ve,52:$Vf,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn},{6:42,7:$V71,8:$V2,9:$V3,10:$V4,11:123,14:55,15:$V5,17:$V6,18:$V7,19:36,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$V81,51:$Ve,52:$Vf,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn},{6:124,7:$V71,8:$V2,9:$V3,15:$V91,17:$V6,18:$V7},{4:126,6:42,7:[1,129],8:$V2,9:$V3,10:$V4,11:125,14:55,15:$V5,17:$V6,18:$V7,19:36,20:3,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$Vd,46:$V0,51:$Ve,52:$Vf,53:$Vg,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn,76:127,77:128,78:130,86:4,87:$Vo,88:6,89:7,90:8,91:9,92:10,93:11,94:$Vp,95:$Vq,96:$Vr,98:$Vs,99:$Vt,100:$Vu,102:$Vv,103:$Vw,104:$Vx,105:$Vy,106:$Vz,107:23,108:$VA,109:$VB,110:$VC,111:$VD,112:$VE,113:$VF,114:$VG,115:$VH,116:$VI,118:46,120:$VJ,121:$VK},o([12,15,16,17,18,23,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,45,46,47,53,54,85,87],$Ve1,{10:$Vf1,13:$Vg1,44:$Vh1,48:$Vi1,49:$Vj1,50:$Vk1,51:$Vl1,52:$Vm1}),{6:139,7:$V71,8:$V2,9:$V3,15:$V91,17:$V6,18:$V7},{6:140,7:$V71,8:$V2,9:$V3,15:$V91,17:$V6,18:$V7},{56:141,58:$Vn1},{44:$Vo1,54:[1,146],119:143,131:144},o([10,13,15,18,23,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,47,48,49,50,51,52,53,87],$Vp1,{132:$Vq1,133:$Vr1}),{6:149,7:$V71,8:$V2,9:$V3,15:$V91,17:$V6,18:$V7},{15:[1,150]},o($Vs1,[2,53]),o($Vs1,[2,54]),o($Vs1,[2,55]),o($Vs1,[2,56]),o($Vs1,[2,57]),o($Vs1,$Vt1),o($Vs1,[2,59]),o($Vs1,[2,60]),o($Vu1,[2,3]),o($Vu1,[2,4]),{6:42,7:$V71,8:$V2,9:$V3,10:$V4,11:151,14:55,15:$V5,17:$V6,18:$V7,19:36,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$V81,51:$Ve,52:$Vf,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn},{6:153,7:$V71,8:$V2,9:$V3,15:$V91,17:$V6,18:$V7,19:152},{7:[1,154]},{7:[1,155]},{6:42,7:$V71,8:$V2,9:$V3,10:$V4,11:158,12:$Vv1,14:55,15:$V5,17:$V6,18:$V7,19:36,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$V81,51:$Ve,52:$Vf,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn,75:156,117:157},{67:$Vw1,68:[2,64],69:159,70:160},{67:$Vx1,72:162,73:[2,69],74:163},{67:[1,165]},{1:[2,1]},o($VL,[2,157]),o($V61,[2,97]),o($Vb1,[2,21]),{6:42,7:$V71,8:$V2,9:$V3,10:$V4,11:166,14:55,15:$V5,17:$V6,18:$V7,19:36,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$V81,51:$Ve,52:$Vf,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn},{6:42,7:$V71,8:$V2,9:$V3,10:$V4,11:167,14:55,15:$V5,17:$V6,18:$V7,19:36,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$V81,51:$Ve,52:$Vf,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn},{6:42,7:$V71,8:$V2,9:$V3,10:$V4,11:168,14:55,15:$V5,17:$V6,18:$V7,19:36,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$V81,51:$Ve,52:$Vf,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn},{6:42,7:$V71,8:$V2,9:$V3,10:$V4,11:169,14:55,15:$V5,17:$V6,18:$V7,19:36,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$V81,51:$Ve,52:$Vf,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn},{6:42,7:$V71,8:$V2,9:$V3,10:$V4,11:170,14:55,15:$V5,17:$V6,18:$V7,19:36,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$V81,51:$Ve,52:$Vf,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn},{6:42,7:$V71,8:$V2,9:$V3,10:$V4,11:171,14:55,15:$V5,17:$V6,18:$V7,19:36,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$V81,51:$Ve,52:$Vf,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn},{6:42,7:$V71,8:$V2,9:$V3,10:$V4,11:172,14:55,15:$V5,17:$V6,18:$V7,19:36,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$V81,51:$Ve,52:$Vf,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn},{6:42,7:$V71,8:$V2,9:$V3,10:$V4,11:173,14:55,15:$V5,17:$V6,18:$V7,19:36,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$V81,51:$Ve,52:$Vf,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn},{6:42,7:$V71,8:$V2,9:$V3,10:$V4,11:174,14:55,15:$V5,17:$V6,18:$V7,19:36,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$V81,51:$Ve,52:$Vf,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn},{6:42,7:$V71,8:$V2,9:$V3,10:$V4,11:175,14:55,15:$V5,17:$V6,18:$V7,19:36,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$V81,51:$Ve,52:$Vf,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn},{6:42,7:$V71,8:$V2,9:$V3,10:$V4,11:176,14:55,15:$V5,17:$V6,18:$V7,19:36,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$V81,51:$Ve,52:$Vf,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn},{6:42,7:$V71,8:$V2,9:$V3,10:$V4,11:177,14:55,15:$V5,17:$V6,18:$V7,19:36,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$V81,51:$Ve,52:$Vf,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn},{6:42,7:$V71,8:$V2,9:$V3,10:$V4,11:178,14:55,15:$V5,17:$V6,18:$V7,19:36,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$V81,51:$Ve,52:$Vf,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn},{6:42,7:$V71,8:$V2,9:$V3,10:$V4,11:179,14:55,15:$V5,17:$V6,18:$V7,19:36,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$V81,51:$Ve,52:$Vf,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn},{6:42,7:$V71,8:$V2,9:$V3,10:$V4,11:180,14:55,15:$V5,17:$V6,18:$V7,19:36,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$V81,51:$Ve,52:$Vf,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn},{6:42,7:$V71,8:$V2,9:$V3,10:$V4,11:181,14:55,15:$V5,17:$V6,18:$V7,19:36,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$V81,51:$Ve,52:$Vf,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn},{6:42,7:$V71,8:$V2,9:$V3,10:$V4,11:182,14:55,15:$V5,17:$V6,18:$V7,19:36,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$V81,51:$Ve,52:$Vf,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn},{6:42,7:$V71,8:$V2,9:$V3,10:$V4,11:183,14:55,15:$V5,17:$V6,18:$V7,19:36,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$V81,51:$Ve,52:$Vf,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn},{6:42,7:$V71,8:$V2,9:$V3,10:$V4,11:184,14:55,15:$V5,17:$V6,18:$V7,19:36,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$V81,51:$Ve,52:$Vf,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn},{6:42,7:$V71,8:$V2,9:$V3,10:$V4,11:185,14:55,15:$V5,17:$V6,18:$V7,19:36,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$V81,51:$Ve,52:$Vf,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn},{48:[1,186]},{6:42,7:$V71,8:$V2,9:$V3,10:$V4,11:187,14:55,15:$V5,17:$V6,18:$V7,19:36,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$V81,51:$Ve,52:$Vf,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn},{6:42,7:$V71,8:$V2,9:$V3,10:$V4,11:188,14:55,15:$V5,17:$V6,18:$V7,19:36,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$V81,51:$Ve,52:$Vf,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn},{6:42,7:$V71,8:$V2,9:$V3,10:$V4,11:189,14:55,15:$V5,17:$V6,18:$V7,19:36,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$V81,51:$Ve,52:$Vf,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn},{98:[1,190]},{6:42,7:$V71,8:$V2,9:$V3,10:$V4,11:192,14:55,15:$V5,17:$V6,18:$V7,19:36,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$V81,51:$Ve,52:$Vf,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn,87:$Vy1,101:191},{6:42,7:$V71,8:$V2,9:$V3,10:$V4,11:193,14:55,15:$V5,17:$V6,18:$V7,19:36,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$V81,51:$Ve,52:$Vf,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn},o($V61,[2,112]),o($V61,[2,113]),o($V61,[2,114]),{18:$VM,23:$VN,27:$VO,28:$VP,29:$VQ,30:$VR,31:$VS,32:$VT,33:$VU,34:$VV,35:$VW,36:$VX,37:$VY,38:$VZ,39:$V_,40:$V$,41:$V01,42:$V11,43:$V21,47:$V31,53:$V41,87:[1,194]},{6:42,7:[1,196],8:$V2,9:$V3,10:$V4,11:195,14:55,15:$V5,17:$V6,18:$V7,19:36,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$V81,46:$Vz1,51:$Ve,52:$Vf,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn,76:127,77:128,78:130},o($Vu1,$Vp1),o($V61,[2,116]),{18:$VM,23:$VN,27:$VO,28:$VP,29:$VQ,30:$VR,31:$VS,32:$VT,33:$VU,34:$VV,35:$VW,36:$VX,37:$VY,38:$VZ,39:$V_,40:$V$,41:$V01,42:$V11,43:$V21,47:$V31,53:$V41,87:[1,197]},{18:$VM,23:$VN,27:$VO,28:$VP,29:$VQ,30:$VR,31:$VS,32:$VT,33:$VU,34:$VV,35:$VW,36:$VX,37:$VY,38:$VZ,39:$V_,40:$V$,41:$V01,42:$V11,43:$V21,47:$V31,53:$V41,87:[1,198]},{10:$VA1,13:$VB1,45:[1,199]},{6:202,7:$V71,8:$V2,9:$V3,15:$V91,17:$V6,18:$V7},{10:$VA1,13:$VB1,45:[1,203]},{10:$VA1,13:$VB1,45:[1,204]},{10:$VA1,13:$VB1,87:[1,205]},{54:[1,206]},{7:$VC1,46:$Vz1,76:127,77:128,78:130},o($V61,[2,125]),{6:42,7:$V71,8:$V2,9:$V3,10:$V4,11:208,14:55,15:$V5,17:$V6,18:$V7,19:36,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$V81,51:$Ve,52:$Vf,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn},{16:[1,209],18:$VM,23:$VN,27:$VO,28:$VP,29:$VQ,30:$VR,31:$VS,32:$VT,33:$VU,34:$VV,35:$VW,36:$VX,37:$VY,38:$VZ,39:$V_,40:$V$,41:$V01,42:$V11,43:$V21,47:$V31,53:$V41},o([15,18,23,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,47,53],$Ve1,{10:$Vf1,13:$Vg1,16:$VD1,44:$Vh1,48:$Vi1,49:$Vj1,50:$Vk1,51:$Vl1,52:$Vm1}),{6:42,7:$V71,8:$V2,9:$V3,10:$V4,11:158,14:55,15:$V5,16:$Vv1,17:$V6,18:$V7,19:36,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$V81,51:$Ve,52:$Vf,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn,75:211,117:157},{6:42,7:$V71,8:$V2,9:$V3,10:$V4,11:212,14:55,15:$V5,17:$V6,18:$V7,19:36,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$V81,51:$Ve,52:$Vf,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn},o($VE1,[2,17],{27:$VO,31:$VS}),o($VE1,[2,18],{27:$VO,31:$VS}),o($VE1,[2,19],{27:$VO,31:$VS}),o($Vb1,[2,20],{10:$VA1,13:$VB1}),{18:$VM,23:$VN,27:$VO,28:$VP,29:$VQ,30:$VR,31:$VS,32:$VT,33:$VU,34:$VV,35:$VW,36:$VX,37:$VY,38:$VZ,39:$V_,40:$V$,41:$V01,42:$V11,43:$V21,45:$VF1,47:$V31,53:$V41,87:$V51},{46:[1,214]},{46:[1,215]},{46:[2,74]},o([10,13,15,18,23,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,47,48,49,50,51,52,53,87],$Vp1,{54:$VG1,132:$Vq1,133:$Vr1}),{45:[1,217],46:[2,76]},{6:42,7:$V71,8:$V2,9:$V3,10:$V4,11:218,14:55,15:$V5,17:$V6,18:$V7,19:36,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$V81,51:$Ve,52:$Vf,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn},{6:42,7:$V71,8:$V2,9:$V3,10:$V4,11:219,14:55,15:$V5,17:$V6,18:$V7,19:36,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$V81,51:$Ve,52:$Vf,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn},{6:42,7:$V71,8:$V2,9:$V3,10:$V4,11:220,14:55,15:$V5,17:$V6,18:$V7,19:36,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$V81,51:$Ve,52:$Vf,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn},o($Vb1,[2,46]),o($Vb1,[2,48]),{7:[1,221]},{7:$VH1,46:[2,80],79:222,80:224,81:226,82:223,83:225,84:227},{6:42,7:$V71,8:$V2,9:$V3,10:$V4,11:230,14:229,15:$V5,17:$V6,18:$V7,19:36,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$V81,51:$Ve,52:$Vf,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn},o($Vb1,[2,45],{10:$VA1,13:$VB1}),o($Vb1,[2,47],{10:$VA1,13:$VB1}),{57:[1,231]},{56:232,57:[2,51],58:$Vn1},o($V61,[2,136]),{44:$Vo1,119:233},o($VI1,[2,147],{128:234,129:235,130:[1,236]}),{7:$VJ1,123:237},{6:42,7:$V71,8:$V2,9:$V3,10:$V4,11:239,14:55,15:$V5,17:$V6,18:$V7,19:36,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$V81,51:$Ve,52:$Vf,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn},{10:[1,240]},{10:$VA1,13:$VB1,87:[1,241]},{6:42,7:$V71,8:$V2,9:$V3,10:$V4,11:242,14:55,15:$V5,17:$V6,18:$V7,19:36,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$V81,51:$Ve,52:$Vf,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn},{17:[1,243],18:$VM,23:$VN,27:$VO,28:$VP,29:$VQ,30:$VR,31:$VS,32:$VT,33:$VU,34:$VV,35:$VW,36:$VX,37:$VY,38:$VZ,39:$V_,40:$V$,41:$V01,42:$V11,43:$V21,47:$V31,53:$V41},o([12,13,16,17,18,23,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,85,87],[2,10],{10:$Vc1,15:$Vd1}),o([12,15,16,17,18,23,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,45,46,47,48,49,50,51,52,53,54,85,87],$Ve1,{10:$Vf1,13:$Vg1,44:$Vh1}),o($VK1,[2,137]),o($VK1,[2,138]),{12:[1,244]},o($VL1,[2,133]),o($VL1,[2,131],{18:$VM,23:$VN,27:$VO,28:$VP,29:$VQ,30:$VR,31:$VS,32:$VT,33:$VU,34:$VV,35:$VW,36:$VX,37:$VY,38:$VZ,39:$V_,40:$V$,41:$V01,42:$V11,43:$V21,45:[1,245],47:$V31,53:$V41}),{68:[1,246]},{68:[2,63]},{67:$Vw1,68:[2,65],70:247},{73:[1,248]},{73:[2,68]},{67:$Vx1,73:[2,70],74:249},{66:[1,250]},o($VM1,[2,22],{18:$VM,27:$VO,29:$VQ,30:$VR,31:$VS}),o($VM1,[2,23],{18:$VM,27:$VO,29:$VQ,30:$VR,31:$VS}),o($VE1,[2,24],{27:$VO,31:$VS}),o($VE1,[2,25],{27:$VO,31:$VS}),o($VE1,[2,26],{27:$VO,31:$VS}),o($VE1,[2,27],{27:$VO,31:$VS}),o($VN1,[2,28],{18:$VM,23:$VN,27:$VO,28:$VP,29:$VQ,30:$VR,31:$VS,47:$V31}),o($VN1,[2,29],{18:$VM,23:$VN,27:$VO,28:$VP,29:$VQ,30:$VR,31:$VS,47:$V31}),o($VN1,[2,30],{18:$VM,23:$VN,27:$VO,28:$VP,29:$VQ,30:$VR,31:$VS,47:$V31}),o($VN1,[2,31],{18:$VM,23:$VN,27:$VO,28:$VP,29:$VQ,30:$VR,31:$VS,47:$V31}),o($VO1,[2,32],{18:$VM,23:$VN,27:$VO,28:$VP,29:$VQ,30:$VR,31:$VS,32:$VT,33:$VU,34:$VV,35:$VW,38:$VZ,39:$V_,47:$V31}),o($VO1,[2,33],{18:$VM,23:$VN,27:$VO,28:$VP,29:$VQ,30:$VR,31:$VS,32:$VT,33:$VU,34:$VV,35:$VW,38:$VZ,39:$V_,47:$V31}),o($VN1,[2,34],{18:$VM,23:$VN,27:$VO,28:$VP,29:$VQ,30:$VR,31:$VS,47:$V31}),o($VN1,[2,35],{18:$VM,23:$VN,27:$VO,28:$VP,29:$VQ,30:$VR,31:$VS,47:$V31}),o($VP1,[2,36],{18:$VM,23:$VN,27:$VO,28:$VP,29:$VQ,30:$VR,31:$VS,32:$VT,33:$VU,34:$VV,35:$VW,36:$VX,37:$VY,38:$VZ,39:$V_,47:$V31}),o($VP1,[2,37],{18:$VM,23:$VN,27:$VO,28:$VP,29:$VQ,30:$VR,31:$VS,32:$VT,33:$VU,34:$VV,35:$VW,36:$VX,37:$VY,38:$VZ,39:$V_,47:$V31}),o($VQ1,[2,38],{18:$VM,23:$VN,27:$VO,28:$VP,29:$VQ,30:$VR,31:$VS,32:$VT,33:$VU,34:$VV,35:$VW,36:$VX,37:$VY,38:$VZ,39:$V_,40:$V$,41:$V01,47:$V31}),o($VQ1,[2,39],{18:$VM,23:$VN,27:$VO,28:$VP,29:$VQ,30:$VR,31:$VS,32:$VT,33:$VU,34:$VV,35:$VW,36:$VX,37:$VY,38:$VZ,39:$V_,40:$V$,41:$V01,47:$V31}),o([12,16,17,32,33,34,35,36,37,38,39,40,41,42,43,45,46,47,53,54,85,87],[2,41],{18:$VM,23:$VN,27:$VO,28:$VP,29:$VQ,30:$VR,31:$VS}),{18:$VM,23:$VN,27:$VO,28:$VP,29:$VQ,30:$VR,31:$VS,32:$VT,33:$VU,34:$VV,35:$VW,36:$VX,37:$VY,38:$VZ,39:$V_,40:$V$,41:$V01,42:$V11,43:$V21,47:$V31,53:$V41,54:[1,251]},{10:$V4,14:55,21:252,44:$Va1,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn},{16:[1,253],18:$VM,23:$VN,27:$VO,28:$VP,29:$VQ,30:$VR,31:$VS,32:$VT,33:$VU,34:$VV,35:$VW,36:$VX,37:$VY,38:$VZ,39:$V_,40:$V$,41:$V01,42:$V11,43:$V21,47:$V31,53:$V41},{16:[1,254],18:$VM,23:$VN,27:$VO,28:$VP,29:$VQ,30:$VR,31:$VS,32:$VT,33:$VU,34:$VV,35:$VW,36:$VX,37:$VY,38:$VZ,39:$V_,40:$V$,41:$V01,42:$V11,43:$V21,47:$V31,53:$V41},{16:[1,255],18:$VM,23:$VN,27:$VO,28:$VP,29:$VQ,30:$VR,31:$VS,32:$VT,33:$VU,34:$VV,35:$VW,36:$VX,37:$VY,38:$VZ,39:$V_,40:$V$,41:$V01,42:$V11,43:$V21,47:$V31,53:$V41},{15:[1,256]},{87:[1,257]
},o([16,87],[2,129],{18:$VM,23:$VN,27:$VO,28:$VP,29:$VQ,30:$VR,31:$VS,32:$VT,33:$VU,34:$VV,35:$VW,36:$VX,37:$VY,38:$VZ,39:$V_,40:$V$,41:$V01,42:$V11,43:$V21,47:$V31,53:$V41}),{16:[1,258],18:$VM,23:$VN,27:$VO,28:$VP,29:$VQ,30:$VR,31:$VS,32:$VT,33:$VU,34:$VV,35:$VW,36:$VX,37:$VY,38:$VZ,39:$V_,40:$V$,41:$V01,42:$V11,43:$V21,47:$V31,53:$V41},o($V61,[2,115]),{18:$VM,23:$VN,27:$VO,28:$VP,29:$VQ,30:$VR,31:$VS,32:$VT,33:$VU,34:$VV,35:$VW,36:$VX,37:$VY,38:$VZ,39:$V_,40:$V$,41:$V01,42:$V11,43:$V21,45:$VF1,47:$V31,53:$V41},o([10,13,15,18,23,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,47,48,49,50,51,52,53],$Vp1,{54:$VG1}),o($V61,[2,118]),o($V61,[2,119]),{6:42,7:$V71,8:$V2,9:$V3,10:$V4,11:259,14:55,15:$V5,17:$V6,18:$V7,19:36,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$V81,51:$Ve,52:$Vf,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn},{6:42,7:$V71,8:$V2,9:$V3,10:$V4,11:230,14:260,15:$V5,17:$V6,18:$V7,19:36,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$V81,51:$Ve,52:$Vf,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn},{7:[1,261]},{10:$VA1,13:$VB1,16:$VD1},{6:42,7:$V71,8:$V2,9:$V3,10:$V4,11:262,14:55,15:$V5,17:$V6,18:$V7,19:36,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$V81,51:$Ve,52:$Vf,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn},{6:42,7:$V71,8:$V2,9:$V3,10:$V4,11:263,14:55,15:$V5,17:$V6,18:$V7,19:36,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$V81,51:$Ve,52:$Vf,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn},o($V61,[2,123]),o($V61,[2,124]),{54:$VG1},{16:[1,264],18:$VM,23:$VN,27:$VO,28:$VP,29:$VQ,30:$VR,31:$VS,32:$VT,33:$VU,34:$VV,35:$VW,36:$VX,37:$VY,38:$VZ,39:$V_,40:$V$,41:$V01,42:$V11,43:$V21,47:$V31,53:$V41},o($Vb1,[2,15]),o($Vu1,[2,8]),{16:[1,265]},{12:[1,266],18:$VM,23:$VN,27:$VO,28:$VP,29:$VQ,30:$VR,31:$VS,32:$VT,33:$VU,34:$VV,35:$VW,36:$VX,37:$VY,38:$VZ,39:$V_,40:$V$,41:$V01,42:$V11,43:$V21,47:$V31,53:$V41},{6:42,7:$V71,8:$V2,9:$V3,10:$V4,11:267,14:55,15:$V5,17:$V6,18:$V7,19:36,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$V81,51:$Ve,52:$Vf,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn},o($V61,[2,155]),o($Vs1,[2,73]),{6:42,7:$V71,8:$V2,9:$V3,10:$V4,11:268,14:55,15:$V5,17:$V6,18:$V7,19:36,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$V81,51:$Ve,52:$Vf,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn},{7:$VC1,77:269,78:130},o($VR1,[2,42],{18:$VM,23:$VN,27:$VO,28:$VP,29:$VQ,30:$VR,31:$VS,32:$VT,33:$VU,34:$VV,35:$VW,36:$VX,37:$VY,38:$VZ,39:$V_,40:$V$,41:$V01,42:$V11,43:$V21,47:$V31,53:$V41}),o($VR1,[2,43],{18:$VM,23:$VN,27:$VO,28:$VP,29:$VQ,30:$VR,31:$VS,32:$VT,33:$VU,34:$VV,35:$VW,36:$VX,37:$VY,38:$VZ,39:$V_,40:$V$,41:$V01,42:$V11,43:$V21,47:$V31,53:$V41}),o($VR1,[2,44],{18:$VM,23:$VN,27:$VO,28:$VP,29:$VQ,30:$VR,31:$VS,32:$VT,33:$VU,34:$VV,35:$VW,36:$VX,37:$VY,38:$VZ,39:$V_,40:$V$,41:$V01,42:$V11,43:$V21,47:$V31,53:$V41}),o($VS1,$VT1,{15:[1,270]}),{46:[1,271]},{46:[1,272]},{46:[2,79]},{46:[2,84]},{45:$VU1,46:$VV1},{45:[1,274],46:[2,86]},{48:[1,275]},o($VW1,$Vt1,{12:[1,276]}),{12:[1,277],18:$VM,23:$VN,27:$VO,28:$VP,29:$VQ,30:$VR,31:$VS,32:$VT,33:$VU,34:$VV,35:$VW,36:$VX,37:$VY,38:$VZ,39:$V_,40:$V$,41:$V01,42:$V11,43:$V21,47:$V31,53:$V41},o($Vb1,[2,50]),{57:[2,52]},o($V61,[2,150]),o($VX1,[2,145],{127:278,126:279,124:280,125:$VY1}),o($VI1,[2,146]),{7:$VJ1,123:282},{44:[2,151]},o($VZ1,[2,152],{45:[1,283]}),{18:$VM,23:$VN,27:$VO,28:$VP,29:$VQ,30:$VR,31:$VS,32:$VT,33:$VU,34:$VV,35:$VW,36:$VX,37:$VY,38:$VZ,39:$V_,40:$V$,41:$V01,42:$V11,43:$V21,47:$V31,53:$V41,87:[1,284]},{7:$VJ1,123:285},o($V61,[2,135]),{16:[1,286],18:$VM,23:$VN,27:$VO,28:$VP,29:$VQ,30:$VR,31:$VS,32:$VT,33:$VU,34:$VV,35:$VW,36:$VX,37:$VY,38:$VZ,39:$V_,40:$V$,41:$V01,42:$V11,43:$V21,47:$V31,53:$V41},o($Vu1,[2,9]),o($Vs1,[2,72]),{6:42,7:$V71,8:$V2,9:$V3,10:$V4,11:158,14:55,15:$V5,17:$V6,18:$V7,19:36,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$V81,51:$Ve,52:$Vf,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn,117:287},o($Vs1,[2,62]),{68:[2,66]},o($Vs1,[2,67]),{73:[2,71]},o($Vs1,[2,61]),{6:42,7:$V71,8:$V2,9:$V3,10:$V4,11:288,14:55,15:$V5,17:$V6,18:$V7,19:36,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$V81,51:$Ve,52:$Vf,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn},o($V61,[2,104]),{6:42,7:$V1,8:$V2,9:$V3,10:$V4,11:5,14:55,15:$V5,17:$V6,18:$V7,19:36,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$Vd,51:$Ve,52:$Vf,53:$Vg,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn,86:289,87:$Vo,88:6,89:7,90:8,91:9,92:10,93:11,94:$Vp,95:$Vq,96:$Vr,98:$Vs,99:$Vt,100:$Vu,102:$Vv,103:$Vw,104:$Vx,105:$Vy,106:$Vz,107:23,108:$VA,109:$VB,110:$VC,111:$VD,112:$VE,113:$VF,114:$VG,115:$VH,116:$VI,118:46,120:$VJ,121:$VK},{6:42,7:$V1,8:$V2,9:$V3,10:$V4,11:5,14:55,15:$V5,17:$V6,18:$V7,19:36,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$Vd,51:$Ve,52:$Vf,53:$Vg,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn,86:290,87:$Vo,88:6,89:7,90:8,91:9,92:10,93:11,94:$Vp,95:$Vq,96:$Vr,98:$Vs,99:$Vt,100:$Vu,102:$Vv,103:$Vw,104:$Vx,105:$Vy,106:$Vz,107:23,108:$VA,109:$VB,110:$VC,111:$VD,112:$VE,113:$VF,114:$VG,115:$VH,116:$VI,118:46,120:$VJ,121:$VK},{6:42,7:$V1,8:$V2,9:$V3,10:$V4,11:5,14:55,15:$V5,17:$V6,18:$V7,19:36,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$Vd,51:$Ve,52:$Vf,53:$Vg,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn,86:291,87:$Vo,88:6,89:7,90:8,91:9,92:10,93:11,94:$Vp,95:$Vq,96:$Vr,98:$Vs,99:$Vt,100:$Vu,102:$Vv,103:$Vw,104:$Vx,105:$Vy,106:$Vz,107:23,108:$VA,109:$VB,110:$VC,111:$VD,112:$VE,113:$VF,114:$VG,115:$VH,116:$VI,118:46,120:$VJ,121:$VK},{6:42,7:$V71,8:$V2,9:$V3,10:$V4,11:292,14:55,15:$V5,17:$V6,18:$V7,19:36,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$V81,51:$Ve,52:$Vf,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn},{6:42,7:$V71,8:$V2,9:$V3,10:$V4,11:192,14:55,15:$V5,17:$V6,18:$V7,19:36,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$V81,51:$Ve,52:$Vf,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn,87:$Vy1,101:293},{6:42,7:$V1,8:$V2,9:$V3,10:$V4,11:5,14:55,15:$V5,17:$V6,18:$V7,19:36,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$Vd,51:$Ve,52:$Vf,53:$Vg,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn,86:294,87:$Vo,88:6,89:7,90:8,91:9,92:10,93:11,94:$Vp,95:$Vq,96:$Vr,98:$Vs,99:$Vt,100:$Vu,102:$Vv,103:$Vw,104:$Vx,105:$Vy,106:$Vz,107:23,108:$VA,109:$VB,110:$VC,111:$VD,112:$VE,113:$VF,114:$VG,115:$VH,116:$VI,118:46,120:$VJ,121:$VK},{18:$VM,23:$VN,27:$VO,28:$VP,29:$VQ,30:$VR,31:$VS,32:$VT,33:$VU,34:$VV,35:$VW,36:$VX,37:$VY,38:$VZ,39:$V_,40:$V$,41:$V01,42:$V11,43:$V21,45:[1,295],47:$V31,53:$V41},o($VW1,$Vt1,{12:[1,296]}),o($V_1,$VT1),{18:$VM,23:$VN,27:$VO,28:$VP,29:$VQ,30:$VR,31:$VS,32:$VT,33:$VU,34:$VV,35:$VW,36:$VX,37:$VY,38:$VZ,39:$V_,40:$V$,41:$V01,42:$V11,43:$V21,47:$V31,53:$V41,87:[1,297]},{18:$VM,23:$VN,27:$VO,28:$VP,29:$VQ,30:$VR,31:$VS,32:$VT,33:$VU,34:$VV,35:$VW,36:$VX,37:$VY,38:$VZ,39:$V_,40:$V$,41:$V01,42:$V11,43:$V21,47:$V31,53:$V41,87:[1,298]},o($Vb1,[2,14]),o($Vu1,[2,95]),o($Vu1,[2,96]),{18:$VM,23:$VN,27:$VO,28:$VP,29:$VQ,30:$VR,31:$VS,32:$VT,33:$VU,34:$VV,35:$VW,36:$VX,37:$VY,38:$VZ,39:$V_,40:$V$,41:$V01,42:$V11,43:$V21,46:[1,299],47:$V31,53:$V41},o($V$1,[2,78],{18:$VM,23:$VN,27:$VO,28:$VP,29:$VQ,30:$VR,31:$VS,32:$VT,33:$VU,34:$VV,35:$VW,36:$VX,37:$VY,38:$VZ,39:$V_,40:$V$,41:$V01,42:$V11,43:$V21,47:$V31,53:$V41}),{46:[2,77]},{6:42,7:$V71,8:$V2,9:$V3,10:$V4,11:158,14:55,15:$V5,16:$Vv1,17:$V6,18:$V7,19:36,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$V81,51:$Ve,52:$Vf,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn,75:300,117:157},o($Vu1,[2,92]),o($Vu1,[2,93]),{7:[1,303],80:301,81:302},{7:$VH1,81:305,83:304,84:227},{6:42,7:$V71,8:$V2,9:$V3,10:$V4,11:306,14:55,15:$V5,17:$V6,18:$V7,19:36,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$V81,51:$Ve,52:$Vf,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn},o($VS1,$V02,{15:[1,307]}),o($Vu1,[2,5]),{4:308,6:42,7:$V1,8:$V2,9:$V3,10:$V4,11:5,14:55,15:$V5,17:$V6,18:$V7,19:36,20:3,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$Vd,46:$V0,51:$Ve,52:$Vf,53:$Vg,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn,86:4,87:$Vo,88:6,89:7,90:8,91:9,92:10,93:11,94:$Vp,95:$Vq,96:$Vr,98:$Vs,99:$Vt,100:$Vu,102:$Vv,103:$Vw,104:$Vx,105:$Vy,106:$Vz,107:23,108:$VA,109:$VB,110:$VC,111:$VD,112:$VE,113:$VF,114:$VG,115:$VH,116:$VI,118:46,120:$VJ,121:$VK},o($VX1,[2,144]),o($VX1,[2,142],{124:280,126:309,125:$VY1}),{7:$VJ1,87:[2,140],122:310,123:311},{87:[1,312]},{7:$VJ1,123:313},o($V61,[2,158]),{12:[1,314]},{87:[1,315]},o($VL1,[2,132]),o($VR1,[2,49],{18:$VM,23:$VN,27:$VO,28:$VP,29:$VQ,30:$VR,31:$VS,32:$VT,33:$VU,34:$VV,35:$VW,36:$VX,37:$VY,38:$VZ,39:$V_,40:$V$,41:$V01,42:$V11,43:$V21,47:$V31,53:$V41}),o($V61,[2,105]),o([5,7,8,9,10,15,17,18,22,23,24,25,26,44,46,51,52,53,55,59,60,61,66,68,71,87,94,95,96,98,99,100,102,103,104,105,106,108,109,110,111,112,113,114,115,116,120,121],[2,106],{97:[1,316]}),o($V61,[2,108]),{16:[1,317],18:$VM,23:$VN,27:$VO,28:$VP,29:$VQ,30:$VR,31:$VS,32:$VT,33:$VU,34:$VV,35:$VW,36:$VX,37:$VY,38:$VZ,39:$V_,40:$V$,41:$V01,42:$V11,43:$V21,47:$V31,53:$V41},{87:[1,318]},o($V61,[2,111]),{6:42,7:$V71,8:$V2,9:$V3,10:$V4,11:319,14:55,15:$V5,17:$V6,18:$V7,19:36,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$V81,51:$Ve,52:$Vf,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn},o($V_1,$V02),o($V61,[2,121]),o($V61,[2,122]),o($Vb1,[2,40]),{16:[1,320]},{46:[2,82]},{45:$VU1,46:$VV1},{48:[1,321]},{46:[2,87]},o($V$1,[2,89]),o($V$1,$V12,{18:$VM,23:$VN,27:$VO,28:$VP,29:$VQ,30:$VR,31:$VS,32:$VT,33:$VU,34:$VV,35:$VW,36:$VX,37:$VY,38:$VZ,39:$V_,40:$V$,41:$V01,42:$V11,43:$V21,47:$V31,53:$V41,85:[1,322]}),{6:42,7:$V71,8:$V2,9:$V3,10:$V4,11:158,14:55,15:$V5,16:$Vv1,17:$V6,18:$V7,19:36,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$V81,51:$Ve,52:$Vf,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn,75:323,117:157},{46:[1,324]},o($VX1,[2,143]),{87:[1,325]},{87:[2,139]},o($VI1,[2,148]),o($VZ1,[2,153]),{87:[1,326]},o([5,7,8,9,10,15,17,18,22,23,24,25,26,44,46,51,52,53,55,59,60,61,66,68,71,87,94,95,96,97,98,99,100,102,103,104,105,106,108,109,110,111,112,113,114,115,120,121],[2,127],{107:327,116:$VI}),{6:42,7:$V1,8:$V2,9:$V3,10:$V4,11:5,14:55,15:$V5,17:$V6,18:$V7,19:36,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$Vd,51:$Ve,52:$Vf,53:$Vg,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn,86:328,87:$Vo,88:6,89:7,90:8,91:9,92:10,93:11,94:$Vp,95:$Vq,96:$Vr,98:$Vs,99:$Vt,100:$Vu,102:$Vv,103:$Vw,104:$Vx,105:$Vy,106:$Vz,107:23,108:$VA,109:$VB,110:$VC,111:$VD,112:$VE,113:$VF,114:$VG,115:$VH,116:$VI,118:46,120:$VJ,121:$VK},{87:[1,329]},{6:42,7:$V71,8:$V2,9:$V3,10:$V4,11:192,14:55,15:$V5,16:$Vy1,17:$V6,18:$V7,19:36,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$V81,51:$Ve,52:$Vf,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn,101:330},{18:$VM,23:$VN,27:$VO,28:$VP,29:$VQ,30:$VR,31:$VS,32:$VT,33:$VU,34:$VV,35:$VW,36:$VX,37:$VY,38:$VZ,39:$V_,40:$V$,41:$V01,42:$V11,43:$V21,47:$V31,53:$V41,87:[1,331]},o($Vu1,[2,91]),{6:42,7:$V71,8:$V2,9:$V3,10:$V4,11:332,14:55,15:$V5,17:$V6,18:$V7,19:36,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$V81,51:$Ve,52:$Vf,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn},{6:42,7:$V71,8:$V2,9:$V3,10:$V4,11:333,14:55,15:$V5,17:$V6,18:$V7,19:36,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$V81,51:$Ve,52:$Vf,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn},{16:[1,334]},o($V61,[2,149]),o($VI1,[2,141]),o($V61,[2,154]),o($V61,[2,128]),o($V61,[2,107]),o($V61,[2,109]),{16:[1,335]},o($V61,[2,120]),o($V$1,$V12,{18:$VM,23:$VN,27:$VO,28:$VP,29:$VQ,30:$VR,31:$VS,32:$VT,33:$VU,34:$VV,35:$VW,36:$VX,37:$VY,38:$VZ,39:$V_,40:$V$,41:$V01,42:$V11,43:$V21,47:$V31,53:$V41}),o($V$1,[2,88],{18:$VM,23:$VN,27:$VO,28:$VP,29:$VQ,30:$VR,31:$VS,32:$VT,33:$VU,34:$VV,35:$VW,36:$VX,37:$VY,38:$VZ,39:$V_,40:$V$,41:$V01,42:$V11,43:$V21,47:$V31,53:$V41}),o($Vu1,[2,94]),{6:42,7:$V1,8:$V2,9:$V3,10:$V4,11:5,14:55,15:$V5,17:$V6,18:$V7,19:36,21:33,22:$V8,23:$V9,24:$Va,25:$Vb,26:$Vc,44:$Vd,51:$Ve,52:$Vf,53:$Vg,55:$Vh,59:$Vi,60:$Vj,61:$Vk,62:53,63:54,64:56,65:57,66:$Vl,68:$Vm,71:$Vn,86:336,87:$Vo,88:6,89:7,90:8,91:9,92:10,93:11,94:$Vp,95:$Vq,96:$Vr,98:$Vs,99:$Vt,100:$Vu,102:$Vv,103:$Vw,104:$Vx,105:$Vy,106:$Vz,107:23,108:$VA,109:$VB,110:$VC,111:$VD,112:$VE,113:$VF,114:$VG,115:$VH,116:$VI,118:46,120:$VJ,121:$VK},o($V61,[2,110])],defaultActions:{68:[2,1],128:[2,74],160:[2,63],163:[2,68],224:[2,79],225:[2,84],232:[2,52],237:[2,151],247:[2,66],249:[2,71],269:[2,77],301:[2,82],304:[2,87],311:[2,139]},parseError:function(a,b){function c(a,b){this.message=a,this.hash=b}if(!b.recoverable)throw c.prototype=Error,new c(a,b);this.trace(a)},parse:function(a){var b=this,c=[0],d=[null],e=[],f=this.table,g="",h=0,i=0,j=0,k=2,l=1,m=e.slice.call(arguments,1),n=Object.create(this.lexer),o={yy:{}};for(var p in this.yy)Object.prototype.hasOwnProperty.call(this.yy,p)&&(o.yy[p]=this.yy[p]);n.setInput(a,o.yy),o.yy.lexer=n,o.yy.parser=this,"undefined"==typeof n.yylloc&&(n.yylloc={});var q=n.yylloc;e.push(q);var r=n.options&&n.options.ranges;"function"==typeof o.yy.parseError?this.parseError=o.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var s,t,u,v,w,x,y,z,A,B=function(){var a;return a=n.lex()||l,"number"!=typeof a&&(a=b.symbols_[a]||a),a},C={};;){if(u=c[c.length-1],this.defaultActions[u]?v=this.defaultActions[u]:(null!==s&&"undefined"!=typeof s||(s=B()),v=f[u]&&f[u][s]),"undefined"==typeof v||!v.length||!v[0]){var D="";A=[];for(x in f[u])this.terminals_[x]&&x>k&&A.push("'"+this.terminals_[x]+"'");D=n.showPosition?"Parse error on line "+(h+1)+":\n"+n.showPosition()+"\nExpecting "+A.join(", ")+", got '"+(this.terminals_[s]||s)+"'":"Parse error on line "+(h+1)+": Unexpected "+(s==l?"end of input":"'"+(this.terminals_[s]||s)+"'"),this.parseError(D,{text:n.match,token:this.terminals_[s]||s,line:n.yylineno,loc:q,expected:A})}if(v[0]instanceof Array&&v.length>1)throw new Error("Parse Error: multiple actions possible at state: "+u+", token: "+s);switch(v[0]){case 1:c.push(s),d.push(n.yytext),e.push(n.yylloc),c.push(v[1]),s=null,t?(s=t,t=null):(i=n.yyleng,g=n.yytext,h=n.yylineno,q=n.yylloc,j>0&&j--);break;case 2:if(y=this.productions_[v[1]][1],C.$=d[d.length-y],C._$={first_line:e[e.length-(y||1)].first_line,last_line:e[e.length-1].last_line,first_column:e[e.length-(y||1)].first_column,last_column:e[e.length-1].last_column},r&&(C._$.range=[e[e.length-(y||1)].range[0],e[e.length-1].range[1]]),w=this.performAction.apply(C,[g,i,h,o.yy,v[1],d,e].concat(m)),"undefined"!=typeof w)return w;y&&(c=c.slice(0,-1*y*2),d=d.slice(0,-1*y),e=e.slice(0,-1*y)),c.push(this.productions_[v[1]][0]),d.push(C.$),e.push(C._$),z=f[c[c.length-2]][c[c.length-1]],c.push(z);break;case 3:return!0}}return!0}},lexer=function(){var a={EOF:1,parseError:function(a,b){if(!this.yy.parser)throw new Error(a);this.yy.parser.parseError(a,b)},setInput:function(a,b){return this.yy=b||this.yy||{},this._input=a,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var a=this._input[0];this.yytext+=a,this.yyleng++,this.offset++,this.match+=a,this.matched+=a;var b=a.match(/(?:\r\n?|\n).*/g);return b?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),a},unput:function(a){var b=a.length,c=a.split(/(?:\r\n?|\n)/g);this._input=a+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-b),this.offset-=b;var d=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),c.length-1&&(this.yylineno-=c.length-1);var e=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:c?(c.length===d.length?this.yylloc.first_column:0)+d[d.length-c.length].length-c[0].length:this.yylloc.first_column-b},this.options.ranges&&(this.yylloc.range=[e[0],e[0]+this.yyleng-b]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(a){this.unput(this.match.slice(a))},pastInput:function(){var a=this.matched.substr(0,this.matched.length-this.match.length);return(a.length>20?"...":"")+a.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var a=this.match;return a.length<20&&(a+=this._input.substr(0,20-a.length)),(a.substr(0,20)+(a.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var a=this.pastInput(),b=new Array(a.length+1).join("-");return a+this.upcomingInput()+"\n"+b+"^"},test_match:function(a,b){var c,d,e;if(this.options.backtrack_lexer&&(e={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(e.yylloc.range=this.yylloc.range.slice(0))),d=a[0].match(/(?:\r\n?|\n).*/g),d&&(this.yylineno+=d.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:d?d[d.length-1].length-d[d.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+a[0].length},this.yytext+=a[0],this.match+=a[0],this.matches=a,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(a[0].length),this.matched+=a[0],c=this.performAction.call(this,this.yy,this,b,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),c)return c;if(this._backtrack){for(var f in e)this[f]=e[f];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var a,b,c,d;this._more||(this.yytext="",this.match="");for(var e=this._currentRules(),f=0;f<e.length;f++)if(c=this._input.match(this.rules[e[f]]),c&&(!b||c[0].length>b[0].length)){if(b=c,d=f,this.options.backtrack_lexer){if(a=this.test_match(c,e[f]),a!==!1)return a;if(this._backtrack){b=!1;continue}return!1}if(!this.options.flex)break}return b?(a=this.test_match(b,e[d]),a!==!1&&a):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var a=this.next();return a?a:this.lex()},begin:function(a){this.conditionStack.push(a)},popState:function(){var a=this.conditionStack.length-1;return a>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(a){return a=this.conditionStack.length-1-Math.abs(a||0),a>=0?this.conditionStack[a]:"INITIAL"},pushState:function(a){this.begin(a)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(a,b,c,d){switch(c){case 0:a.commentNesting++;break;case 1:a.commentNesting--,0===a.commentNesting&&this.popState();break;case 2:break;case 3:a.commentNesting++,this.begin("BLOCKCOMMENT");break;case 4:this.begin("LINECOMMENT");break;case 5:this.popState();break;case 6:break;case 7:return this.popState(),5;case 8:return this.begin("JS"),"OPENJS";case 9:return this.popState(),57;case 10:return 58;case 11:return this.begin("D"),68;case 12:return 67;case 13:return this.popState(),68;case 14:return 67;case 15:return this.begin("MULTILINE"),71;case 16:return 67;case 17:return this.popState(),73;case 18:return 67;case 19:return this.begin("QUOTE"),"'";case 20:return 67;case 21:return this.popState(),"'";case 22:return 67;case 23:break;case 24:return 61;case 25:return 59;case 26:return 59;case 27:return 59;case 28:return 60;case 29:return 60;case 30:return a.enterDefinition(),a.evalExps=[],133;case 31:return a.enterEval(),22;case 32:return 94;case 33:return 116;case 34:return 109;case 35:return 108;case 36:return 111;case 37:return 110;case 38:return 112;case 39:return 113;case 40:return 95;case 41:return 96;case 42:return 97;case 43:return 100;case 44:return 98;case 45:return 99;case 46:return 102;case 47:return 114;case 48:return 115;case 49:return 103;case 50:return 104;case 51:return 105;case 52:return 106;case 53:return a.paras.unshift({}),a.locals.unshift({}),a.funcBodyDependencies.unshift({}),120;case 54:return a.paras.unshift({}),a.locals.unshift({}),a.funcBodyDependencies.unshift({}),121;case 55:return 125;case 56:return 125;case 57:return 130;case 58:return 41;case 59:return 43;case 60:return 25;case 61:return 7;case 62:return 53;case 63:return 47;case 64:return 35;case 65:return 34;case 66:return 33;case 67:return 32;case 68:return 36;case 69:return 37;case 70:return 38;case 71:return 39;case 72:return 42;case 73:return 40;case 74:return 24;case 75:return 48;case 76:return 49;case 77:return 50;case 78:return 51;case 79:return 52;case 80:return"^";case 81:return 26;case 82:return 18;case 83:return 29;case 84:return 30;case 85:return 23;case 86:return 28;case 87:return 87;case 88:return 53;case 89:return 54;case 90:return 45;case 91:return 132;case 92:return 10;case 93:return 12;case 94:return 44;case 95:return 46;case 96:return 15;case 97:return 16;case 98:return 85;case 99:return 13;case 100:return 17;case 101:return 9;case 102:return 8;case 103:return 27;case 104:return 5;case 105:return"INVALID"}},rules:[/^(?:\/\*)/,/^(?:\*\/)/,/^(?:.)/,/^(?:\/\*)/,/^(?:##)/,/^(?:[\n\r])/,/^(?:.)/,/^(?:$)/,/^(?:\$\{\{)/,/^(?:\}\}\$)/,/^(?:(.|\n|\r))/,/^(?:")/,/^(?:\\.)/,/^(?:")/,/^(?:(.|\n|\r))/,/^(?:<%[ \t]*)/,/^(?:%\\>)/,/^(?:([ ]|\t)*%>)/,/^(?:(.|\n|\r))/,/^(?:')/,/^(?:\\.)/,/^(?:')/,/^(?:(.|\n|\r))/,/^(?:\s+)/,/^(?:@)/,/^(?:(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))([eE](\+|-)?[0-9]+)?\b)/,/^(?:0x[0-9a-fA-F]+\b)/,/^(?:Infinity\b)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:is\b)/,/^(?:eval\b)/,/^(?:option\b)/,/^(?:include\b)/,/^(?:await\b)/,/^(?:require\b)/,/^(?:delete\b)/,/^(?:insert\b)/,/^(?:append\b)/,/^(?:shift\b)/,/^(?:after\b)/,/^(?:if\b)/,/^(?:else\b)/,/^(?:for\b)/,/^(?:while\b)/,/^(?:do\b)/,/^(?:switch\b)/,/^(?:case\b)/,/^(?:default\b)/,/^(?:break\b)/,/^(?:continue\b)/,/^(?:return\b)/,/^(?:together\b)/,/^(?:func\b)/,/^(?:proc\b)/,/^(?:auto\b)/,/^(?:local\b)/,/^(?:para\b)/,/^(?:and\b)/,/^(?:or\b)/,/^(?:not\b)/,/^(?:[a-zA-Z_][a-zA-Z_0-9]*)/,/^(?:\?)/,/^(?:\/\/)/,/^(?:<=)/,/^(?:>=)/,/^(?:<)/,/^(?:>)/,/^(?:==)/,/^(?:!=)/,/^(?:=~)/,/^(?:!~)/,/^(?:\|\|)/,/^(?:&&)/,/^(?:!)/,/^(?:=)/,/^(?:\+=)/,/^(?:-=)/,/^(?:\+\+)/,/^(?:--)/,/^(?:\^)/,/^(?:&)/,/^(?:\*)/,/^(?:\/)/,/^(?:%)/,/^(?:-)/,/^(?:\+)/,/^(?:;)/,/^(?:\?)/,/^(?::)/,/^(?:,)/,/^(?:~>)/,/^(?:\[)/,/^(?:\])/,/^(?:\{)/,/^(?:\})/,/^(?:\()/,/^(?:\))/,/^(?:\.\.)/,/^(?:\.)/,/^(?:`)/,/^(?:\$[0-9]+)/,/^(?:\$)/,/^(?:#)/,/^(?:$)/,/^(?:.)/],conditions:{BLOCKCOMMENT:{rules:[0,1,2,3,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105],inclusive:!0},LINECOMMENT:{rules:[5,6,7],inclusive:!1},MULTILINE:{rules:[16,17,18],inclusive:!1},QUOTE:{rules:[20,21,22],inclusive:!1},D:{rules:[12,13,14],inclusive:!1},JS:{rules:[3,9,10,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105],inclusive:!0},INITIAL:{rules:[3,4,8,11,15,19,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105],inclusive:!0}}};return a}();return parser.lexer=lexer,Parser.prototype=parser,parser.Parser=Parser,new Parser}();"undefined"!=typeof require&&"undefined"!=typeof exports&&(exports.parser=parser,exports.Parser=parser.Parser,exports.parse=function(){return parser.parse.apply(parser,arguments)},exports.main=function(a){a[1]||(console.log("Usage: "+a[0]+" FILE"),process.exit(1));var b=require("fs").readFileSync(require("path").normalize(a[1]),"utf8");return exports.parser.parse(b)},"undefined"!=typeof module&&require.main===module&&exports.main(process.argv.slice(1))),mobilecheck=function(){if(void 0!==Eden.mobile)return Eden.mobile;var a=!1;return function(b){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(b)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(b.substr(0,4)))&&(a=!0)}(navigator.userAgent||navigator.vendor||window.opera),Eden.mobile=a,a},function(global){function ViewCategory(a,b){this.getLabel=function(){return a},this.getMenuPriority=function(){return b}}function EdenUI(a){this.eden=a,this.views={},this.viewInstances={},this.activeDialogs={},this.plugins={};var b=this;this.loaded=!1,this.branding={},$.ajax({url:"branding.json",dataType:"json",success:function(a){b.branding=a}}),this.$uimsg=$("<div class='message-box'></div>"),this.$uimsg.appendTo("body"),this.$uimsg.hide(),this.messagetimeout=void 0,this.messagedisplaytime=5e3,this.eden.listenTo("executeFileLoad",this,function(a){edenUI.updateStatus("Loading "+a)}),this.eden.listenTo("executeError",this,function(a,b){var c,d=Eden.htmlEscape(a.message);'<div class="error-item">## ERROR number '+b.errorNumber+":<br>"+(b.path?"## "+b.path+"<br>":"")+d+"</div>\n\n";c="string"==typeof a?a:a.message,edenUI.showMessage("error","Error: "+c)}),this.listeners={},this.windowHighlighter=new WindowHighlighter(this),this.currentView=void 0,this.errorWindow=null,this.viewCategories={},this.numberOfViewCategories=0,this.addViewCategory("comprehension","Comprehension"),this.addViewCategory("interpretation","Making Definitions"),this.addViewCategory("history","History &amp; State"),this.addViewCategory("visualization","Visualization"),this.addViewCategory("extension","Extensions"),this.addViewCategory("environment","Management"),this.views.ErrorLog={dialog:function(){this.errorWindow||(this.errorWindow=$('<pre id="errors-dialog"></pre>')),this.errorWindow.addClass("ui-state-error").dialog({width:500,height:250}).dialog("moveToTop"),b.brieflyHighlightView(this.name)},title:"Error Log",name:"errors",category:this.viewCategories.interpretation}}function Eden(root){this.root=root,root.base=this,this.errorNumber=0,this.polyglot=new Polyglot;var me=this;this.polyglot.setDefault("eden"),this.polyglot.register("eden",{execute:function(a,b,c,d,e){me.executeEden(a,b,c,d,e)}}),this.polyglot.register("js",{execute:function(code,origin,prefix,agent,success){var result=eval(code);success&&success(result)}}),this.listeners={},this.topLevelIncludes=[],this.included={},this.reportErrors=!0;var inInitialState=!0,initialDefinitions={}}"undefined"!=typeof require&&"undefined"!=typeof exports&&(Polyglot=require("./polyglot").Polyglot,parser=require("./translator").parser,rt=require("./runtime").rt),EdenUI.prototype.brieflyHighlightView=function(a){var b=$("#"+viewName+"-dialog").dialog.parent();b.addClass("window-activated"),setTimeout(function(){b.removeClass("window-activated")},600)},EdenUI.prototype.cycleNextView=function(){this.stopHighlightingView(this.currentView,!0,!1);var a=Object.keys(this.activeDialogs);if(void 0===this.currentView)this.currentView=a[0];else for(i=0;i<a.length;i++)if(this.currentView==a[i]){this.currentView=a[(i+1)%a.length];break}this.highlightView(this.currentView,!0)},EdenUI.prototype.stopViewCycling=function(){this.stopHighlightingView(this.currentView,!0,!0)},EdenUI.plugins={},EdenUI.prototype.loadPlugin=function(a,b,c){2===arguments.length&&(c=b,b={name:"/loadPlugin"});var d=this,e=function(){d.emit("loadPlugin",[a]),c&&c.call(b)};void 0===this.plugins[a]?(this.plugins[a]=!0,this.plugins[a]=new EdenUI.plugins[a](this,e)):e()},EdenUI.prototype.addViewCategory=function(a,b){this.viewCategories[a]=new ViewCategory(b,this.numberOfViewCategories),this.numberOfViewCategories++},EdenUI.prototype.showErrorWindow=function(){return this.createView("errors","ErrorLog",window),$("#errors-dialog")},EdenUI.prototype.updateStatus=function(a){this.loaded?this.showMessage("info",a):(console.log(a),$(".loadmessage").html(a))},EdenUI.prototype.hideMessage=function(){edenUI.$uimsg.hide("slow")},EdenUI.prototype.showMessage=function(a,b){"info"==a?this.$uimsg.html("<div class='message-infotext'>"+b+"</div>"):"error"==a&&this.$uimsg.html("<div class='message-errortext'>"+b+"</div>"),this.$uimsg.show("fast"),clearTimeout(this.messagetimeout),this.messagetimeout=setTimeout(this.hideMessage,this.messagedisplaytime)},EdenUI.prototype.finishedLoading=function(){this.loaded=!0},EdenUI.prototype.listenTo=listenTo,EdenUI.prototype.emit=emit,EdenUI.showTooltip=function(a,b){var c=document.getElementById("tooltip"),d=a.clientX+2,e=a.clientY+20,f=window.pageXOffset+window.innerWidth-d-15;f<200&&(d-=200-f,f=200),c.style.left=d+"px",c.style.maxWidth=f+"px",c.style.top=e+"px",c.innerHTML=b,c.style.display="block"},EdenUI.closeTooltip=function(){document.getElementById("tooltip").style.display="none"},EdenUI.prototype.options={},EdenUI.prototype.getOptionValue=function(a){if(a in this.options)return this.options[a];try{if(window.localStorage)return window.localStorage.getItem(a);
}catch(b){return null}},EdenUI.prototype.setOptionValue=function(a,b){this.options[a]=String(b),this.emit("optionChange",[a,String(b)]);try{if(window.localStorage)return window.localStorage.setItem(a,b),!0}catch(c){return!1}},EdenUI.prototype.setDefaultOptionValue=function(a,b){null===this.getOptionValue(a)&&(this.options[a]=String(b),this.emit("optionChange",[a,String(b)]))},EdenUI.prototype.unsetOptionValue=function(a){delete this.options[a],this.emit("optionChange",[a,null]);try{window.localStorage&&window.localStorage.removeItem(a)}catch(b){}},EdenUI.prototype.regExpFromStr=function(a,b,c,d){var e,f,g,h=!0,i=3;"object"==typeof a&&(g=a,a=g[0].value),void 0===b&&(b="");var j;if(void 0===d)j=!/[\\+^$|({[]|(\.\*[^\s*?])/.test(a)&&"false"!==this.getOptionValue("optSimpleWildcards");else if("simple"==d)j=!0;else{if("regexp"!=d)throw new Error("EdenUI.regExpFromStr: Unsupported search language "+d);j=!1}if(/[A-Z]/.test(a)||(b+="i"),j){a=a.replace(/([\\+^$.|(){[])/g,"\\$1").replace(/([*?])/g,".$1");for(var k=a.split(new RegExp("\\s+(?:"+Language.ui.search.disjunction+"|or)\\s+","i")),l=0;l<k.length;l++){var m=k[l];c||/[?*]/.test(m)?k[l]="^("+m+")$":m.length<i&&(k[l]="^("+m+")")}e=k.join("|"),f=new RegExp(e,b)}else try{e=a,c&&(e="^("+e+")$"),f=new RegExp(e,b)}catch(n){h=!1;var o=a.match(/^([^*+?\\(){[]([^\\()[]*(\\.)?)*)?/)[0];c&&(o="^("+o+")"),f=new RegExp(o,b)}return g&&(h?g.removeClass("invalid_form"):g.addClass("invalid_form")),f},Eden.prototype.isValidIdentifier=function(a){return Boolean(a&&/^[_a-zA-Z]\w*$/.test(a))},Eden.prototype.captureInitialState=function(){this.initialDefinitions={};for(var a=0;a<Eden.initiallyDefined.length;a++){var b=Eden.initiallyDefined[a];if(b in this.root.symbols){var c=this.root.symbols[b];void 0!==c.eden_definition&&void 0!==c.definition?this.initialDefinitions[b]=c.eden_definition+";":this.initialDefinitions[b]=b+" = "+Eden.edenCodeForValue(c.context.scope.lookup(c.name).value)+";"}}this.included={},this.inInitialState=!0},Eden.load=function(a,b,c,d){console.log("Loading: "+a+"@"+b),Eden.DB.load(a,b,void 0,function(e){var f=$(".jseden-title").get(0);if(f&&(f.textContent=e.title),EdenUI.MenuBar.saveTitle(e.title),eden.root.lookup("_jseden_loaded").assign(!0,eden.root.scope),!d){var g=URLUtil.getParameterByName("master"),h=URLUtil.getParameterByName("id"),i="?load="+a+"&tag="+b;""!=h&&(i+="&id="+h),""!=g&&(i+="&master="+g),window.history.pushState({project:a,tag:b},"",i)}c&&c()})},Eden.loadFromString=function(a,b){var c=JSON.parse(a);eden.execute2(c.script);var d=$(".jseden-title").get(0);d&&(d.textContent=c.title),EdenUI.MenuBar.saveTitle(c.title),window.history.pushState(null,"",""),eden.root.lookup("_jseden_loaded").assign(!0,eden.root.scope),b&&b(c)},Eden.prototype.initialDefinition=function(a){return this.initialDefinitions[a]},Eden.prototype.isInInitialState=function(){return this.inInitialState},Eden.reset=function(){edenUI.destroyAllViews(),eden.reset(),Eden.Agent.removeAll()},Eden.prototype.reset=function(){this.root.lookup("forgetAll").definition(root,root.scope)("",!0,!1),this.root.collectGarbage(),this.errorNumber=0,this.inInitialState=!0,this.topLevelIncludes=[],this.included={},this.reportErrors=!0},Eden.prototype.listenTo=listenTo,Eden.prototype.emit=emit,Eden.prototype.error=function(a,b){"error"!=b&&(this.reportErrors=!0),this.reportErrors&&(b?this.emit("executeError",[a,{path:b,errorNumber:this.errorNumber}]):this.emit("executeError",[a,{errorNumber:this.errorNumber}])),++this.errorNumber},Eden.prototype.executeEden=function(code,origin,prefix,agent,success){console.trace("DEPRECATED USE OF OLD PARSER");var result,me=this;this.emit("executeBegin",[origin,code]);var js=this.translateToJavaScript(code);this.inInitialState=!1,eval(js).call(agent,this.root,this,this.root.scope,prefix,function(){success&&success(),me.emit("executeEnd",[origin])}),success&&success()},Eden.prototype.execute=function(a,b,c,d,e){1==arguments.length&&(e=noop,b="unknown",c="",d={name:"/execute"}),2==arguments.length&&(e=b,b="unknown",c="",d={name:"/execute"}),this.polyglot.execute(a,b,c,d,e)},Eden.prototype.include=function(a,b,c,d){console.trace("DEPRECATED USE OF INCLUDE: "+a);var e,f=this;e=a instanceof Array?a:[a],2===arguments.length?(d=b,c={name:"/include"},b=""):3===arguments.length&&(d=c,c=b,b="");var g=c;c={name:"/include"};var h,i=function(a){var b=f.topLevelIncludes.indexOf(a);b!=-1&&f.topLevelIncludes.splice(b,1),f.topLevelIncludes.push(a)};e.forEach(function(a){var d;d="."===a.charAt(0)?concatAndResolveUrl(b,a):a;var e=d.match(/(.*)\/([^\/]*?)$/),j=e?e[1]:"",k=h;h=$.ajax({url:d,dataType:"text"}).then(function(a){var b=$.Deferred();return k?k.then(function(){return eden.execute(a,d,j,c,b.resolve),void 0!==g&&g.name==Symbol.getInputAgentName()&&i(d),f.included[d]=!0,b.promise}):(eden.execute(a,d,j,c,b.resolve),void 0!==g&&g.name==Symbol.getInputAgentName()&&i(d),f.included[d]=!0,b.promise)})}),h.then(function(){if(void 0!==d)try{d.call(c)}catch(a){f.error(a)}})},Eden.prototype.execute2=function(a,b,c){agobj={name:"execute",getSource:function(){return a},getLine:function(){return 0}},b&&(agobj.name=b);var d=new Eden.AST(a);0==d.script.errors.length?d.execute(agobj,c):console.error(d.script.errors[0].prettyPrint())},Eden.prototype.agentFromFile=function(a,b,c){var d;d=void 0===Eden.Agent.agents[a]?new Eden.Agent((void 0),a):Eden.Agent.agents[a],d.loadFromFile(b,c)},Eden.prototype.include2=function(a,b,c,d){var e,f=this;e=a instanceof Array?a:[a],2===arguments.length?(d=b,c={name:"/include"},b=""):3===arguments.length&&(d=c,c=b,b="");var g=c;c={name:"/include"};var h,i=function(a){var b=f.topLevelIncludes.indexOf(a);b!=-1&&f.topLevelIncludes.splice(b,1),f.topLevelIncludes.push(a)};e.forEach(function(a){var d;d="."===a.charAt(0)?concatAndResolveUrl(b,a):a;var e=d.match(/(.*)\/([^\/]*?)$/),j=(e?e[1]:"",h);h=$.ajax({url:d,dataType:"text"}).then(function(a){var b=$.Deferred();return j?j.then(function(){return eden.execute2(a,c,b.resolve),void 0!==g&&g.name==Symbol.getInputAgentName()&&i(d),f.included[d]=!0,b.promise}):(eden.execute2(a,c,b.resolve),void 0!==g&&g.name==Symbol.getInputAgentName()&&i(d),f.included[d]=!0,b.promise)})}),h.then(function(){d&&d.call(c)})},Eden.prototype.getIncludedURLs=function(){return this.topLevelIncludes.slice()},Eden.prototype.getAllIncludedURLs=function(){return Object.keys(this.included)},Eden.edenCodeForValue=function(a,b){var c=typeof a,d="";if("undefined"==c)d="@";else if(null===a)d="${{ null }}$";else if("string"==c)d='"'+a.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"',d=d.replace(/\n/g,'"\n"');else if(Array.isArray(a))if(void 0===b&&(b=[]),b.indexOf(a)!=-1)d+="<<circular reference>>";else{b.push(a),d="[";for(var e=0;e<a.length-1;e++)d=d+Eden.edenCodeForValue(a[e],b)+", ";a.length>0&&(d+=Eden.edenCodeForValue(a[a.length-1],b)),d+="]",b.pop()}else if("object"==c){if("getEdenCode"in a?d=a.getEdenCode():"keys"in a&&Array.isArray(a.keys)&&a.keys.length>0&&"parent"in a&&a.parent instanceof Symbol?d="&"+a.parent.name.slice(1)+"["+a.keys[0]+"]":"object"==typeof window&&"object"==typeof document&&"function"==typeof Element&&(a==window?d="${{ window }}$":a==document?d="${{ document }}$":a==document.documentElement?d="${{ document.documentElement }}$":a==document.body?d="${{ document.body }}$":a instanceof Element&&a.id&&(d='${{ document.getElementById("'+a.id+'") }}$')),""==d)if(void 0===b&&(b=[]),b.indexOf(a)!=-1)d+="<<circular reference>>";else{b.push(a),d="{";for(var f in a)f in Object.prototype||(d=d+f+": "+Eden.edenCodeForValue(a[f],b)+", ");"{"!=d&&(d=d.slice(0,-2)),d+="}",b.pop()}}else d="function"==c?"${{\n\t"+a.toString().replace(/\n/g,"\n\t")+"\n}}$":String(a);return d},Eden.edenCodeForValues=function(){for(var a="",b=0;b<arguments.length-1;b++)a=a+Eden.edenCodeForValue(arguments[b])+", ";return a+=Eden.edenCodeForValue(arguments[arguments.length-1])},Eden.prettyPrintValue=function(a,b,c,d,e,f){void 0===e&&(e=!0);var g=typeof b,h="",i=!1;if("undefined"==g)h="@";else if(null===b)h="${{ null }}$";else if("string"==g)h='"'+b.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"',void 0!==c&&h.length>c+1&&(h=h.slice(0,c)+"...",i=!0);else if(Array.isArray(b))if(void 0===f&&(f=[]),f.indexOf(b)!=-1)h+="...";else{f.push(b),h="[";for(var j=0;j<b.length-1;j++){if(h=Eden.prettyPrintValue(h,b[j],c,d,e,f)+",",void 0!==c&&h.length>=c-1){"..."!=h.slice(-3)&&(h+="..."),i=!0;break}h+=" "}b.length>0&&!i&&(h=Eden.prettyPrintValue(h,b[b.length-1],c,d,e,f)),h+="]",f.pop()}else if("object"==g){if(b instanceof Symbol?h=b.getEdenCode():"keys"in b&&Array.isArray(b.keys)&&b.keys.length>0&&"parent"in b&&b.parent instanceof Symbol?h="&"+b.parent.name.slice(1)+"["+b.keys[0]+"]":"object"==typeof window&&"object"==typeof document&&"function"==typeof Element&&(b==window?h="${{ window }}$":b==document?h="${{ document }}$":b==document.documentElement?h="${{ document.documentElement }}$":b==document.body?h="${{ document.body }}$":b instanceof Element&&b.id&&(h='${{ document.getElementById("'+b.id+'") }}$')),""==h)if(b.toString!=Object.prototype.toString)h=b.toString(),void 0!==c&&h.length>c&&(h=h.slice(0,c)+"...",i=!0);else if(void 0===f&&(f=[]),f.indexOf(b)!=-1)h+="...";else{f.push(b),h="{";var k=!1;for(var l in b)if(!(l in Object.prototype)){if(k){h=h.slice(0,-1)+"...",i=!0;break}if(h=h+l+": ",h=Eden.prettyPrintValue(h,b[l],c,d,e,f),"..."==h.slice(-3)){i=!0;break}void 0!==c&&h.length>=c&&(k=!0),h+=", "}"{"==h||i||(h=h.slice(0,-2)),h+="}",f.pop()}}else"function"==g?d?(h="${{\n\t"+b.toString().replace(/\n/g,"\n\t")+"\n}}$",void 0!==c&&h.length>c&&(h=h.slice(0,c)+"...",i=!0)):h="func":h=String(b);if(a)return a+h;var m=Eden.htmlEscape(h,!e);return m=m.replace(/\.\.\./g,"&hellip;"),e||(m=m.replace(/\n/g,"\\n")),m},Eden.htmlEscape=function(a,b,c){return void 0===a?"":(a=String(a),a=a.replace(/&/g,"&amp;"),a=a.replace(/</g,"&lt;"),a=a.replace(/>/g,"&gt;"),a=a.replace(/"/g,"&quot;"),a=a.replace(/'/g,"&#39;"),c?a=b?a.replace(/\n/g," "):a.replace(/\n/g,"<br/>"):b||(a=a.replace(/\n/g,"<br/>\n")),a)},Eden.prototype.nextEvalID=0,Eden.prototype.parsingOptions={trackObservableRefsInFuncs:!1},Eden.prototype.translateToJavaScript=function(a){function b(a,b){this.cps=a,this.code=b}var c=this;parser.yy,a=a.replace(/\r\n/g,"\n"),parser.yy.commentNesting=0,parser.yy.async=function(a){var c=Array.prototype.slice.call(arguments,1);return new b(1,a+"("+c.concat("function () {"))},b.prototype.valueOf=function(){throw new Error("Tried to valueOf Code "+this.code)},parser.yy.sync=function(a){return new b(0,a)},parser.yy.code=function(a,c){return new b(a,c)},parser.yy.withIncludes=function(a,b){var c,d=""+b+"();";for(c=0;c<a.cps;++c)d+="});";return a.code+d},parser.yy.extractEdenDefinition=function(b,c,d,e){for(var f=a.split("\n").slice(b-1,d),g="",h=0;h<f.length;++h){var i,j=f[h];i=0===h?c:0;var k;k=h===f.length-1?e:j.length,g+=j.slice(i,k),h<f.length-1&&(g+="\n")}return g};var d=!1,e=!1,f={},g=0,h={};parser.yy.enterDefinition=function(){f={},h={},g=0,d=!0},parser.yy.leaveDefinition=function(){d=!1},parser.yy.enterEval=function(){e=!0},parser.yy.leaveEval=function(a){e=!1;var b=c.nextEvalID;return h[a]=b,c.nextEvalID++,b},parser.yy.printEvalIDs=function(a){var b=parser.yy.observable(a),c=b+".clearEvalIDs(); ",d=b+".evalIDs";for(exp in h)h.hasOwnProperty(exp)&&(c=c+d+'["'+exp+'"] = '+h[exp]+"; ");return c},parser.yy.inDefinition=function(){return d},parser.yy.inEval=function(){return e},parser.yy.addDependency=function(a){f[a]=1},parser.yy.getDependencies=function(){var a=[];for(var b in f)a.push(b);return a};var i={};return parser.yy.observable=function(a){return i[a]=1,"o_"+a},parser.yy.backticks=function(){var a=g;return g=a+1,a},parser.yy.printObservableDeclarations=function(){var a=[];for(var b in i)a.push("var o_"+b+" = context.lookup('"+b+"');");return a.join("\n")},parser.yy.locals=[],parser.yy.paras=[],parser.yy.funcBodyDependencies=[],parser.yy.addFuncBodyDependency=function(a){c.parsingOptions.trackObservableRefsInFuncs&&(this.funcBodyDependencies[0][a]=1)},parser.yy.getFuncBodyDependencies=function(){var a=[];for(var b in this.funcBodyDependencies[this.funcBodyDependencies.length-1])a.push(b);return a},parser.yy.setParsingOption=function(a,b){c.parsingOptions[a]=b},parser.yy.map=function(a,b){if(a.map)return a.map(function(a,c){return b(a,c)});for(var c=[],d=0;d<a.length;++d)c.push(b(a[d],d));return c},parser.parse(a)},Eden.prototype.getDefinition=function(a,b){return b.eden_definition?b.eden_definition+";":a+" = "+b.context.scope.lookup(b.name).value+";"},global.EdenUI=EdenUI,global.Eden=Eden,"undefined"!=typeof require&&"undefined"!=typeof exports&&(exports.Eden=Eden)}("undefined"!=typeof window?window:global),function(){function a(a,b){return root.lookup("_view_"+a+"_"+b)}function b(a){return $("#"+a+"-dialog")}$.extend($.ui.dialog.prototype.options.position,{collision:"none"}),EdenUI.prototype.menuBarHeight=60,EdenUI.prototype.dialogBorderWidth=3.133,EdenUI.prototype.titleBarHeight=34.659+EdenUI.prototype.dialogBorderWidth,EdenUI.prototype.scrollBarSize=14+EdenUI.prototype.dialogBorderWidth,EdenUI.prototype.scrollBarSize2=window.innerHeight-$(window).height(),EdenUI.prototype.dialogFrameWidth=EdenUI.prototype.scrollBarSize+2*EdenUI.prototype.dialogBorderWidth,EdenUI.prototype.dialogFrameHeight=EdenUI.prototype.titleBarHeight+EdenUI.prototype.dialogBorderWidth,EdenUI.prototype.bottomBarHeight=34.906,EdenUI.prototype.gridSizeX=Math.floor(30*window.innerWidth/1920),EdenUI.prototype.gridSizeY=Math.floor(30*window.innerHeight/1920),EdenUI.prototype.minimumWindowWidthShowing=72+EdenUI.prototype.dialogBorderWidth,EdenUI.prototype.createView=function(c,d,e){function f(a,b){var d=x.dialogExtend("state");"hidden"==b?"minimized"!=d&&k.minimizeView(c):"maximized"==b||x.dialog("isOpen")&&"minimized"!=d&&"collapsed"!=d||k.showView(c)}function g(a,b){var c=b;void 0!==t.titleBarInfo&&(c=c+" ("+t.titleBarInfo+")"),x.dialog("option","title",c),k.plugins.MenuBar&&k.plugins.MenuBar.updateViewsMenu()}function h(a,b){b?(x.siblings(".ui-dialog-titlebar").css("display","none"),x.dialog("option","resizable",!1)):(x.siblings(".ui-dialog-titlebar").css("display","block"),x.dialog("option","resizable",!0))}function i(a,b){var c=x.get(0).parentNode.style;b?(c.border="none",c.boxShadow="none"):(c.border="1px solid #777",c.boxShadow="0 0 15px #4a6887")}function j(){var a="proc _View_"+c+"_position : _view_"+c+"_x, _view_"+c+'_y {\n${{ edenUI.moveView("'+c+'"); }}$;\n};\nproc _View_'+c+"_size : _view_"+c+"_width,_view_"+c+'_height {\n${{ edenUI.resizeView("'+c+'"); }}$; \n};';return v&&(a+="_view_"+c+'_position = ["'+v.join('", "')+'"];\n'),a}if(!(d in this.views))return void this.eden.error(new Error("View type "+d+" is unavailable.  Check that the associated plug-in is loaded."));"name"in this.views[d]&&(c=this.views[d].name);var k=this,l={name:"*Default"},m=this.activeDialogs[c],n=a(c,"visibility"),o=n.value(),p=a(c,"title"),q=p.value();if(m==d)return"visible"!=o&&n.assign("visible",root.scope,l),this.brieflyHighlightView(c),this.viewInstances[c];this.eden.root.beginAutocalcOff(),void 0!==m&&(q==this.views[m].title&&(q=void 0),this.destroyView(c,!1));var r=this.menuBarHeight,s=this.views[d].title,t=this.views[d].dialog(c+"-dialog",s);void 0===t&&(t={}),this.viewInstances[c]=t;var u,v=t.position,w=edenUI.getOptionValue("optCollapseToTitleBar");u="true"==w?"collapse":"maximize";var x=b(c);x.dialog({closeOnEscape:!1,draggable:!0,position:v,beforeClose:function(){return t.closing?(t.closing=!1,!0):k.closeView(c)},focus:function(){}});var y=this.getDialogWindow(c);x.dialogExtend({dblclick:u,minimizable:!0,maximizable:!0,beforeMinimize:function(a){$(a.target).parent().removeClass("window-activated");var b=edenUI.getOptionValue("optHideOnMinimize");return"true"!=b||(k.hideView(c),!1)},minimize:function(){var a=b(c).data("dialog-extend-minimize-controls");a.css("position","relative"),a.css("top",""),a.css("left","")},maximize:function(a){var b=y[0],c=x[0];b.style.top=r+"px";var d=window.innerHeight-r-k.scrollBarSize2-2*k.dialogBorderWidth;"true"!=edenUI.getOptionValue("optHideOnMinimize")&&(d-=k.bottomBarHeight),b.style.height=d+"px",c.style.height=d-k.titleBarHeight+"px"},restore:function(a){x.dialog("moveToTop"),k.brieflyHighlightView(a.target.id.slice(0,-7)),x.dialog("widget").draggable("option","containment",[-Number.MAX_VALUE,r,Number.MAX_VALUE,Number.MAX_VALUE]),y.draggable("option",{grid:[k.gridSizeX,k.gridSizeY]}),y.resizable("option",{grid:[k.gridSizeX,k.gridSizeY]})}}),this.activeDialogs[c]=d,y.draggable("option",{grid:[this.gridSizeX,this.gridSizeY]}),y.resizable("option",{grid:[this.gridSizeX,this.gridSizeY]});var z=a(c,"type");z.value()!=d&&(z.removeJSObserver("changeType"),z.assign(d,root.scope,e),z.addJSObserver("changeType",function(a,b){void 0!==b&&root.lookup("_views_list").value().indexOf(c)!==-1&&k.createView(c,b)}));var A=root.lookup("_views_list"),B=A.value();Array.isArray(B)?B.indexOf(c)===-1&&(B=B.slice(),B.push(c),A.assign(B,root.scope,e)):A.assign([c],root.scope,e),widthSym=a(c,"width"),void 0===widthSym.value()&&widthSym.assign(x.dialog("option","width")-this.scrollBarSize,root.scope,l);var C=a(c,"height");void 0===C.value()&&C.assign(x.dialog("option","height")-this.titleBarHeight,root.scope,l);var D=x.closest(".ui-dialog").offset(),E=a(c,"x");void 0===E.value()&&E.assign(D.left,root.scope,l);var F=a(c,"y");void 0===F.value()&&F.assign(D.top-r,root.scope,l),"visible"!=o&&(void 0===o?n.assign("visible",root.scope,l):f(n,o)),n.addJSObserver("changeState",f);var G=t.titleBarInfo;delete t.titleBarInfo,Object.defineProperty(t,"titleBarInfo",{get:function(){return G},set:function(a){G=a;var b=p.value();void 0!==a&&(b=b+" ("+a+")"),x.dialog("option","title",b)},enumerable:!0}),p.addJSObserver("updateTitleBar",g),void 0===q?p.assign(s,root.scope,l):g(p,q);var H=a(c,"lock");H.addJSObserver("changeState",h);var I=H.value();void 0!==I&&h(H,I);var J=a(c,"noborder");J.addJSObserver("changeState",i);var K=J.value();return void 0!==K&&i(J,K),x.dialog("widget").draggable("option","containment",[-Number.MAX_VALUE,r,Number.MAX_VALUE,Number.MAX_VALUE]),x.resizeExtend=0,x.on("dialogresize",function(a,b){var c,d;void 0!==x.previousWidth&&(c=b.size.width-x.previousWidth,d=b.size.height-x.previousHeight,c>d?x.momentum=c:x.momentum=d),x.previousWidth=b.size.width,x.previousHeight=b.size.height;var e=b.position.top;e<r&&(b.size.height=b.size.height-(r-e),b.position.top=r);var f=0,g=0;if(b.position.left+b.size.width<document.body.scrollLeft+k.gridSizeX&&(b.size.width=b.size.width-k.gridSizeX,f=-k.gridSizeX),b.position.top+b.size.height<document.body.scrollTop+k.gridSizeY?(b.size.height=b.size.height-k.gridSizeY,g=-k.gridSizeY):b.position.top<document.body.scrollTop+k.gridSizeY&&(g=-k.gridSizeY),x.momentum>=35||2==x.resizeExtend){var h=!1;b.position.left+b.size.width>document.body.scrollLeft+window.innerWidth-k.gridSizeX&&(0==x.resizeExtend?h=!0:(b.size.width=b.size.width+k.gridSizeX,f=k.gridSizeX)),b.position.top+b.size.height>document.body.scrollTop+window.innerHeight-k.gridSizeY&&(0==x.resizeExtend?h=!0:(b.size.height=b.size.height+k.gridSizeY,g=k.gridSizeY)),h&&(x.resizeExtend=1,setTimeout(function(){1==x.resizeExtend&&(x.resizeExtend=2)},850))}0==f&&0==g||window.scrollBy(f,g)}),x.on("dialogresizestop",function(b,d){x.previousWidth=void 0,x.momentum=0,x.resizeExtend=0;var e=k.eden.root;e.beginAutocalcOff(),a(c,"width").assign(d.size.width-k.scrollBarSize,e.scope,Symbol.hciAgent),a(c,"height").assign(d.size.height-k.titleBarHeight+2*k.dialogBorderWidth,e.scope,Symbol.hciAgent);var f=a(c,"x");f.value()!=d.position.left&&f.assign(d.position.left,eden.root.scope,Symbol.hciAgent);var g=a(c,"y"),h=d.position.top-r;g.value()!=h&&g.assign(h,eden.root.scope,Symbol.hciAgent),e.endAutocalcOff()}),x.on("dialogdragstop",function(b,d){var e=k.eden.root;e.beginAutocalcOff(),a(c,"x").assign(d.position.left,eden.root.scope,Symbol.hciAgent),a(c,"y").assign(d.position.top-r,eden.root.scope,Symbol.hciAgent),e.endAutocalcOff()}),this.eden.execute(j(),"createView","",{name:"/createView"},noop),this.eden.root.endAutocalcOff(),this.emit("createView",[c,d]),t},EdenUI.prototype.closeView=function(a){var b=this;return this.viewInstances[a].confirmClose?(this.modalDialog("Window Close Action","<p>Removing this window from the work space will cause any unsaved changes associated with it to be lost.  You may need to reload the construal if you wish to see this window again.</p> \t\t\t\t<p>Are you sure you want to permanently delete this information?  Or would you prefer to hide the window instead?</p>",["Close Forever","Hide"],1,function(c){0==c?(b.destroyView(a,!0),edenUI.eden.root.collectGarbage()):1==c&&(b.plugins.MenuBar?b.hideView(a):b.minimizeView(a))}),!1):(this.destroyView(a,!0),edenUI.eden.root.collectGarbage(),!0)},EdenUI.prototype.destroyAllViews=function(){for(var a in this.viewInstances)this.destroyView(a,!0)},EdenUI.prototype.destroyView=function(a,c){if(a in this.viewInstances&&!this.viewInstances[a].closing){this.viewInstances[a].closing=!0,this.viewInstances[a].destroy&&this.viewInstances[a].destroy(),root.lookup("forgetAll").definition(root)("^_View_"+a+"_",!0,!1,!0),c&&root.lookup("forgetAll").definition(root)("^_view_"+a+"_",!0,!1,!0);var d=b(a);if(d.dialog("destroy"),d.remove(),d.html(""),delete this.activeDialogs[a],delete this.viewInstances[a],c){var e=root.lookup("_views_list"),f=e.value();if(Array.isArray(f)){var g=f.indexOf(a);if(g!==-1){var h;h=0==g?f.slice(1):f.slice(0,g).concat(f.slice(g+1)),e.assign(h,root.scope)}}}this.emit("destroyView",[a])}},EdenUI.prototype.getDialogContent=function(a){return b(a)},EdenUI.prototype.getDialogWindow=function(a){return b(a).parent()},EdenUI.prototype.showView=function(a){var c=b(a);c.dialog("open").dialog("moveToTop");var d=c.dialogExtend("state");return"normal"!=d&&"maximized"!=d&&c.dialogExtend("restore"),this.activeDialogs[a]},EdenUI.prototype.updateView=function(a,b){var c=this.viewInstances[a];c&&c.update&&c.update(b)},EdenUI.prototype.highlightView=function(a,b){if(b)this.windowHighlighter.highlight(a);else{var c=this.getDialogContent(a).data("dialog-extend-minimize-controls")||this.getDialogWindow(a);c.addClass("window-highlighted")}},EdenUI.prototype.stopHighlightingView=function(a,b,c){if(b)this.windowHighlighter.stopHighlight(a,c),c&&this.getDialogContent(a).dialog("moveToTop");else{var d=this.getDialogContent(a).data("dialog-extend-minimize-controls")||this.getDialogWindow(a);d.removeClass("window-highlighted")}},EdenUI.prototype.brieflyHighlightView=function(a){var b=this.getDialogWindow(a);b.addClass("window-activated"),setTimeout(function(){b.removeClass("window-activated")},600)},EdenUI.prototype.hideView=function(a){a in this.viewInstances&&(this.viewInstances[a].closing=!0,b(a).dialog("close"))},EdenUI.prototype.minimizeView=function(a){var c=edenUI.getOptionValue("optHideOnMinimize");if("true"==c)this.hideView(a);else{if(!(a in this.viewInstances))return;b(a).dialogExtend("minimize")}},EdenUI.prototype.minimizeObscuredViews=function(a){if("true"!=edenUI.getOptionValue("optHideOnMinimize")){var c=b(a),d=c.closest(".ui-dialog");if(!d.is(this.windowHighlighter.lastDialog)&&"normal"==c.dialogExtend("state"))for(var e=c.get(0),f=0,g=d.offset(),h=g.left,i=g.top,j=c.dialog("option","width")+2*EdenUI.prototype.dialogBorderWidth,k=c.dialog("option","height")+2*EdenUI.prototype.dialogBorderWidth,l=d.hasClass("ui-front"),m=$(".ui-dialog-content"),n=0;n<m.length;n++){var o=$(m[n]);if(m[n]!==e&&"normal"==o.dialogExtend("state")){var p=o.closest(".ui-dialog");if(!p.hasClass("ui-front")||l){var q=p.offset(),r=q.left,s=q.top,t=o.dialog("option","width")+2*EdenUI.prototype.dialogBorderWidth,u=o.dialog("option","height")+2*EdenUI.prototype.dialogBorderWidth;r>=h-f&&r+t<=h+j+f&&s>=i-f&&s+u<=i+k+f&&o.dialogExtend("minimize")}}}}},EdenUI.prototype.moveView=function(c){var d,e,f=b(c),g=a(c,"x"),h=a(c,"y"),i=g.value(),j=h.value(),k=this.minimumWindowWidthShowing-f.dialog("option","width");d=i<k?k:Math.round(i/this.gridSizeX)*this.gridSizeX,e=j<0?0:Math.round(j/this.gridSizeY)*this.gridSizeY,g.cached_value=d,h.cached_value=e,e+=this.menuBarHeight,f.parent().offset({left:d,top:e})},EdenUI.prototype.resizeView=function(c){var d=this.viewInstances[c];if(!d.resizing){var e=b(c),f=e.parent().position(),g=f.left,h=f.top,i=a(c,"width"),j=i.value(),k=a(c,"height"),l=k.value(),m=a(c,"lock"),n=m?0:this.titleBarHeight,o=g+j+this.scrollBarSize+this.dialogBorderWidth,p=h+l+this.titleBarHeight-1,q=window.innerWidth+document.body.scrollLeft,r=window.innerHeight+document.body.scrollTop-this.scrollBarSize2,s=r-this.bottomBarHeight,t=Symbol.hciAgent.name,u=Math.round((j+this.scrollBarSize+this.dialogBorderWidth)/this.gridSizeX)*this.gridSizeX-2*this.dialogBorderWidth;i.last_modified_by!=t&&(u<j+this.scrollBarSize&&(u+=this.gridSizeX),o<=q&&g+u+this.dialogBorderWidth>q&&(u=q-this.dialogBorderWidth-g));var v=Math.round((l+n)/this.gridSizeY)*this.gridSizeY;k.last_modified_by!=t?(v<l+n&&(v+=this.gridSizeY),p<=s&&h+v>s?v=s-h:p<=r&&h+v>r&&(v=r-h)):h+v>s&&h+v<r?v=s-h:h+v>r&&(v=r-h),e.dialog("option","width",u),e.dialog("option","height",v),e.parent().offset({top:h-document.body.scrollTop}),j=u-this.scrollBarSize,l=v-n,d.resizing=!0,this.eden.root.beginAutocalcOff(),void 0===i.definition&&i.assign(j,eden.root.scope,i.last_modified_by),void 0===k.definition&&k.assign(l,eden.root.scope,k.last_modified_by),this.eden.root.endAutocalcOff(),d.resizing=!1,"resize"in d&&d.resize(j,l)}},EdenUI.prototype.pinView=function(a){var b=this.getDialogWindow(a);b.addClass("ui-front"),this.viewInstances[a].pinned=!0},EdenUI.prototype.unpinView=function(a){var b=this.getDialogWindow(a);b.removeClass("ui-front"),this.viewInstances[a].pinned=!1,this.windowHighlighter.unpin(b)},EdenUI.prototype.newProject=function(){this.eden.reset(),this.destroyView("jspe",!0),"Canvas2D"in this.plugins&&this.eden.executeEden('createCanvas("picture");',"new project","",Symbol.hciAgent,noop),"ScriptInput"in this.plugins&&this.eden.executeEden('createView("input", "ScriptInput");',"new project","",Symbol.hciAgent,noop),this.views.ErrorLog.errorWindow&&this.views.ErrorLog.errorWindow.html(""),Eden.Agent.removeAll(),this.eden.captureInitialState()},EdenUI.prototype.modalDialog=function(a,b,c,d,e){var f=$('<div id="modal"></div>'),g=function(a){return function(b){f.dialog("destroy"),f.remove(),e(a)}},h=$("<div>"+b+"</div>");f.append(h);for(var i=[],j=0;j<c.length;j++){var k={text:c[j],click:g(j)};i.push(k)}var l=c.length,m={text:"Cancel",click:g(l)};i.push(m),f.dialog({buttons:i,modal:!0,resizable:!1,show:"fade",title:a,close:function(){e(l)},open:function(){$(this).parent().find("button")[d].focus()},width:375}),$(".ui-widget-overlay").css("z-index",10001),f.parent().css("z-index",10002)}}(),URLUtil={},URLUtil.getParameterByName=function(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var b="[\\?&]"+a+"=([^&#]*)",c=new RegExp(b),d=window.location.href,e=c.exec(d);return null===e?"":decodeURIComponent(e[1].replace(/\+/g," "))},URLUtil.getArrayParameterByName=function(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");for(var b="[\\?&]"+a+"=([^&#]*)",c=new RegExp(b,"g"),d=window.location.href,e=c.exec(d),f=[];null!==e;){var g=decodeURIComponent(e[1].replace(/\+/g," "));f.push(g),e=c.exec(d)}return f},URLUtil.isCrossDomain=function(a){var b=a.match(/^([a-zA-Z][a-zA-Z\d+.\-]*:)(\/\/)?([^\/@]*@)?([^\/:]+)(:\d+)?(\/|$)/);return null!==b&&(b[1]!=window.location.protocol||b[4]!=document.domain||b[5].slice(1)!=window.location.port)},URLUtil.downloadFile=function(a){var b=a.url,c=a.dataType,d=a.sync,e=a.success,f=a.error;if(void 0===c&&(c="text"),"function"!=typeof f)throw new Error("An error handling function must be specified.");if("function"!=typeof e)return void f(null,"error","A success callback function must be specified.");if(void 0===b)return void f(null,"error","A URL must be specified.");b=String(b);var g=rt.config.proxyBaseURL,h=this.isCrossDomain(b);if(d===!0&&h&&this.isCrossDomain(g))return void f(null,"error","Synchronous downloading not possible");if("boolean"!=typeof d)return void f(null,"error","The sync option must be a boolean, not a "+typeof d);if(h){var i="crossDomainCallback"+Math.floor(9007199254740991*Math.random());return window[i]=function(a){try{if(a.success){var b,d=a.success,g=!1;switch(c){case"text":b=d;break;case"json":try{b=JSON.parse(d)}catch(h){f(null,"parserror",h),g=!0}break;default:f(null,"error","No cross-domain interpretation available for data type "+c),g=!0}g||e(b,"success",null)}else f(null,"error",a.error)}finally{delete window[i]}},$.ajax({url:g+"?url="+encodeURI(b)+"&callback="+i,dataType:"script",async:!d,error:f})}return a.async=!d,$.ajax(a)};var root,eden,edenUI,doneLoading;"isInteger"in Number||(Number.isInteger=function(a){return parseInt(a)===a});var doingNavigateAway=!1,confirmUnload=function(a){if(!doingNavigateAway){var b="Leaving this page will discard the current script. Your work will not be saved.";return a.returnValue=b,b}};EdenStream.prototype.pushPosition=function(){this.position_stack.push(this.position)},EdenStream.prototype.popPosition=function(){this.position=this.position_stack.pop()},EdenStream.prototype.discardPosition=function(){this.position_stack.pop()},EdenStream.prototype.get=function(){return this.position<this.code.length?this.code.charCodeAt(this.position++):0},EdenStream.prototype.peek=function(){return this.position<this.code.length?this.code.charCodeAt(this.position):0},EdenStream.prototype.peek2=function(){return this.position+1>=this.code.length?0:this.code.charCodeAt(this.position+1)},EdenStream.prototype.peek3=function(){return this.position+2>=this.code.length?0:this.code.charCodeAt(this.position+2)},EdenStream.prototype.move=function(a){this.position=a},EdenStream.prototype.reset=function(){this.position=0,this.position_stack=[0],this.prevposition=0,this.line=1},EdenStream.prototype.tokenText=function(){return this.code.substr(this.prevposition,this.position-this.prevposition)},EdenStream.prototype.isBEOL=function(){if(10==this.peek2())return!0;for(var a=this.prevposition-1,b=this.code.charCodeAt(a);9==b||32==b;)a--,b=this.code.charCodeAt(a);return 10==b},EdenStream.prototype.skip=function(){this.position++},EdenStream.prototype.eof=function(){return this.position>=this.code.length},EdenStream.prototype.valid=function(){return this.position<this.code.length},EdenStream.prototype.unget=function(){this.position--},EdenStream.prototype.skipWhiteSpace=function(){for(;this.valid();){var a=this.peek();if(10==a&&this.line++,9!=a&&10!=a&&13!=a&&32!=a&&160!=a)break;this.skip()}},EdenStream.prototype.skipLine=function(){for(;this.valid()&&10!=this.peek();)this.skip()},EdenStream.prototype.isAlphaNumeric=function(a){return a>=48&&a<=57||a>=65&&a<=90||a>=97&&a<=122||95==a||a>=128},EdenStream.prototype.isNumeric=function(a){return a>=48&&a<=57},EdenStream.prototype.tokenType=function(a){return"OBSERVABLE"==a?"identifier":"JAVASCRIPT"==a?"javascript":"NUMBER"==a?"number":"STRING"==a?"string":"CHARACTER"==a?"character":"BOOLEAN"==a?"boolean":"string"!=typeof a?(console.error(a),"INVALID"):this.isAlphaNumeric(a.charCodeAt(0))?"keyword":"("==a||"["==a||"{"==a?"openbracket":")"==a||"]"==a||"}"==a?"closebracket":","==a||"."==a||";"==a||":"==a?"separator":"operator"},EdenStream.prototype.parseAlphaNumeric=function(a){var b="";if(0==this.isAlphaNumeric(this.peek()))return!1;for(;this.valid()&&this.isAlphaNumeric(this.peek());)b+=String.fromCharCode(this.get());return a.value=b,!0},EdenStream.prototype.parseString=function(a){for(var b="";this.valid()&&34!=this.peek();){var c=String.fromCharCode(this.get());if("\n"==c)return this.unget(),a.error=!0,void(a.value="LINEBREAK");"\\"==c?(c=String.fromCharCode(this.get()),b+="\\"+c):b+=c}this.valid()&&34==this.peek()?(this.skip(),a.error=!1):a.error=!0,a.value=b},EdenStream.prototype.parseCharacter=function(a){var b=String.fromCharCode(this.get());return"'"==b?(a.value="",void(a.error=!0)):("\\"==b&&(b=String.fromCharCode(this.get())),a.value=b,
void(this.valid()&&39==this.peek()?this.skip():a.error=!0))},EdenStream.prototype.parseNumber=function(a){for(var b="";this.valid()&&this.isNumeric(this.peek());)b+=String.fromCharCode(this.get());if(46==this.peek()&&this.isNumeric(this.peek2()))for(this.skip(),b+=".";this.valid()&&this.isNumeric(this.peek());)b+=String.fromCharCode(this.get());a.value=parseFloat(b)},EdenStream.prototype.readToken=function(){if(this.prevline=this.line,this.skipWhiteSpace(),this.prevposition=this.position,this.eof())return"EOF";var a=this.code.charCodeAt(this.position);switch(this.position++,a){case 33:return 61==this.peek()?(this.skip(),"!="):126==this.peek()?(this.skip(),"!~"):"!";case 34:return this.parseString(this.data),"STRING";case 35:return 35==this.peek()?(this.skip(),"##"):"#";case 36:return 123==this.peek()&&123==this.peek2()?(this.skip(),this.skip(),"${{"):"$";case 37:return"%";case 38:return 38==this.peek()?(this.skip(),"&&"):61==this.peek()?(this.skip(),"&="):"&";case 39:return this.parseCharacter(this.data),"CHARACTER";case 40:return"(";case 41:return")";case 42:return 61==this.peek()?(this.skip(),"*="):47==this.peek()?(this.skip(),"*/"):"*";case 43:return 43==this.peek()?(this.skip(),"++"):61==this.peek()?(this.skip(),"+="):"+";case 44:return",";case 45:return 45==this.peek()?(this.skip(),"--"):61==this.peek()?(this.skip(),"-="):"-";case 46:return 46==this.peek()?(this.skip(),".."):".";case 47:return 47==this.peek()?(this.skip(),"//"):61==this.peek()?(this.skip(),"/="):42==this.peek()?(this.skip(),"/*"):"/";case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.unget(),this.parseNumber(this.data),"NUMBER";case 58:return 58==this.peek()?(this.skip(),"::"):":";case 59:return";";case 60:return 60==this.peek()?(this.skip(),"<<"):61==this.peek()?(this.skip(),"<="):"<";case 61:return 61==this.peek()?(this.skip(),"=="):126==this.peek()?(this.skip(),"=~"):"=";case 62:return 62==this.peek()?(this.skip(),">>"):61==this.peek()?(this.skip(),">="):">";case 63:return"?";case 64:return"@";case 91:return"[";case 92:return'"';case 93:return"]";case 94:return"^";case 96:return"`";case 123:return"{";case 124:return 124==this.peek()?(this.skip(),"||"):61==this.peek()?(this.skip(),"|="):"|";case 125:return 125==this.peek()&&36==this.peek2()?(this.skip(),this.skip(),"}}$"):"}";case 126:return 62==this.peek()?(this.skip(),"~>"):"~"}if(this.unget(),this.parseAlphaNumeric(this.data))return Language.keywords.hasOwnProperty(this.data.value)?Language.keywords[this.data.value]:Language.values.hasOwnProperty(this.data.value)?(this.data.value=Language.values[this.data.value],"BOOLEAN"):"OBSERVABLE";throw this.skip(),new Error("Invalid Token: "+a)},"undefined"!=typeof require&&"undefined"!=typeof exports&&(exports.EdenStream=EdenStream,exports.EdenSyntaxData=EdenSyntaxData),Eden.SyntaxError=function(a,b,c){this.type="syntax",this.context=a,this.errno=b,this.extra=c,this.token=a.token,this.prevtoken=a.previous,this.line=a.stream.prevline,this.position=a.stream.position,this.prevposition=a.stream.prevposition},Eden.SyntaxError.UNKNOWN=0,Eden.SyntaxError.EXPCLOSEBRACKET=1,Eden.SyntaxError.BADFACTOR=2,Eden.SyntaxError.ACTIONCOLON=3,Eden.SyntaxError.ACTIONNOWATCH=4,Eden.SyntaxError.ACTIONCOMMAS=5,Eden.SyntaxError.ACTIONOPEN=6,Eden.SyntaxError.ACTIONCLOSE=7,Eden.SyntaxError.LOCALNAME=8,Eden.SyntaxError.LOCALSEMICOLON=9,Eden.SyntaxError.WHENTYPE=10,Eden.SyntaxError.LISTINDEXEXP=11,Eden.SyntaxError.LISTINDEXCLOSE=12,Eden.SyntaxError.LVALUE=13,Eden.SyntaxError.SEMICOLON=14,Eden.SyntaxError.STATEMENT=15,Eden.SyntaxError.DEFINITION=16,Eden.SyntaxError.FUNCCALLEND=17,Eden.SyntaxError.LISTLITCLOSE=18,Eden.SyntaxError.TERNIFCOLON=19,Eden.SyntaxError.IFCONDOPEN=20,Eden.SyntaxError.IFCONDCLOSE=21,Eden.SyntaxError.PARAMNAME=22,Eden.SyntaxError.PARAMSEMICOLON=23,Eden.SyntaxError.FUNCOPEN=24,Eden.SyntaxError.FUNCCLOSE=25,Eden.SyntaxError.FUNCNAME=26,Eden.SyntaxError.FOROPEN=27,Eden.SyntaxError.FORCLOSE=28,Eden.SyntaxError.FORSTART=29,Eden.SyntaxError.FORCOND=30,Eden.SyntaxError.SUBSCRIBEOPEN=31,Eden.SyntaxError.SUBSCRIBECLOSE=32,Eden.SyntaxError.SWITCHOPEN=33,Eden.SyntaxError.SWITCHCLOSE=34,Eden.SyntaxError.DEFAULTCOLON=35,Eden.SyntaxError.CASELITERAL=36,Eden.SyntaxError.CASECOLON=37,Eden.SyntaxError.INSERTCOMMA=38,Eden.SyntaxError.DELETECOMMA=39,Eden.SyntaxError.APPENDCOMMA=40,Eden.SyntaxError.SCOPENAME=41,Eden.SyntaxError.SCOPEEQUALS=42,Eden.SyntaxError.SCOPECLOSE=43,Eden.SyntaxError.BACKTICK=44,Eden.SyntaxError.WHILEOPEN=45,Eden.SyntaxError.WHILECLOSE=46,Eden.SyntaxError.WHILENOSTATEMENT=47,Eden.SyntaxError.NEGNUMBER=48,Eden.SyntaxError.DEFINELISTIX=49,Eden.SyntaxError.OUTOFBOUNDS=50,Eden.SyntaxError.PROPERTYNAME=51,Eden.SyntaxError.WHILEOFDO=52,Eden.SyntaxError.PARAMNUMBER=53,Eden.SyntaxError.AFTEROPEN=55,Eden.SyntaxError.AFTERCLOSE=56,Eden.SyntaxError.ACTIONNAME=57,Eden.SyntaxError.WHENOPEN=58,Eden.SyntaxError.WHENCLOSE=59,Eden.SyntaxError.DONAME=60,Eden.SyntaxError.PROCNAME=61,Eden.SyntaxError.IMPORTPATH=62,Eden.SyntaxError.IMPORTOPTION=63,Eden.SyntaxError.IMPORTCOMB=64,Eden.SyntaxError.IFNOSTATEMENT=65,Eden.SyntaxError.AFTERNOSTATEMENT=66,Eden.SyntaxError.WHENNOSTATEMENT=67,Eden.SyntaxError.LITCHAREMPTY=68,Eden.SyntaxError.LITCHARCLOSE=69,Eden.SyntaxError.LITSTRLINE=70,Eden.SyntaxError.LITSTRCLOSE=71,Eden.SyntaxError.IMPORTTAG=72,Eden.SyntaxError.db=[{message:function(){return 0},suggestion:{expected:[],next:[]}},{message:function(){return"}"==this.token||"]"==this.token?0:";"==this.token?1:2},suggestion:{expected:[")"],next:[";","+","-","==","<=",">=","!=","/","*","%","^"]}},{message:function(){if("{"==this.token)return 0;if(")"==this.token){var a=this.context.stream.tokenType(this.prevtoken);return"operator"==a?3:1}var b=this.context.stream.tokenType(this.token);return"keyword"==b?4:"operator"==b?3:2},suggestion:{expected:["NUMBER","STRING","OBSERVABLE","&","!","("],next:["NUMBER","STRING","OBSERVABLE","&","!","(",";","+","-","==","<=",">=","!=","/","*","%","^"]}},{message:function(){if("{"==this.token)return 1;if("OBSERVABLE"==this.token)return 0;var a=this.context.stream.tokenType(this.token);return"keyword"==a?3:2},suggestion:{expected:[":"],next:["OBSERVABLE"]}},{message:function(){if("{"==this.token)return 2;if("("==this.token)return 3;if("["==this.token&&(":"==this.prevtoken||","==this.prevtoken))return 6;if("NUMBER"==this.token||"STRING"==this.token)return 4;if(","==this.token)return 5;var a=this.context.stream.tokenType(this.token);return"keyword"==a?0:1},suggestion:{expected:["OBSERVABLE"],next:[",","{"]}},{message:function(){if("{"==this.token)return 0;if("("==this.token&&!this.context.stream.isBEOL())return 1;var a=this.context.stream.tokenType(this.token);return"keyword"==a?2:3},suggestion:{expected:["OBSERVABLE"],next:[",","{"]}},{message:function(){if(("("==this.token||"["==this.token)&&this.context.stream.isBEOL())return 6;if("("==this.token)return 0;if("["==this.token)return 1;if(";"==this.token)return 2;var a=this.context.stream.tokenType(this.token);return"keyword"==a||"identifier"==a?3:"separator"==a?4:5},suggestion:{expected:["{"],next:["local","OBSERVABLE","if","for","switch","while","return"]}},{message:function(){return(")"==this.token||"]"==this.token)&&this.context.stream.isBEOL()?0:1},suggestion:{expected:["}"],next:["proc","func","if","for","OBSERVABLE","switch","while","return","continue","break"]}},{message:function(){var a=this.context.stream.tokenType(this.token);return"keyword"==a?0:";"==this.token?1:2},suggestion:{expected:["OBSERVABLE"],next:[";"]}},{message:function(){return"is"==this.token||"="==this.token?1:0},suggestion:{expected:[";"],next:["local","OBSERVABLE","if","for","switch","while","return"]}},{message:function(){return 0},suggestion:{expected:["touch","change","("],next:["OBSERVABLE",":","NUMBER","STRING","!","&"]}},{message:function(){return 0},suggestion:{expected:["(","OBSERVABLE","NUMBER"],next:["]","OBSERVABLE","NUMBER","+","-","/","*","%","^"]}},{message:function(){return 1},suggestion:{expected:["]"],next:["[",".","=","+=","-=","==","+","-","/","*",";","/=","*=","%","^","is"]}},{message:function(){return 0},suggestion:{expected:["OBSERVABLE"],next:[".","[","is","=","+=","-=","++","--","*=","/="]}},{message:function(){if("."==this.token){var a=this.position>=2?this.context.stream.code.charCodeAt(this.position-2):0;return"NUMBER"==this.prevtoken&&32!=a&&160!=a?1:2}return"OBSERVABLE"==this.token?this.context.stream.isBEOL()?3:4:0},suggestion:{expected:[";"],next:["proc","when","OBSERVABLE","if","for","while","EOF","switch","func"]}},{message:function(){return 0},suggestion:{expected:["proc","func","when","if","for","while","switch","OBSERVABLE","{"],next:["OBSERVABLE","(","change","touch","is","=","+=","-=","*=","proc","func","when","if","for","while","switch"]}},{message:function(){return 0},suggestion:{expected:["=","is","+=","-=","/=","*="],next:["(","OBSERVABLE","NUMBER","STRING","!"]}},{message:function(){return 0},suggestion:{expected:[")"],next:[";","(","[","+","-","/","*","%","^"]}},{message:function(){return 0},suggestion:{expected:["]"],next:[]}},{message:function(){return 0},suggestion:{expected:[":"],next:[]}},{message:function(){return 0},suggestion:{expected:["("],next:[]}},{message:function(){return 0},suggestion:{expected:[")"],next:[]}},{message:function(){return 0},suggestion:{expected:["OBSERVABLE"],next:[";"]}},{message:function(){return 0},suggestion:{expected:[";"],next:["para","local","OBSERVABLE","if","for","switch","while","return"]}},{message:function(){if(("("==this.token||"["==this.token)&&this.context.stream.isBEOL())return 6;if("("==this.token)return 0;if("["==this.token)return 1;if(";"==this.token)return 2;var a=this.context.stream.tokenType(this.token);return"keyword"==a||"identifier"==a?3:"separator"==a?4:5},suggestion:{expected:["{"],next:["local","OBSERVABLE","if","for","switch","while","return"]}},{message:function(){return 0},suggestion:{expected:["}"],next:[";"]}},{message:function(){return 0},suggestion:{expected:["OBSERVABLE"],next:["{"]}},{message:function(){return 0},suggestion:{expected:["("],next:[]}},{message:function(){return 0},suggestion:{expected:[")"],next:[]}},{message:function(){return 0},suggestion:{expected:[";"],next:[]}},{message:function(){return 0},suggestion:{expected:[";"],next:[]}},{message:function(){return 0},suggestion:{expected:["["],next:[]}},{message:function(){return 0},suggestion:{expected:["]"],next:[]}},{message:function(){return 0},suggestion:{expected:["("],next:[]}},{message:function(){return 0},suggestion:{expected:["]"],next:[]}},{message:function(){return 0},suggestion:{expected:[":"],next:[]}},{message:function(){return 0},suggestion:{expected:["NUMBER","STRING"],next:[]}},{message:function(){return 0},suggestion:{expected:[":"],next:[]}},{message:function(){return 0},suggestion:{expected:[","],next:[]}},{message:function(){return 0},suggestion:{expected:[","],next:[]}},{message:function(){return 0},suggestion:{expected:[","],next:[]}},{message:function(){return 0},suggestion:{expected:["OBSERVABLE"],next:[]}},{message:function(){return 0},suggestion:{expected:["="],next:[]}},{message:function(){return 0},suggestion:{expected:["}"],next:[]}},{message:function(){return 0},suggestion:{expected:["`"],next:[]}},{message:function(){return 0},suggestion:{expected:["("],next:[]}},{message:function(){return 0},suggestion:{expected:[")"],next:[]}},{message:function(){return 0},suggestion:{expected:[")"],next:[]}},{message:function(){return 0},suggestion:{expected:["NUMBER"],next:[]}},{message:function(){return 0},suggestion:{expected:[],next:[]}},{message:function(){return 0},suggestion:{expected:[],next:[]}},{message:function(){return 0},suggestion:{expected:[],next:[]}},{message:function(){return 0},suggestion:{expected:[],next:[]}},{message:function(){return 0},suggestion:{expected:[],next:[]}},{message:function(){return 0},suggestion:{expected:[],next:[]}},{message:function(){return 0},suggestion:{expected:[],next:[]}},{message:function(){return 0},suggestion:{expected:[],next:[]}},{message:function(){return 0},suggestion:{expected:[],next:[]}},{message:function(){return 0},suggestion:{expected:[],next:[]}},{message:function(){return 0},suggestion:{expected:[],next:[]}},{message:function(){return 0},suggestion:{expected:[],next:[]}},{message:function(){var a=this.context.stream.tokenType(this.token);return"keyword"==a?0:"boolean"==a||"character"==a||"string"==a||"number"==a?1:":"==this.token?4:"{"==this.token?5:"closebracket"==this.token?3:2},suggestion:{expected:["OBSERVABLE"],next:[":"]}},{message:function(){return 0},suggestion:{expected:[],next:[]}},{message:function(){return 0},suggestion:{expected:[],next:[]}},{message:function(){return 0},suggestion:{expected:[],next:[]}},{message:function(){return 0},suggestion:{expected:[],next:[]}},{message:function(){return 0},suggestion:{expected:[],next:[]}},{message:function(){return 0},suggestion:{expected:[],next:[]}},{message:function(){return 0},suggestion:{expected:[],next:[]}},{message:function(){return 0},suggestion:{expected:[],next:[]}},{message:function(){return 0},suggestion:{expected:[],next:[]}},{message:function(){return 0},suggestion:{expected:[],next:[]}},{message:function(){return 0},suggestion:{expected:[],next:[]}}],Eden.SyntaxError.prototype.extractBefore=function(a){for(var b=this.prevposition;b>0&&a>0&&10!=this.context.stream.code.charCodeAt(b);)b--,a--;return 10==this.context.stream.code.charCodeAt(b)&&b++,this.context.stream.code.substr(b,this.prevposition-b)},Eden.SyntaxError.prototype.extractToken=function(){return this.context.stream.code.substr(this.prevposition,this.position-this.prevposition)},Eden.SyntaxError.prototype.extractAfter=function(a){for(var b=this.position;b<this.context.stream.code.length&&a>0&&10!=this.context.stream.code.charCodeAt(b);)b++,a--;return this.context.stream.code.substr(this.position,b-this.position)},Eden.SyntaxError.prototype.buildSuggestion=function(){var a=Eden.SyntaxError.db[this.errno].suggestion;return a.next.indexOf(this.token)!=-1?this.extractBefore(10)+a.expected[0]+" "+this.extractToken()+this.extractAfter(10):this.extractBefore(10)+a.expected[0]+" "+this.extractAfter(10)},Eden.SyntaxError.prototype.messageText=function(){var a=Eden.SyntaxError.db[this.errno],b=Language.errors[this.errno][a.message.call(this)];return void 0===this.extra?b:b+": "+this.extra},Eden.SyntaxError.prototype.prettyPrint=function(){this.context.stream.pushPosition(),this.context.stream.move(this.position);var a=Eden.SyntaxError.db[this.errno],b=Language.errors[this.errno][a.message.call(this)],c="Error:\n    "+b+"\n    Source : "+this.context.src+", line "+this.line+"\n    Code   : "+this.errno;return c+="\n    Here   : "+this.extractBefore(10)+">>> "+this.extractToken()+" <<<"+this.extractAfter(10),a.suggestion&&(c+="\n    Suggestion : "+this.buildSuggestion()),this.context.stream.popPosition(),c},Eden.SyntaxError.prototype.toString=function(){return this.prettyPrint()},Eden.RuntimeError=function(a,b,c,d){this.type="runtime",this.line=-1,this.statement=c,this.extra=d,this.errno=b},Eden.RuntimeError.UNKNOWN=0,Eden.RuntimeError.ASSIGNEXEC=1,Eden.RuntimeError.FUNCCALL=2,Eden.RuntimeError.ACTIONNAME=3,Eden.RuntimeError.NOAGENT=4,Eden.RuntimeError.prototype.messageText=function(){switch(this.errno){case Eden.RuntimeError.ACTIONNAME:return this.extra;case Eden.RuntimeError.NOAGENT:return this.extra}return String(this.extra).search("is not a function")>=0?"Function does not exist":String(this.extra).match(/Cannot read property .* of undefined/)?"Not a valid list":this.extra},Eden.RuntimeError.prototype.prettyPrint=function(){return"Run-time Error:\n"+this.extra.stack},Eden.AST=function(a,b,c){this.stream=new EdenStream(a),this.data=new EdenSyntaxData,this.token="INVALID",this.previous="INVALID",this.src="input",this.lines=[],this.parent=void 0,this.scripts={},this.triggers={},this.definitions={},this.imports=b?b:[],this.origin=c,this.lastDoxyComment=void 0,this.mainDoxyComment=void 0,this.stream.data=this.data,this.next(),this.script=this.pSCRIPT()},Eden.AST.debug=!1,Eden.AST.debugstep=!1,Eden.AST.debugstep_cb=void 0,Eden.AST.debugspeed=500,Eden.AST.debugbreakpoint=void 0,Eden.AST.debugbreakpoint_cb=void 0,Eden.AST.debug_begin_cb=void 0,Eden.AST.debug_end_cb=void 0,Eden.AST.prototype.getActionByName=function(a){var b=this.scripts[a];if(void 0===b)for(var c=0;c<this.imports.length;c++)if(this.imports[c]&&this.imports[c].ast&&(b=this.imports[c].ast.getActionByName(a)))return b;return b},Eden.AST.prototype.generate=function(){return this.script.generate()},Eden.AST.prototype.execute=function(a,b){this.executeStatement(this.script,0,a,b)},Eden.AST.prototype.clearExecutedState=function(){for(var a=0;a<this.lines.length;a++)this.lines[a]&&this.lines[a].executed>0&&(this.lines[a].executed=0)},Eden.AST.prototype.executeLine=function(a,b,c){var d,e=a;d=a==-1?this.script:this.lines[e],void 0!==d&&(d=this.getBase(d),this.executeStatement(d,e,b,c))},Eden.AST.prototype.getBase=function(a){for(var b=a;b.parent&&b.parent!=this.script;)b=b.parent;return b},Eden.AST.prototype.getBlockLines=function(a){for(var b=a,c=this.getBase(this.lines[b]);b>0&&this.lines[b-1]&&this.getBase(this.lines[b-1])==c;)b--;for(var d=b;b<this.lines.length-1&&this.lines[b+1]&&(this.lines[b+1]===c||this.lines[b+1].parent!=this.script);)b++;var e=b;return[d,e]},Eden.AST.prototype.getSource=function(a){return this.stream.code.slice(a.start,a.end).trim()},Eden.AST.prototype.getRoot=function(){return this.script},Eden.AST.prototype.getErrors=function(){return this.script.errors},Eden.AST.prototype.hasErrors=function(){return this.script.errors.length>0},Eden.AST.prototype.prettyPrint=function(){var a="";if(this.script.errors.length>0)for(var b=0;b<this.script.errors.length;b++)a=a+this.script.errors[b].prettyPrint()+"\n\n";else a=JSON.stringify(this.script,function(a,b){if("errors"!=a)return"parent"==a?!!b||void 0:b},"    ");return a},Eden.AST.prototype.next=function(){this.previous=this.token,this.token=this.stream.readToken();for(var a=this.stream.prevline;;)if("/*"==this.token){var b=1,c=!1,d=this.stream.position-2,e=this.stream.line;for(42==this.stream.peek()&&(c=!0);this.stream.valid()&&("*/"!=this.token||b>0);)this.token=this.stream.readToken(),"/*"==this.token?b++:"*/"==this.token&&b--;c&&(this.lastDoxyComment=new Eden.AST.DoxyComment(this.stream.code.substring(d,this.stream.position),e,this.stream.line),1==e&&(this.mainDoxyComment=this.lastDoxyComment)),this.token=this.stream.readToken()}else if("##"==this.token)this.stream.skipLine(),this.token=this.stream.readToken();else{if("${{"!=this.token)break;var d=this.stream.position,e=this.stream.line;for(this.data.line=e;this.stream.valid()&&"}}$"!=this.token;)this.token=this.stream.readToken();this.data.value=this.stream.code.substring(d,this.stream.position-3),this.token="JAVASCRIPT"}this.stream.prevline=a},Eden.AST.prototype.peekNext=function(a){var b,c={value:""};for(this.stream.data=c,this.stream.pushPosition();a>0;)b=this.stream.readToken(),a--;return this.stream.popPosition(),this.stream.data=this.data,b},Eden.AST.prototype.pTERM=function(){var a=this.pTERM_A(),b=this.pEXPRESSION_PPPPPP();return b?(b.left(a),b):a},Eden.AST.prototype.pTERM_A=function(){for(var a=this.pTERM_P();"<"==this.token||"<="==this.token||">"==this.token||">="==this.token||"=="==this.token||"!="==this.token;){var b=new Eden.AST.BinaryOp(this.token);this.next(),b.left(a),b.setRight(this.pTERM_P()),a=b}return a},Eden.AST.prototype.pTERM_P=function(){for(var a=this.pTERM_PP();"+"==this.token||"-"==this.token||"//"==this.token;){var b=new Eden.AST.BinaryOp(this.token);this.next(),b.left(a),b.setRight(this.pTERM_PP()),a=b}return a},Eden.AST.prototype.pTERM_PP=function(){for(var a=this.pTERM_PPP();"*"==this.token||"/"==this.token||"%"==this.token||"^"==this.token;){var b=new Eden.AST.BinaryOp(this.token);this.next(),b.left(a),b.setRight(this.pTERM_PPP()),a=b}return a},Eden.AST.prototype.pTERM_PPP=function(){var a=this.pFACTOR(),b=this.pEXPRESSION_PPPPP();return b?(b.left(a),b):a},Eden.AST.prototype.pEXPRESSION_PPPPP=function(){if("#"==this.token)return this.next(),new Eden.AST.Length},Eden.AST.prototype.pFACTOR=function(){if("("==this.token){this.next();var a=this.pEXPRESSION();return a.errors.length>0?a:(")"!=this.token?a.error(new Eden.SyntaxError(this,Eden.SyntaxError.EXPCLOSEBRACKET)):this.next(),a)}if("$"==this.token){this.next();var b=0;if("#"==this.token)b=-1;else if("NUMBER"!=this.token||this.data.value<1){var c=new Eden.AST.Parameter((-1));return c.errors.push(new Eden.SyntaxError(this,Eden.SyntaxError.PARAMNUMBER)),c}return b=this.data.value,this.next(),new Eden.AST.Parameter(b)}if("["==this.token){this.next();var d=[];"]"!=this.token&&(d=this.pELIST());for(var e=new Eden.AST.Literal("LIST",d),f=0;f<d.length;f++)d[f].errors.length>0&&e.errors.push.apply(e.errors,d[f].errors);return e.errors.length>0?e:("]"!=this.token?e.errors.push(new Eden.SyntaxError(this,Eden.SyntaxError.LISTLITCLOSE)):this.next(),e)}if("@"==this.token)return this.next(),new Eden.AST.Literal("UNDEFINED","@");if("JAVASCRIPT"==this.token){var g=new Eden.AST.Literal("JAVASCRIPT",this.data.value);return this.next(),g}if("NUMBER"==this.token){var g=new Eden.AST.Literal("NUMBER",this.data.value);return this.next(),g}if("-"==this.token){this.next();var h=new Eden.AST.UnaryOp("-",this.pFACTOR());return h}if("STRING"==this.token){var g=new Eden.AST.Literal("STRING",this.data.value);for(this.data.error||this.next();0==this.data.error&&"STRING"==this.token;)g.value+="\n"+this.data.value,this.next();return this.data.error&&("LINEBREAK"==this.data.value?g.errors.push(new Eden.SyntaxError(this,Eden.SyntaxError.LITSTRLINE)):g.errors.push(new Eden.SyntaxError(this,Eden.SyntaxError.LITSTRCLOSE))),g}if("BOOLEAN"==this.token){var g=new Eden.AST.Literal("BOOLEAN",this.data.value);return this.next(),g}if("CHARACTER"==this.token){var g=new Eden.AST.Literal("CHARACTER",this.data.value);return this.data.error?(""==this.data.value?g.errors.push(new Eden.SyntaxError(this,Eden.SyntaxError.LITCHAREMPTY)):g.errors.push(new Eden.SyntaxError(this,Eden.SyntaxError.LITCHARCLOSE)),g):(this.next(),g)}if("!"==this.token){this.next();var i=this.pFACTOR();return new Eden.AST.UnaryOp("!",i)}if("&"==this.token){this.next();var j=this.pLVALUE();return new Eden.AST.UnaryOp("&",j)}if("*"==this.token){this.next();var j=this.pFACTOR();return new Eden.AST.UnaryOp("*",j)}var k=this.pPRIMARY();return k},Eden.AST.prototype.pPRIMARY=function(){if("`"==this.token){this.next();var a=this.pEXPRESSION();if(a.errors.length>0){var b=new Eden.AST.Primary;return b.setBackticks(a),b}if("`"!=this.token){var b=new Eden.AST.Primary;return b.errors.push(new Eden.SyntaxError(this,Eden.SyntaxError.BACKTICK)),b}this.next();var b=this.pPRIMARY_P();return b.errors.length>0?b:(b.setBackticks(a),b.setObservable("__BACKTICKS__"),b)}if("OBSERVABLE"==this.token){var c=this.data.value;this.next();var b=this.pPRIMARY_P();return b.setObservable(c),b}var b=new Eden.AST.Primary;return b.errors.push(new Eden.SyntaxError(this,Eden.SyntaxError.BADFACTOR)),b},Eden.AST.prototype.pPRIMARY_P=function(){if("["==this.token){this.next();var a=new Eden.AST.Index;if("]"==this.token){var b=new Eden.AST.Primary;return b.prepend(a),b.errors.push(new Eden.SyntaxError(this,Eden.SyntaxError.LISTINDEXEXP)),b}var c=this.pEXPRESSION();if(c.errors.length>0){a.setExpression(c);var b=new Eden.AST.Primary;return b.prepend(a),b}if("literal"==c.type&&"NUMBER"==c.datatype&&c.value<1){a.errors.push(new Eden.SyntaxError(this,Eden.SyntaxError.OUTOFBOUNDS));var b=new Eden.AST.Primary;return b.prepend(a),b}if("]"!=this.token){a.errors.push(new Eden.SyntaxError(this,Eden.SyntaxError.LISTINDEXCLOSE));var b=new Eden.AST.Primary;return b.prepend(a),b}this.next();var b=this.pPRIMARY_PPP();return a.setExpression(c),b.prepend(a),b}if("("==this.token){this.next();var d=new Eden.AST.FunctionCall;if(")"==this.token){this.next();var b=this.pPRIMARY_PP();return b.prepend(d),b}var e=this.pELIST();if(d.setParams(e),d.errors.length>0){var b=new Eden.AST.Primary;return b.prepend(d),b}if(")"!=this.token){var b=new Eden.AST.Primary;return b.prepend(d),d.errors.length>0?b:(b.errors.push(new Eden.SyntaxError(this,Eden.SyntaxError.FUNCCALLEND)),b)}this.next();var b=this.pPRIMARY_PP();return b.errors.length>0?b:(b.prepend(d),b)}if("."==this.token){this.next();var f=this.pPRIMARY(),g=new Eden.AST.ScopePath;return g.setPrimary(f),g}return this.pPRIMARY_PPPP()},Eden.AST.prototype.pPRIMARY_PP=function(){if("["==this.token){this.next();var a=new Eden.AST.Index;if("]"==this.token){a.errors.push(new Eden.SyntaxError(this,Eden.SyntaxError.LISTINDEXEXP));var b=new Eden.AST.Primary;return b.prepend(a),b}var c=this.pEXPRESSION();if(c.errors.length>0){var b=new Eden.AST.Primary;return a.setExpression(c),b.prepend(a),b}if("literal"==c.type&&"NUMBER"==c.datatype&&c.value<1){a.errors.push(new Eden.SyntaxError(this,Eden.SyntaxError.OUTOFBOUNDS));var b=new Eden.AST.Primary;return b.prepend(a),b}if("]"!=this.token){a.errors.push(new Eden.SyntaxError(this,Eden.SyntaxError.LISTINDEXCLOSE));var b=new Eden.AST.Primary;return b.prepend(a),b}this.next();var b=this.pPRIMARY_PP();return a.setExpression(c),b.prepend(a),b}if("("==this.token){this.next();var d=new Eden.AST.FunctionCall;if(")"==this.token){this.next();var b=this.pPRIMARY_PP();return b.prepend(d),b}var e=this.pELIST();if(d.setParams(e),")"!=this.token){var b=new Eden.AST.Primary;return b.prepend(d),d.errors.length>0?b:(b.errors.push(new Eden.SyntaxError(this,Eden.SyntaxError.FUNCCALLEND)),b)}this.next();var b=this.pPRIMARY_PP();return b.prepend(d),b}return this.pPRIMARY_PPPP()},Eden.AST.prototype.pPRIMARY_PPP=function(){if("["==this.token){this.next();var a=new Eden.AST.Index;if("]"==this.token){a.errors.push(new Eden.SyntaxError(this,Eden.SyntaxError.LISTINDEXEXP));var b=new Eden.AST.Primary;return b.prepend(a),b}var c=this.pEXPRESSION();if(c.errors.length>0){var b=new Eden.AST.Primary;return a.setExpression(c),b.prepend(a),b}if("literal"==c.type&&"NUMBER"==c.datatype&&c.value<1){a.errors.push(new Eden.SyntaxError(this,Eden.SyntaxError.OUTOFBOUNDS));var b=new Eden.AST.Primary;return b.prepend(a),b}if("]"!=this.token){a.errors.push(new Eden.SyntaxError(this,Eden.SyntaxError.LISTINDEXCLOSE));var b=new Eden.AST.Primary;return b.prepend(a),b}this.next();var b=this.pPRIMARY_PP();return a.setExpression(c),b.prepend(a),b}if("("==this.token){this.next();var d=new Eden.AST.FunctionCall;if(")"==this.token){this.next();var b=this.pPRIMARY_PP();return b.prepend(d),b}var e=this.pELIST();if(d.setParams(e),")"!=this.token){var b=new Eden.AST.Primary;return b.prepend(d),d.errors.length>0?b:(b.errors.push(new Eden.SyntaxError(this,Eden.SyntaxError.FUNCCALLEND)),b)}this.next();var b=this.pPRIMARY_PP();return b.errors.length>0?b:(b.prepend(d),b)}if("."==this.token){this.next();var f=this.pPRIMARY();if(f.errors.length>0)return f;var g=new Eden.AST.ScopePath;return g.setPrimary(f),g}return this.pPRIMARY_PPPP()},Eden.AST.prototype.pPRIMARY_PPPP=function(){return new Eden.AST.Primary},Eden.AST.prototype.pSCOPE=function(){if("("==this.token){this.next();var a=this.pSCOPE_P();return")"!=this.token?(a.errors.push(new Eden.SyntaxError(this,Eden.SyntaxError.SCOPECLOSE)),a):(this.next(),a)}return this.pSCOPE_P()},Eden.AST.prototype.pSCOPEPATTERN=function(){var a=new Eden.AST.ScopePattern;if("OBSERVABLE"!=this.token)return a.error(new Eden.SyntaxError(this,Eden.SyntaxError.SCOPENAME)),a;for(a.setObservable(this.data.value),this.next();;)if("["==this.token){this.next();var b=this.pEXPRESSION();if(a.addListIndex(b),b.errors.length>0)return a;if("]"!=this.token)return a.error(new Eden.SyntaxError(this,Eden.SyntaxError.LISTINDEXCLOSE)),a;this.next()}else if("."!=this.token)break;return a},Eden.AST.prototype.pSCOPE_P=function(){var a=this.pSCOPEPATTERN(),b=!1;if(a.errors.length>0){var c=new Eden.AST.Scope;return c.addOverride(a,void 0,void 0,void 0,!1),c}if("is"!=this.token&&"="!=this.token&&"in"!=this.token){var c=new Eden.AST.Scope;return c.error(new Eden.SyntaxError(this,Eden.SyntaxError.SCOPEEQUALS)),c}"in"==this.token&&(b=!0),this.next();var d=this.pEXPRESSION();if(d.errors.length>0){var c=new Eden.AST.Scope;return c.addOverride(a,d,void 0,void 0,!1),c}var e=void 0;if(".."==this.token&&(this.next(),e=this.pEXPRESSION(),e.errors.length>0)){var c=new Eden.AST.Scope;return c.addOverride(a,d,e,void 0,!1),c}var f=void 0;if(".."==this.token&&(this.next(),f=this.pEXPRESSION(),f.errors.length>0)){var c=new Eden.AST.Scope;return c.addOverride(a,d,e,f,!1),c}var c=this.pSCOPE_PP();return c.addOverride(a,d,e,f,b),c},Eden.AST.prototype.pSCOPE_PP=function(){return","==this.token?(this.next(),this.pSCOPE_P()):new Eden.AST.Scope},Eden.AST.prototype.pELIST=function(){var a=this.pEXPRESSION();if(a.errors.length>0)return[a];var b=this.pELIST_P();return b.unshift(a),b},Eden.AST.prototype.pELIST_P=function(){for(var a=[];","==this.token;){this.next();var b=this.pEXPRESSION();if(a.push(b),b.errors.length>0)return a}return a},Eden.AST.prototype.pEXPRESSION_PPPPPP=function(){if("?"==this.token){this.next();var a=new Eden.AST.TernaryOp("?");return a.setFirst(this.pEXPRESSION()),a.errors.length>0?a:":"!=this.token?(a.errors.push(new Eden.SyntaxError(this,Eden.SyntaxError.TERNIFCOLON)),a):(this.next(),a.setSecond(this.pEXPRESSION()),a)}if("if"==this.token){this.next();var a=new Eden.AST.TernaryOp("?");return a.setCondition(this.pEXPRESSION()),a.errors.length>0?a:"else"!=this.token?(a.errors.push(new Eden.SyntaxError(this,Eden.SyntaxError.TERNIFCOLON)),a):(this.next(),a.setSecond(this.pEXPRESSION()),a)}},Eden.AST.prototype.pEXPRESSION_PLAIN=function(){for(var a=this.pTERM();"&&"==this.token||"||"==this.token;){var b=new Eden.AST.BinaryOp(this.token);this.next(),b.left(a),b.setRight(this.pTERM()),a=b}return a},Eden.AST.prototype.pEXPRESSION=function(){var a=this.pEXPRESSION_PLAIN();if("with"==this.token||"::"==this.token){this.next();var b=this.pSCOPE();return b.setExpression(a),b}return a},Eden.AST.prototype.pACTION=function(){var a=new Eden.AST.Action,b=this.parent;if(this.parent=a,"OBSERVABLE"!=this.token)return a.errors.push(new Eden.SyntaxError(this,Eden.SyntaxError.PROCNAME)),this.parent=b,a;if(a.name=this.data.value,this.next(),":"==this.token){this.next();var c=this.pOLIST();if(0==c.length)return a.errors.push(new Eden.SyntaxError(this,Eden.SyntaxError.ACTIONNOWATCH)),this.parent=b,a;if("NONAME"==c[c.length-1])return a.errors.push(new Eden.SyntaxError(this,Eden.SyntaxError.ACTIONCOMMAS)),this.parent=b,a;a.triggers=c}return a.setBody(this.pFUNCBODY()),this.parent=b,a},Eden.AST.prototype.pWHEN=function(){var a=new Eden.AST.When,b=this.parent;if(this.parent=a,"("!=this.token)return a.errors.push(new Eden.SyntaxError(this,Eden.SyntaxError.WHENOPEN)),this.parent=b,a;if(this.next(),a.setExpression(this.pEXPRESSION()),a.errors.length>0)return this.parent=b,a;if(")"!=this.token)return a.errors.push(new Eden.SyntaxError(this,Eden.SyntaxError.WHENCLOSE)),this.parent=b,a;if(this.next(),a.setStatement(this.pSTATEMENT()),a.errors.length>0)return this.parent=b,a;if(void 0===a.statement)return a.errors.push(new Eden.SyntaxError(this,Eden.SyntaxError.WHENNOSTATEMENT)),a.active=!0,this.parent=b,a;if("with"==this.token||"::"==this.token){this.next();var c=this.pSCOPE();if(a.setScope(c),c.errors.length>0)return a}return a.compile(this),this.parent=b,a},Eden.AST.prototype.pOLIST=function(){if("OBSERVABLE"!=this.token)return[];var a=this.data.value;this.next();var b=this.pOLIST_P();return b.unshift(a),b},Eden.AST.prototype.pOLIST_P=function(){for(var a=[];","==this.token;){if(this.next(),"OBSERVABLE"!=this.token)return a.push("NONAME"),a;a.push(this.data.value),this.next()}return a},Eden.AST.prototype.pACTIONBODY=function(){var a=new Eden.AST.CodeBlock,b=this.parent;return this.parent=a,"{"!=this.token?(a.errors.push(new Eden.SyntaxError(this,Eden.SyntaxError.ACTIONOPEN)),this.parent=b,a):(this.next(),a.setLocals(this.pLOCALS()),a.locals.errors.length>0?(this.parent=b,a):(a.setScript(this.pSCRIPT()),
"}"!=this.token?(a.errors.push(new Eden.SyntaxError(this,Eden.SyntaxError.ACTIONCLOSE)),this.parent=b,a):(this.next(),this.parent=b,a)))},Eden.AST.prototype.pPARAMS=function(){for(var a=new Eden.AST.Declarations;"para"==this.token;){this.next();var b=this.pOLIST();if(a.list.push.apply(a.list,b),0==b.length||"NONAME"==b[b.length-1])return a.errors.push(new Eden.SyntaxError(this,Eden.SyntaxError.PARAMNAME)),a;if(";"!=this.token)return a.errors.push(new Eden.SyntaxError(this,Eden.SyntaxError.PARAMSEMICOLON)),a;this.next()}return a},Eden.AST.prototype.pLOCALS=function(){for(var a=new Eden.AST.Declarations;"auto"==this.token||"local"==this.token;){this.next();var b=this.pOLIST();if(a.list.push.apply(a.list,b),0==b.length||"NONAME"==b[b.length-1])return a.errors.push(new Eden.SyntaxError(this,Eden.SyntaxError.LOCALNAME)),a;if(";"!=this.token)return a.errors.push(new Eden.SyntaxError(this,Eden.SyntaxError.LOCALSEMICOLON)),a;this.next()}return a},Eden.AST.prototype.pIF=function(){var a=new Eden.AST.If,b=this.parent;return this.parent=a,"("!=this.token?(a.errors.push(new Eden.SyntaxError(this,Eden.SyntaxError.IFCONDOPEN)),this.parent=b,a):(this.next(),a.setCondition(this.pEXPRESSION()),a.errors.length>0?(this.parent=b,a):")"!=this.token?(a.errors.push(new Eden.SyntaxError(this,Eden.SyntaxError.IFCONDCLOSE)),this.parent=b,a):(this.next(),a.setStatement(this.pSTATEMENT()),a.errors.length>0?(this.parent=b,a):void 0===a.statement?(a.errors.push(new Eden.SyntaxError(this,Eden.SyntaxError.IFNOSTATEMENT)),this.parent=b,a):(a.setElse(this.pIF_P()),this.parent=b,a)))},Eden.AST.prototype.pIF_P=function(){if("else"==this.token)return this.next(),this.pSTATEMENT()},Eden.AST.prototype.pFOR=function(){var a=new Eden.AST.For,b=this.parent;if(this.parent=a,"("!=this.token)return a.error(new Eden.SyntaxError(this,Eden.SyntaxError.FOROPEN)),this.parent=b,a;if(this.next(),";"==this.token)this.next();else{if(a.setStart(this.pSTATEMENT_P()),a.errors.length>0)return this.parent=b,a;if(";"!=this.token)return a.error(new Eden.SyntaxError(this,Eden.SyntaxError.FORSTART)),this.parent=b,a;this.next()}if(";"==this.token)this.next();else{if(a.setCondition(this.pEXPRESSION()),a.errors.length>0)return this.parent=b,a;if(";"!=this.token)return a.error(new Eden.SyntaxError(this,Eden.SyntaxError.FORCOND)),this.parent=b,a;this.next()}if(")"==this.token)this.next();else{if(a.setIncrement(this.pSTATEMENT_P()),a.errors.length>0)return this.parent=b,a;if(")"!=this.token)return a.error(new Eden.SyntaxError(this,Eden.SyntaxError.FORCLOSE)),this.parent=b,a;this.next()}return a.setStatement(this.pSTATEMENT()),this.parent=b,a},Eden.AST.prototype.pWHILE=function(){var a=new Eden.AST.While,b=this.parent;return this.parent=a,"("!=this.token?(a.error(new Eden.SyntaxError(this,Eden.SyntaxError.WHILEOPEN)),this.parent=b,a):(this.next(),a.setCondition(this.pEXPRESSION()),a.errors.length>0?(this.parent=b,a):")"!=this.token?(a.error(new Eden.SyntaxError(this,Eden.SyntaxError.WHILECLOSE)),this.parent=b,a):(this.next(),a.setStatement(this.pSTATEMENT()),void 0===a.statement?(a.error(new Eden.SyntaxError(this,Eden.SyntaxError.WHILENOSTATEMENT)),this.parent=b,a):(this.parent=b,a)))},Eden.AST.prototype.pDO=function(){var a=new Eden.AST.Do,b=this.parent;if(this.parent=a,"{"==this.token){this.next();var c=this.pSCRIPT();return"}"!=this.token?(a.setScript(c),a.errors.push(new Eden.SyntaxError(this,Eden.SyntaxError.ACTIONCLOSE)),this.parent=b,a):(this.next(),a.setScript(c),this.parent=b,a)}if("OBSERVABLE"!=this.token)return a.errors.push(new Eden.SyntaxError(this,Eden.SyntaxError.DONAME)),this.parent=b,a;if(a.setName(this.data.value),this.next(),";"!=this.token)for(var d=this.pELIST(),e=0;e<d.length;e++)if(a.addParameter(d[e]),a.errors.length>0)return this.parent=b,a;return";"!=this.token?(a.errors.push(new Eden.SyntaxError(this,Eden.SyntaxError.SEMICOLON)),this.parent=b,a):(this.next(),this.parent=b,a)},Eden.AST.prototype.pSWITCH=function(){var a=new Eden.AST.Switch,b=this.parent;return this.parent=a,"("!=this.token?(a.error(new Eden.SyntaxError(this,Eden.SyntaxError.SWITCHOPEN)),this.parent=b,a):(this.next(),a.setExpression(this.pEXPRESSION()),a.errors.length>0?(this.parent=b,a):")"!=this.token?(a.error(new Eden.SyntaxError(this,Eden.SyntaxError.SWITCHCLOSE)),this.parent=b,a):(this.next(),a.setStatement(this.pSTATEMENT()),this.parent=b,a))},Eden.AST.prototype.pFUNCTION=function(){var a=new Eden.AST.Function,b=this.parent;return this.parent=a,"OBSERVABLE"!=this.token?(a.errors.push(new Eden.SyntaxError(this,Eden.SyntaxError.FUNCNAME)),this.parent=b,a):(a.name=this.data.value,this.next(),a.setBody(this.pFUNCBODY()),this.parent=b,a)},Eden.AST.prototype.pFUNCBODY=function(){var a=new Eden.AST.CodeBlock,b=this.parent;return this.parent=a,"{"!=this.token?(a.errors.push(new Eden.SyntaxError(this,Eden.SyntaxError.FUNCOPEN)),this.parent=b,a):(this.next(),a.setParams(this.pPARAMS()),a.params.errors.length>0?(this.parent=b,a):(a.setLocals(this.pLOCALS()),a.locals.errors.length>0?(this.parent=b,a):(a.setScript(this.pSCRIPT()),"}"!=this.token?(a.errors.push(new Eden.SyntaxError(this,Eden.SyntaxError.FUNCCLOSE)),this.parent=b,a):(this.parent=b,a))))},Eden.AST.prototype.pLVALUE_P=function(){for(var a=[];;){if("["!=this.token)break;this.next();var b=new Eden.AST.LValueComponent("index"),c=this.pEXPRESSION();if(b.index(c),a.push(b),c.errors.length>0&&b.errors.unshift(new Eden.SyntaxError(this,Eden.SyntaxError.LISTINDEXEXP)),"literal"==b.indexexp.type&&"NUMBER"==b.indexexp.datatype&&b.indexexp.value<1&&b.error(new Eden.SyntaxError(this,Eden.SyntaxError.OUTOFBOUNDS)),"]"!=this.token)return b.error(new Eden.SyntaxError(this,Eden.SyntaxError.LISTINDEXCLOSE)),a;this.next()}return a},Eden.AST.prototype.pLVALUE=function(){var a=new Eden.AST.LValue;if("*"==this.token)this.next(),a.setPrimary(this.pPRIMARY());else if("`"==this.token){if(this.next(),a.setExpression(this.pEXPRESSION()),a.errors.length>0)return a;if("`"!=this.token)return a.error(new Eden.SyntaxError(this,Eden.SyntaxError.BACKTICK)),a;this.next()}else{if("OBSERVABLE"!=this.token)return a.error(new Eden.SyntaxError(this,Eden.SyntaxError.LVALUE)),a;a.setObservable(this.data.value),this.next()}return a.setExtras(this.pLVALUE_P()),a},Eden.AST.prototype.pSTATEMENT_PP=function(){if("is"==this.token)return this.next(),new Eden.AST.Definition(this.pEXPRESSION());if("="==this.token)return this.next(),new Eden.AST.Assignment(this.pEXPRESSION());if("+="==this.token)return this.next(),new Eden.AST.Modify("+=",this.pEXPRESSION());if("-="==this.token)return this.next(),new Eden.AST.Modify("-=",this.pEXPRESSION());if("/="==this.token)return this.next(),new Eden.AST.Modify("/=",this.pEXPRESSION());if("*="==this.token)return this.next(),new Eden.AST.Modify("*=",this.pEXPRESSION());if("~>"==this.token){this.next();var a=new Eden.AST.Subscribers;return"["!=this.token?(a.error(new Eden.SyntaxError(this,Eden.SyntaxError.SUBSCRIBEOPEN)),a):(this.next(),a.setList(this.pOLIST()),a.errors.length>0?a:"]"!=this.token?(a.error(new Eden.SyntaxError(this,Eden.SyntaxError.SUBSCRIBECLOSE)),a):(this.next(),a))}if("++"==this.token)return this.next(),new Eden.AST.Modify("++",(void 0));if("--"==this.token)return this.next(),new Eden.AST.Modify("--",(void 0));if("("==this.token){var b=new Eden.AST.FunctionCall;if(this.next(),")"!=this.token){if(b.setParams(this.pELIST()),b.errors.length>0)return b;if(")"!=this.token)return b.error(new Eden.SyntaxError(this,Eden.SyntaxError.FUNCCLOSE)),b}return this.next(),b}var c=[];c.push(new Eden.SyntaxError(this,Eden.SyntaxError.DEFINITION));var d=new Eden.AST.Assignment((void 0));return d.errors.unshift(c[0]),d},Eden.AST.prototype.pSTATEMENT_P=function(){var a=this.pLVALUE();if(a.errors.length>0)return a;var b=this.pSTATEMENT_PP();return b.left(a),b.errors.length>0?b:b},Eden.AST.prototype.pCASE=function(){var a=new Eden.AST.Case;return"STRING"!=this.token&&"NUMBER"!=this.token?(a.error(new Eden.SyntaxError(this,Eden.SyntaxError.CASELITERAL)),a):(a.setLiteral(this.token,this.data.value),this.next(),":"!=this.token?(a.error(new Eden.SyntaxError(this,Eden.SyntaxError.CASECOLON)),a):(this.next(),a))},Eden.AST.prototype.pINSERT=function(){var a=new Eden.AST.Insert;return a.setDest(this.pLVALUE()),a.errors.length>0?a:","!=this.token?(a.error(new Eden.SyntaxError(this,Eden.SyntaxError.INSERTCOMMA)),a):(this.next(),a.setIndex(this.pEXPRESSION()),a.errors.length>0?a:","!=this.token?(a.error(new Eden.SyntaxError(this,Eden.SyntaxError.INSERTCOMMA)),a):(this.next(),a.setValue(this.pEXPRESSION()),a.errors.length>0?a:";"!=this.token?(a.error(new Eden.SyntaxError(this,Eden.SyntaxError.SEMICOLON)),a):(this.next(),a)))},Eden.AST.prototype.pDELETE=function(){var a=new Eden.AST.Delete;return a.setDest(this.pLVALUE()),a.errors.length>0?a:","!=this.token?(a.error(new Eden.SyntaxError(this,Eden.SyntaxError.DELETECOMMA)),a):(this.next(),a.setIndex(this.pEXPRESSION()),a.errors.length>0?a:";"!=this.token?(a.error(new Eden.SyntaxError(this,Eden.SyntaxError.SEMICOLON)),a):(this.next(),a))},Eden.AST.prototype.pAPPEND=function(){var a=new Eden.AST.Append;return a.setDest(this.pLVALUE()),a.errors.length>0?a:","!=this.token?(a.error(new Eden.SyntaxError(this,Eden.SyntaxError.APPENDCOMMA)),a):(this.next(),a.setIndex(this.pEXPRESSION()),a.errors.length>0?a:";"!=this.token?(a.error(new Eden.SyntaxError(this,Eden.SyntaxError.SEMICOLON)),a):(this.next(),a))},Eden.AST.prototype.pSHIFT=function(){var a=new Eden.AST.Shift;return a.setDest(this.pLVALUE()),a.errors.length>0?a:";"!=this.token?(a.error(new Eden.SyntaxError(this,Eden.SyntaxError.SEMICOLON)),a):(this.next(),a)},Eden.AST.prototype.pREQUIRE=function(){var a=new Eden.AST.Require,b=this.pEXPRESSION();return a.setExpression(b),a},Eden.AST.prototype.pAFTER=function(){var a=new Eden.AST.After;if("("!=this.token)return a.error(new Eden.SyntaxError(this,Eden.SyntaxError.AFTEROPEN)),a;this.next();var b=this.pEXPRESSION();if(a.setExpression(b),a.errors.length>0)return a;if(")"!=this.token)return a.error(new Eden.SyntaxError(this,Eden.SyntaxError.AFTEROPEN)),a;this.next();var c=this.pSTATEMENT();return void 0===c&&a.error(new Eden.SyntaxError(this,Eden.SyntaxError.AFTERNOSTATEMENT)),a.setStatement(c),a},Eden.AST.prototype.pINCLUDE=function(){var a=this.pEXPRESSION(),b=new Eden.AST.Include;return b.prepend(a),b},Eden.AST.prototype.pIMPORT=function(){var a=new Eden.AST.Import;if("OBSERVABLE"!=this.token&&void 0===Language.keywords[this.token])return a.errors.push(new Eden.SyntaxError(this,Eden.SyntaxError.IMPORTPATH)),a;var b=this.data.value;for(this.next();"/"==this.token;){if(this.next(),"OBSERVABLE"!=this.token&&void 0===Language.keywords[this.token])return a.errors.push(new Eden.SyntaxError(this,Eden.SyntaxError.IMPORTPATH)),a;b+="/"+this.data.value,this.next()}if("@"==this.token){if(this.next(),"OBSERVABLE"!=this.token&&"NUMBER"!=this.token)return a.errors.push(new Eden.SyntaxError(this,Eden.SyntaxError.IMPORTTAG)),a;a.setTag(this.data.value),this.next()}if(";"!=this.token&&"OBSERVABLE"!=this.token&&"local"!=this.token)return a.errors.push(new Eden.SyntaxError(this,Eden.SyntaxError.SEMICOLON)),a;for(;"OBSERVABLE"==this.token||"local"==this.token;){if(!Language.importoptions[this.data.value])return a.errors.push(new Eden.SyntaxError(this,Eden.SyntaxError.IMPORTOPTION)),a;if(0==a.addOption(this.data.value))return a.errors.push(new Eden.SyntaxError(this,Eden.SyntaxError.IMPORTCOMB)),a;this.next()}return";"!=this.token?(a.errors.push(new Eden.SyntaxError(this,Eden.SyntaxError.SEMICOLON)),a):(this.next(),a.setPath(b),a)},Eden.AST.prototype.pWAIT=function(){var a=new Eden.AST.Wait;if(";"==this.token)return this.next(),a;var b=this.pEXPRESSION();return a.setDelay(b),";"!=this.token?(a.errors.push(new Eden.SyntaxError(this,Eden.SyntaxError.SEMICOLON)),a):(this.next(),a)},Eden.AST.prototype.pSTATEMENT=function(){var a=this.stream.prevposition,b=this.stream.line-1,c=-1,d=void 0,e=-1,f=this.lastDoxyComment;switch(this.lastDoxyComment=void 0,this.token){case"proc":this.next(),d=this.pACTION(),e=this.stream.position,c=this.stream.line,this.next();break;case"func":this.next(),d=this.pFUNCTION(),e=this.stream.position,c=this.stream.line,this.next();break;case"when":this.next(),d=this.pWHEN(),e=this.stream.prevposition,c=this.stream.prevline;break;case"action":this.next(),d=this.pNAMEDSCRIPT(),e=this.stream.position,c=this.stream.line,this.next();break;case"for":this.next(),d=this.pFOR();break;case"while":this.next(),d=this.pWHILE();break;case"do":this.next(),d=this.pDO();break;case"wait":this.next(),d=this.pWAIT();break;case"switch":this.next(),d=this.pSWITCH();break;case"case":this.next(),d=this.pCASE();break;case"insert":this.next(),d=this.pINSERT();break;case"delete":this.next(),d=this.pDELETE();break;case"append":this.next(),d=this.pAPPEND();break;case"shift":this.next(),d=this.pSHIFT();break;case"require":this.next(),d=this.pREQUIRE();break;case"after":this.next(),d=this.pAFTER();break;case"include":this.next(),d=this.pINCLUDE();break;case"import":this.next(),d=this.pIMPORT();break;case"default":this.next();var g=new Eden.AST.Default;":"!=this.token?g.error(new Eden.SyntaxError(this,Eden.SyntaxError.DEFAULTCOLON)):this.next(),d=g;break;case"if":this.next(),d=this.pIF();break;case"return":this.next();var h=new Eden.AST.Return;if(";"==this.token){this.next(),d=h;break}if(h.setResult(this.pEXPRESSION()),h.errors.length>0){d=h;break}";"!=this.token?h.error(new Eden.SyntaxError(this,Eden.SyntaxError.SEMICOLON)):this.next(),d=h;break;case"continue":this.next();var i=new Eden.AST.Continue;if(i.errors.length>0){d=i;break}";"!=this.token?i.error(new Eden.SyntaxError(this,Eden.SyntaxError.SEMICOLON)):this.next(),d=i;break;case"break":this.next();var j=new Eden.AST.Break;if(j.errors.length>0){d=j;break}";"!=this.token?j.error(new Eden.SyntaxError(this,Eden.SyntaxError.SEMICOLON)):this.next(),d=j;break;case"{":this.next();var k=this.pSCRIPT();if("}"!=this.token){k.error(new Eden.SyntaxError(this,Eden.SyntaxError.ACTIONCLOSE)),c=this.stream.line,d=k;break}c=this.stream.line,this.next(),d=k;break;case"JAVASCRIPT":b=this.data.line-1;var l=this.data.value;this.next(),d=new Eden.AST.Literal("JAVASCRIPT",l),c=this.stream.line;break;case"`":case"*":case"OBSERVABLE":var m=this.pLVALUE();if(m.errors.length>0){d=new Eden.AST.DummyStatement,d.lvalue=m,d.errors=m.errors;break}var n=this.pSTATEMENT_PP();if(n.left(m),n.errors.length>0){d=n,c=this.stream.line;break}";"!=this.token?n.error(new Eden.SyntaxError(this,Eden.SyntaxError.SEMICOLON)):(e=this.stream.position,c=this.stream.line,this.next()),void 0===this.definitions[m.name]&&(this.definitions[m.name]=[]),this.definitions[m.name].push(n),d=n;break;default:return}d.parent=this.parent,d.doxyComment=f,e==-1?d.setSource(a,this.stream.prevposition):d.setSource(a,e),this.lines[b]=d,d.line=b;for(var o=b+1;o<c;o++)(void 0===this.lines[o]||d.errors.length>0)&&(this.lines[o]=d);return d},Eden.AST.prototype.pNAMEDSCRIPT=function(){var a;if("OBSERVABLE"!=this.token){var b=new Eden.AST.Script;return b.errors.push(new Eden.SyntaxError(this,Eden.SyntaxError.ACTIONNAME)),b}if(a=this.data.value,this.next(),"{"!=this.token){var b=new Eden.AST.Script;return b.errors.push(new Eden.SyntaxError(this,Eden.SyntaxError.ACTIONOPEN)),b}this.next();var b=this.pSCRIPT();return b.errors.length>0?b:(b.setName(a),"}"!=this.token?(b.error(new Eden.SyntaxError(this,Eden.SyntaxError.ACTIONCLOSE)),b):(this.scripts[b.name]=b,b.base=this,b))},Eden.AST.prototype.pSCRIPT=function(){var a=new Eden.AST.Script,b=this.parent;for(this.parent=a,a.setLocals(this.pLOCALS());"EOF"!=this.token;){var c=this.pSTATEMENT();if(void 0!==c){if(a.append(c),c.errors.length>0)break}else{if("}"!=this.token&&";"!=this.token&&a.errors.push(new Eden.SyntaxError(this,Eden.SyntaxError.STATEMENT)),";"!=this.token)break;this.next()}}return this.parent=b,a},"undefined"!=typeof require&&"undefined"!=typeof exports&&(exports.Eden.AST=Eden.AST),Eden.AST.DoxyComment=function(a,b,c){this.type="doxycomment",this.content=a,this.startline=b,this.endline=c},Eden.AST.DoxyComment.prototype.getHashTags=function(){if(this.tags)return this.tags;for(var a=this.content.split(/[ \n\t]+/),b={},c={},d=0;d<a.length;d++)"#"==a[d].charAt(0)&&(b[a[d]]=!0),"@"==a[d].charAt(0)&&(c[a[d]]=!0);return this.tags=b,this.controls=c,Object.keys(b)},Eden.AST.DoxyComment.prototype.hasTag=function(a){return void 0===this.tags&&this.getHashTags(),!!this.tags[a]},Eden.AST.DoxyComment.prototype.getControls=function(){return this.controls?this.controls:(this.getHashTags(),this.controls)},Eden.AST.DoxyComment.prototype.stripped=function(){for(var a=this.content.substring(3,this.content.length-2).split(/[ \n\t]+/),b="",c=0;c<a.length;c++)"#"!=a[c].charAt(0)&&"@"!=a[c].charAt(0)&&(b+=a[c]+" ");return b.trim()},Eden.AST.Literal=function(a,b){this.type="literal",this.parent=void 0,this.datatype=a,this.value=b,this.errors=[],this.start=0,this.end=0},Eden.AST.Literal.prototype.error=fnEdenASTerror,Eden.AST.Literal.prototype.setSource=function(a,b){this.start=a,this.end=b};Eden.AST.Literal.prototype.generate=function(a,b){switch(this.datatype){case"NUMBER":return this.value;case"LIST":for(var c="[",d=0;d<this.value.length;d++)c+=this.value[d].generate(a,b),this.value[d].doesReturnBound&&this.value[d].doesReturnBound()&&(c+=".value"),d!=this.value.length-1&&(c+=",");return c+="]";case"CHARACTER":case"STRING":var e=this.value.replace(/\n/g,"\\n");return'"'+e+'"';case"BOOLEAN":return this.value;case"JAVASCRIPT":return this.value}};Eden.AST.Literal.prototype.execute=function(ctx,base,scope){switch(this.datatype){case"NUMBER":case"CHARACTER":case"BOOLEAN":return this.value;case"STRING":return eval('"'+this.value+'"');case"LIST":var rhs="(function(context,scope) { return ";return rhs+=this.generate(ctx,"scope"),rhs+=";})",eval(rhs)(eden.root,scope);case"JAVASCRIPT":return eval(this.value)}},Eden.AST.ScopePattern=function(){this.type="scopepattern",this.observable="NONAME",this.components=[],this.errors=[]},Eden.AST.ScopePattern.prototype.error=fnEdenASTerror,Eden.AST.ScopePattern.prototype.setObservable=function(a){this.observable=a},Eden.AST.ScopePattern.prototype.addListIndex=function(a){this.components.push(a),a&&this.errors.push.apply(this.errors,a.errors)},Eden.AST.Scope=function(){this.type="scope",this.errors=[],this.range=!1,this.overrides={},this.expression=void 0},Eden.AST.Scope.prototype.error=fnEdenASTerror,Eden.AST.Scope.prototype.prepend=function(a){this.primary.prepend(a)},Eden.AST.Scope.prototype.setExpression=function(a){this.expression=a,a&&this.errors.push.apply(this.errors,a.errors)},Eden.AST.Scope.prototype.doesReturnBound=function(){return!(!this.expression||!this.expression.doesReturnBound)&&this.expression.doesReturnBound()},Eden.AST.Scope.prototype.addOverride=function(a,b,c,d,e){this.errors.push.apply(this.errors,a.errors),e&&(this.range=!0),d?(this.range=!0,this.overrides[a.observable]={start:b,end:d,increment:c,components:a.components,isin:e},this.errors.push.apply(this.errors,b.errors),this.errors.push.apply(this.errors,c.errors),this.errors.push.apply(this.errors,d.errors)):c?(this.range=!0,this.overrides[a.observable]={start:b,end:c,components:a.components,isin:e},this.errors.push.apply(this.errors,b.errors),this.errors.push.apply(this.errors,c.errors)):b&&(this.overrides[a.observable]={start:b,end:void 0,components:a.components,isin:e},this.errors.push.apply(this.errors,b.errors))},Eden.AST.Scope.prototype.generateConstructor=function(a,b){var c;c="new Scope(context, "+b+", [";for(var d in this.overrides){var e=this.overrides[d].start.generate(a,b);if(this.range&&this.overrides[d].start.doesReturnBound&&this.overrides[d].start.doesReturnBound()&&(e+=".value"),c+='new ScopeOverride("'+d+'", '+e,this.overrides[d].end){var f=this.overrides[d].end.generate(a,b);if(this.overrides[d].end.doesReturnBound&&this.overrides[d].end.doesReturnBound()&&(f+=".value"),this.overrides[d].increment){var g=this.overrides[d].increment.generate(a,b);this.overrides[d].increment.doesReturnBound&&this.overrides[d].increment.doesReturnBound()&&(g+=".value"),c+=", "+f+", "+g+"),"}else c+=", "+f+"),"}else c+=", undefined, undefined, "+this.overrides[d].isin+"),"}return c=c.slice(0,-1),c+="], "+this.range+", this)"},Eden.AST.Scope.prototype.generate=function(a,b){if(a.scopes.push(this.generateConstructor(a,b)),this.range){var c="_scopes["+(a.scopes.length-1)+"]",d=this.expression.generate(a,"_scopes["+(a.scopes.length-1)+"].clone()"),e="(function() {\n";return e+=c+".range = false;\n",e+="var results = [];\n",e+="var scoperesults = [];\n",e+="while(true) {\n",e+="var val = "+d,this.expression.doesReturnBound&&this.expression.doesReturnBound()&&(e+=";\n\tif (val.value !== undefined) scoperesults.push(val.scope);\n\tval = val.value"),e+=";\n",e+="if (val !== undefined) results.push(val);\n",e+="if ("+c+".next() == false) break;\n",e+="}\n"+c+".range = true;\n",e+=this.expression.doesReturnBound&&this.expression.doesReturnBound()?"if (cache) cache.scopes = scoperesults;\n return new BoundValue(results,"+c+");})()":"return results;})()"}return this.expression.generate(a,"_scopes["+(a.scopes.length-1)+"]")},Eden.AST.Index=function(){this.type="index",this.expression=void 0,this.errors=[]},Eden.AST.Index.prototype.setExpression=function(a){this.expression=a,a.errors.length>0&&this.errors.push.apply(this.errors,a.errors)},Eden.AST.Index.prototype.generate=function(a,b){var c=this.expression.generate(a,b);return this.expression.doesReturnBound&&this.expression.doesReturnBound()&&(c+=".value"),"[rt.index("+c+")]"},Eden.AST.Index.prototype.error=fnEdenASTerror,Eden.AST.ScopePath=function(){this.type="scopepath",this.errors=[],this.primary=void 0,this.path=new Eden.AST.Primary,this.scopestr=void 0},Eden.AST.ScopePath.prototype.prepend=function(a){this.path.prepend(a)},Eden.AST.ScopePath.prototype.setObservable=function(a){this.path.setObservable(a)},Eden.AST.ScopePath.prototype.setBackticks=function(a){this.path.setBackticks(a)},Eden.AST.ScopePath.prototype.getObservable=function(){return this.primary.getObservable()},Eden.AST.ScopePath.prototype.doesReturnBound=function(){return this.primary.doesReturnBound()},Eden.AST.ScopePath.prototype.getScopeString=function(){return this.scopestr},Eden.AST.ScopePath.prototype.setPrimary=function(a){this.primary=a,this.primary.errors.length>0&&this.errors.push.apply(this.errors,a.errors)},Eden.AST.ScopePath.prototype.generate=function(a,b){var c=this.path.generate(a,b,!0)+".scope";return this.primary.generate(a,c)},Eden.AST.ScopePath.prototype.error=fnEdenASTerror,Eden.AST.Parameter=function(a){this.type="parameter",this.index=a,this.errors=[],this.returnsbound=!1},Eden.AST.Parameter.prototype.error=fnEdenASTerror,Eden.AST.Parameter.prototype.doesReturnBound=function(){return this.returnsbound},Eden.AST.Parameter.prototype.generate=function(a,b){if(this.index==-1)return a&&a.parameters?""+a.parameters.length:(this.returnsbound=!1,"0");if(a&&a.parameters){a.dirty=!0;var c=a.parameters[this.index-1];return c instanceof BoundValue?this.returnsbound=!0:this.returnsbound=!1,"ctx.parameters["+this.index+"-1]"}},Eden.AST.UnaryOp=function(a,b){this.type="unaryop",this.op=a,this.errors=b.errors,this.r=b},Eden.AST.UnaryOp.prototype.error=fnEdenASTerror,Eden.AST.UnaryOp.prototype.generate=function(a,b){var c=this.r.generate(a,b);return this.r.doesReturnBound&&this.r.doesReturnBound()&&(c+=".value"),"!"==this.op?"!("+c+")":"&"==this.op?c:"-"==this.op?"-("+c+")":"*"==this.op?c+".value("+b+")":void 0},Eden.AST.UnaryOp.prototype.execute=function(ctx,base,scope){var rhs="(function(context,scope) { return ";return rhs+=this.generate(ctx,"scope"),rhs+=";})",eval(rhs)(eden.root,scope)},Eden.AST.TernaryOp=function(a){this.type="ternaryop",this.op=a,this.errors=[],this.first=void 0,this.second=void 0,this.condition=void 0,this.returnsbound=!0},Eden.AST.TernaryOp.prototype.error=fnEdenASTerror,Eden.AST.TernaryOp.prototype.setFirst=function(a){this.first=a,a.errors.length>0&&this.errors.push.apply(this.errors,a.errors)},Eden.AST.TernaryOp.prototype.setSecond=function(a){this.second=a,a.errors.length>0&&this.errors.push.apply(this.errors,a.errors)},Eden.AST.TernaryOp.prototype.setCondition=function(a){this.condition=a,a.errors.length>0&&this.errors.push.apply(this.errors,a.errors)},Eden.AST.TernaryOp.prototype.left=function(a){void 0===this.condition?this.condition=a:this.first=a},Eden.AST.TernaryOp.prototype.doesReturnBound=function(){return this.returnsbound},Eden.AST.TernaryOp.prototype.generate=function(a,b){var c=this.condition.generate(a,b),d=this.first.generate(a,b),e=this.second.generate(a,b);return this.condition.doesReturnBound&&this.condition.doesReturnBound()&&(c+=".value"),this.first.doesReturnBound&&this.second.doesReturnBound&&this.first.doesReturnBound()&&this.second.doesReturnBound()?(this.returnsbound=!0,"(("+c+")?("+d+"):("+e+"))"):(this.first.doesReturnBound&&this.first.doesReturnBound()&&(d+=".value"),this.second.doesReturnBound&&this.second.doesReturnBound()&&(e+=".value"),this.returnsbound=!1,"(("+c+")?("+d+"):("+e+"))")},Eden.AST.TernaryOp.prototype.execute=function(ctx,base,scope){var rhs="(function(context,scope) { return ";return rhs+=this.generate(ctx,"scope"),rhs+=";})",eval(rhs)(eden.root,scope)},Eden.AST.BinaryOp=function(a){this.type="binaryop",this.op=a,this.errors=[],this.l=void 0,this.r=void 0},Eden.AST.BinaryOp.prototype.left=fnEdenASTleft,Eden.AST.BinaryOp.prototype.error=fnEdenASTerror,Eden.AST.BinaryOp.prototype.setRight=function(a){this.r=a,this.errors.push.apply(this.errors,a.errors)},Eden.AST.BinaryOp.prototype.generate=function(a,b){var c,d=this.l.generate(a,b),e=this.r.generate(a,b);switch(this.l.doesReturnBound&&this.l.doesReturnBound()&&(d+=".value"),this.r.doesReturnBound&&this.r.doesReturnBound()&&(e+=".value"),this.op){case"//":c="concat";break;case"+":c="add";break;case"-":c="subtract";break;case"/":c="divide";break;case"*":c="multiply";break;case"==":c="equal";break;case"%":c="mod";break;case"^":c="pow";break;default:c="RAW"}return"RAW"!=c?"rt."+c+"(("+d+"),("+e+"))":"("+d+") "+this.op+" ("+e+")"},Eden.AST.BinaryOp.prototype.execute=function(ctx,base,scope){var rhs="(function(context,scope) { return ";return rhs+=this.generate(ctx,"scope"),rhs+=";})",eval(rhs)(eden.root,scope)},Eden.AST.Length=function(){this.type="length",this.errors=[],this.l=void 0},Eden.AST.Length.prototype.left=fnEdenASTleft,Eden.AST.Length.prototype.error=fnEdenASTerror,Eden.AST.Length.prototype.generate=function(a,b){var c=this.l.generate(a,b);return this.l.doesReturnBound&&this.l.doesReturnBound()&&(c+=".value"),"rt.length("+c+")"},Eden.AST.LValue=function(){this.type="lvalue",this.errors=[],this.name=void 0,this.express=void 0,this.primary=void 0,this.lvaluep=void 0,this.islocal=!1},Eden.AST.LValue.prototype.error=fnEdenASTerror,Eden.AST.LValue.prototype.setExtras=function(a){if(this.lvaluep=a,a)for(var b=0;b<a.length;b++)this.errors.push.apply(this.errors,a[b].errors)},Eden.AST.LValue.prototype.setObservable=function(a){this.name=a},Eden.AST.LValue.prototype.setPrimary=function(a){this.primary=a,a&&a.errors.length>0&&this.errors.push.apply(this.errors,a.errors)},Eden.AST.LValue.prototype.setExpression=function(a){this.express=a,a&&a.errors.length>0&&this.errors.push.apply(this.errors,a.errors)},Eden.AST.LValue.prototype.getSymbol=function(a,b,c){if(this.name)return eden.root.lookup(this.name);if(this.primary){var d=this.primary.execute(a,b,c);return d instanceof BoundValue&&(d=d.value),d}if(this.express){console.log(this.express);var e=this.express.execute(a,b,c);return console.log(e),e instanceof BoundValue&&(e=e.value),eden.root.lookup(e)}},Eden.AST.LValue.prototype.hasListIndices=function(){return this.lvaluep&&this.lvaluep.length>0&&"index"==this.lvaluep[0].kind},Eden.AST.LValue.prototype.generateCompList=function(a,b){for(var c="[",d=0;d<this.lvaluep.length;d++)c+="rt.index("+this.lvaluep[d].indexexp.generate(a,b)+")",d<this.lvaluep.length-1&&(c+=",");return c+="]"},Eden.AST.LValue.prototype.generateIndexList=function(a,b){for(var c="[",d=0;d<this.lvaluep.length;d++)c+="rt.index("+this.lvaluep[d].indexexp.generate(a,b)+")",d<this.lvaluep.length-1&&(c+="][");return c+="]"},Eden.AST.LValue.prototype.generateIdStr=function(){return'"'+this.generateCompList()+'"'},Eden.AST.LValue.prototype.executeCompList=function(ctx,scope){for(var res=[],i=0;i<this.lvaluep.length;i++)if("index"==this.lvaluep[i].kind){var iexp=this.lvaluep[i].indexexp.generate(ctx,"scope");this.lvaluep[i].indexexp.doesReturnBound&&this.lvaluep[i].indexexp.doesReturnBound()&&(iexp+=".value"),res.push(rt.index(eval("(function(context,scope) { return "+iexp+"; })")(eden.root,scope)))}return res},Eden.AST.LValue.prototype.generate=function(a){if(this.name){if(a&&a.locals&&a.locals.list.indexOf(this.name)!=-1){this.islocal=!0;for(var b=this.name,c=0;c<this.lvaluep.length;c++)b+=this.lvaluep[c].generate(a,"scope");return b}if(a&&a.params&&a.params.list.indexOf(this.name)!=-1){this.islocal=!0;for(var b=this.name,c=0;c<this.lvaluep.length;c++)b+=this.lvaluep[c].generate(a,"scope");return b}return'context.lookup("'+this.name+'")'}return this.primary?this.primary.generate(a):this.express?"context.lookup("+this.express.generate(a,"scope")+")":void 0},Eden.AST.LValueComponent=function(a){this.type="lvaluecomponent",this.errors=[],this.kind=a,this.indexexp=void 0,this.observable=void 0},Eden.AST.LValueComponent.prototype.index=function(a){this.indexexp=a,this.errors.push.apply(this.errors,a.errors)},Eden.AST.LValueComponent.prototype.property=function(a){this.observable=a},Eden.AST.LValueComponent.prototype.generate=function(a){if("index"==this.kind)return"[rt.index("+this.indexexp.generate(a)+")]"},Eden.AST.LValueComponent.prototype.error=fnEdenASTerror,Eden.AST.After=function(){this.type="after",this.errors=[],this.expression=void 0,this.statement=void 0,this.start=0,this.end=0,this.executed=0},Eden.AST.After.prototype.setExpression=function(a){this.expression=a,a.errors.length>0&&this.errors.push.apply(this.errors,a.errors)},Eden.AST.After.prototype.setStatement=function(a){this.statement=a,a.errors.length>0&&this.errors.push.apply(this.errors,a.errors)},Eden.AST.After.prototype.generate=function(a,b){void 0===b&&(b="eden.root.scope");var c="(function() {"+this.statement.generate(a,b)+"})",d=this.expression.generate(a,b);return this.expression.doesReturnBound&&this.expression.doesReturnBound()&&(d+=".value"),"setTimeout("+c+", "+d+");\n"},Eden.AST.After.prototype.execute=function(ctx,base,scope){var statement="(function() { var scope = eden.root.scope;\n"+this.statement.generate(ctx,"root.scope")+"})";setTimeout(eval(statement),this.expression.execute(ctx,base,scope))},Eden.AST.After.prototype.setSource=function(a,b){this.start=a,this.end=b},Eden.AST.After.prototype.error=fnEdenASTerror,Eden.AST.Require=function(){this.type="require",this.errors=[],this.expression=void 0,this.start=0,this.end=0,this.executed=0},Eden.AST.Require.prototype.setExpression=function(a){this.expression=a,a.errors.length>0&&this.errors.push.apply(this.errors,a.errors)},Eden.AST.Require.prototype.generate=function(a){return"edenUI.loadPlugin("+this.expression.generate(a,"scope")+");"},Eden.AST.Require.prototype.execute=function(a,b,c){this.executed=1,edenUI.loadPlugin(this.expression.execute(a,b,c))},Eden.AST.Require.prototype.setSource=function(a,b){this.start=a,this.end=b},Eden.AST.Require.prototype.error=fnEdenASTerror,Eden.AST.Include=function(){this.type="include",this.errors=[],this.expression=void 0,this.start=0,this.end=0,this.executed=0},Eden.AST.Include.prototype.prepend=function(a){this.expression=a,a.errors.length>0&&this.errors.push.apply(this.errors,a.errors)},Eden.AST.Include.prototype.generate=function(a){return"eden.include2("+this.expression.generate(a,"scope")+");"},Eden.AST.Include.prototype.execute=function(a,b,c){this.executed=1,eden.root.base.include2(this.expression.execute(a,b,c))},Eden.AST.Include.prototype.setSource=function(a,b){this.start=a,this.end=b},Eden.AST.Include.prototype.error=fnEdenASTerror,
Eden.AST.Import=function(){this.type="import",this.errors=[],this.path="",this.start=0,this.end=0,this.executed=0,this.options=[],this.tag="default"},Eden.AST.Import.prototype.setPath=function(a){this.path=a},Eden.AST.Import.prototype.setTag=function(a){this.tag=a},Eden.AST.Import.prototype.addOption=function(a){if("local"==a){if(this.options.indexOf("local")>=0)return!0;if(this.options.indexOf("remote")>=0)return!1;if(this.options.indexOf("rebase")>=0)return!1}else if("remote"==a){if(this.options.indexOf("local")>=0)return!1;if(this.options.indexOf("remote")>=0)return!0;if(this.options.indexOf("rebase")>=0)return!1}else if("rebase"==a){if(this.options.indexOf("local")>=0)return!1;if(this.options.indexOf("remote")>=0)return!1;if(this.options.indexOf("rebase")>=0)return!0}else if("noexec"==a){if(this.options.indexOf("noexec")>=0)return!0;if(this.options.indexOf("force")>=0)return!1}else if("force"==a){if(this.options.indexOf("noexec")>=0)return!1;if(this.options.indexOf("force")>=0)return!0}return this.options.push(a),!0},Eden.AST.Import.prototype.generate=function(a){return'Eden.Agent.importAgent("'+this.path+'");'},Eden.AST.Import.prototype.execute=function(a,b,c,d){this.executed=1;var e=this;eden.peer&&d&&!d.loading&&eden.peer.imports(this.path,this.tag,this.options),Eden.Agent.importAgent(this.path,this.tag,this.options,function(a,c){if(a){for(var d=0;d<b.imports.length;d++)if(b.imports[d]===a)return;b.imports.push(a)}else e.executed=3,e.errors.push(new Eden.RuntimeError(b,Eden.RuntimeError.NOAGENT,e,'"'+e.path+"@"+e.tag+'" does not exist: '+c)),e.parent&&(e.parent.executed=3)})},Eden.AST.Import.prototype.setSource=function(a,b){this.start=a,this.end=b},Eden.AST.Import.prototype.error=fnEdenASTerror,Eden.AST.Append=function(){this.type="append",this.destination=void 0,this.index=void 0,this.errors=[],this.start=0,this.end=0},Eden.AST.Append.prototype.setDest=function(a){this.destination=a,a.errors.length>0&&this.errors.push.apply(this.errors,a.errors)},Eden.AST.Append.prototype.setIndex=function(a){this.index=a,a.errors.length>0&&this.errors.push.apply(this.errors,a.errors)},Eden.AST.Append.prototype.generate=function(a){var b=this.index.generate(a,"scope");this.index.doesReturnBound&&this.index.doesReturnBound()&&(b+=".value");var c=this.destination.generate(a);return this.destination.islocal?c+".push("+b+");\n":c+".mutate(scope, function(s) { scope.lookup(s.name).value.push("+b+"); }, this);"},Eden.AST.Append.prototype.execute=function(a,b,c){this.executed=1;var d=this.index.execute(a,b,c);d instanceof BoundValue&&(d=d.value),eden.root.lookup(this.destination.name).mutate(c,function(a){a.value().push(d)},void 0)},Eden.AST.Append.prototype.setSource=function(a,b){this.start=a,this.end=b},Eden.AST.Append.prototype.error=fnEdenASTerror,Eden.AST.Insert=function(){this.type="insert",this.destination=void 0,this.index=void 0,this.value=void 0,this.errors=[],this.start=0,this.end=0,this.executed=0},Eden.AST.Insert.prototype.setDest=function(a){this.destination=a,a.errors.length>0&&this.errors.push.apply(this.errors,a.errors)},Eden.AST.Insert.prototype.setIndex=function(a){this.index=a,a.errors.length>0&&this.errors.push.apply(this.errors,a.errors)},Eden.AST.Insert.prototype.setValue=function(a){this.value=a,a.errors.length>0&&this.errors.push.apply(this.errors,a.errors)},Eden.AST.Insert.prototype.generate=function(a){var b=this.index.generate(a,"scope");this.index.doesReturnBound&&this.index.doesReturnBound()&&(b+=".value");var c=this.value.generate(a,"scope");this.value.doesReturnBound&&this.value.doesReturnBound()&&(c+=".value");var d=this.destination.generate(a);return this.destination.islocal?d+".splice(rt.index("+b+"), 0, ("+c+"));":d+".mutate(scope, function(s) { scope.lookup(s.name).value.splice(rt.index("+b+"), 0, ("+c+")); }, this);"},Eden.AST.Insert.prototype.execute=function(a,b,c){this.executed=1;var d=this.index.execute(a,b,c),e=this.value.execute(a,b,c);d instanceof BoundValue&&(d=d.value),e instanceof BoundValue&&(e=e.value),eden.root.lookup(this.destination.name).mutate(c,function(a){a.value().splice(d-1,0,e)},void 0)},Eden.AST.Insert.prototype.setSource=function(a,b){this.start=a,this.end=b},Eden.AST.Insert.prototype.error=fnEdenASTerror,Eden.AST.Delete=function(){this.type="delete",this.destination=void 0,this.index=void 0,this.errors=[],this.start=0,this.end=0,this.executed=0},Eden.AST.Delete.prototype.setDest=function(a){this.destination=a,a.errors.length>0&&this.errors.push.apply(this.errors,a.errors)},Eden.AST.Delete.prototype.setIndex=function(a){this.index=a,a.errors.length>0&&this.errors.push.apply(this.errors,a.errors)},Eden.AST.Delete.prototype.generate=function(a){var b=this.index.generate(a,"scope");this.index.doesReturnBound&&this.index.doesReturnBound()&&(b+=".value");var c=this.destination.generate(a);return c+".mutate(scope, function(s) { scope.lookup(s.name).value.splice(rt.index("+b+"), 1); }, this);"},Eden.AST.Delete.prototype.execute=function(a,b,c){this.executed=1;var d=this.index.execute(a,b,c);d instanceof BoundValue&&(d=d.value),eden.root.lookup(this.destination.name).mutate(c,function(a){a.value().splice(d-1,1)},void 0)},Eden.AST.Delete.prototype.setSource=function(a,b){this.start=a,this.end=b},Eden.AST.Delete.prototype.error=fnEdenASTerror,Eden.AST.Definition=function(a){this.type="definition",this.parent=void 0,this.errors=a.errors,this.expression=a,this.lvalue=void 0,this.start=0,this.end=0,this.dependencies={},this.scopes=[],this.backtickCount=0,this.executed=0,this.locals=void 0},Eden.AST.Definition.prototype.getParameterByNumber=function(a){if(this.parent&&this.parent.getParameterByNumber)return this.parent.getParameterByNumber(a)},Eden.AST.Definition.prototype.left=function(a){this.lvalue=a,a.errors.length>0&&this.errors.push.apply(this.errors,a.errors)},Eden.AST.Definition.prototype.setSource=function(a,b){this.start=a,this.end=b},Eden.AST.Definition.prototype.generateDef=function(a){var b="function(context, scope, cache) {\n";this.locals=a?a.locals:void 0;var c=this.expression.generate(this,"scope");if(this.scopes.length>0){b+="\tvar _scopes = [];\n";for(var d=0;d<this.scopes.length;d++)b+="\t_scopes.push("+this.scopes[d],b+=");\n"}return this.expression.doesReturnBound&&this.expression.doesReturnBound()?(b+="\t var result = "+c+";\n",b+="\tif (cache) cache.scope = result.scope;\n",b+=0==this.scopes.length?"\treturn edenCopy(result.value);\n}":"\treturn result.value;\n}"):(b+="\tif (cache) cache.scope = scope;\n",b+="\treturn "+c+";\n}"),b},Eden.AST.Definition.prototype.generate=function(a){var b=this.lvalue.generate(a);if(this.lvalue.islocal)return"";if(this.lvalue.hasListIndices()){var c=this.lvalue.generateIndexList(this,"scope");b+=".addExtension("+this.lvalue.generateIdStr()+", function(context, scope, value) {\n\tvalue",b+=c+" = ",b+=this.expression.generate(this,"scope"),this.expression.doesReturnBound&&this.expression.doesReturnBound()&&(b+=".value");var d=[];for(var e in this.dependencies)d.push(e);return b=b+";\n}, undefined, this, "+JSON.stringify(d),b+=");\n"}b+=".define("+this.generateDef(a);var d=[];for(var e in this.dependencies)d.push(e);return b=b+", this, "+JSON.stringify(d)+");\n"},Eden.AST.Definition.prototype.execute=function(ctx,base,scope,agent){this.executed=1;var source=base.getSource(this),sym=this.lvalue.getSymbol(ctx,base,scope);if(this.lvalue.hasListIndices()){var rhs="(function(context,scope,value) { value";rhs+=this.lvalue.generateIndexList(this,"scope")+" = ",rhs+=this.expression.generate(this,"scope"),this.expression.doesReturnBound&&this.expression.doesReturnBound()&&(rhs+=".value"),rhs+=";})";var deps=[];for(var d in this.dependencies)deps.push(d);sym.addExtension(this.lvalue.generateIdStr(),eval(rhs),source,void 0,deps)}else{var rhs="("+this.generateDef(ctx)+")",deps=[];for(var d in this.dependencies)deps.push(d);sym.eden_definition=base.getSource(this),void 0===agent&&console.trace("UNDEF AGENT: "+source),eden.peer&&agent&&!agent.loading&&eden.peer.define(sym.name,source,rhs,deps),sym.define(eval(rhs),agent,deps)}},Eden.AST.Definition.prototype.error=fnEdenASTerror,Eden.AST.Assignment=function(a){this.type="assignment",this.parent=void 0,this.errors=a?a.errors:[],this.expression=a,this.lvalue=void 0,this.start=0,this.end=0,this.scopes=[],this.backtickCount=0,this.executed=0,this.compiled=void 0,this.dirty=!1,this.value=void 0},Eden.AST.Assignment.prototype.getParameterByNumber=function(a){if(this.parent&&this.parent.getParameterByNumber){var b=this.parent.getParameterByNumber(a);return b}},Eden.AST.Assignment.prototype.setSource=function(a,b){this.start=a,this.end=b},Eden.AST.Assignment.prototype.left=function(a){this.lvalue=a,a.errors.length>0&&this.errors.push.apply(this.errors,a.errors)},Eden.AST.Assignment.prototype.generate=function(a){var b=this.lvalue.generate(a);return this.lvalue.islocal?(b+=" = ",b+=this.expression.generate(a,"scope"),this.expression.doesReturnBound&&this.expression.doesReturnBound()&&(b+=".value"),b+=";\n"):this.lvalue.hasListIndices()?(b+=".listAssign(",b+=this.expression.generate(a,"scope"),this.expression.doesReturnBound&&this.expression.doesReturnBound()&&(b+=".value"),b+=", scope, this, false, ",b+=this.lvalue.generateCompList(a,"scope"),b+=");\n"):(b+=".assign(\n\t",b+=this.expression.generate(a,"scope"),this.expression.doesReturnBound&&this.expression.doesReturnBound()&&(b+=".value"),b+=", scope, this);\n")},Eden.AST.Assignment.prototype.compile=function(ctx){if(!this.compiled||this.dirty){this.dirty=!1,ctx?ctx.scopes=this.scopes:ctx=this;var rhs="(function(context,scope) { \n",express=this.expression.generate(ctx,"scope");if(ctx&&ctx.dirty&&(ctx.dirty=!1,this.dirty=!0),this.scopes.length>0){rhs+="\tvar _scopes = [];\n";for(var i=0;i<this.scopes.length;i++)rhs+="\t_scopes.push("+this.scopes[i],rhs+=");\n"}rhs+="return "+express,this.expression.doesReturnBound&&this.expression.doesReturnBound()&&(rhs+=".value"),rhs+=";})",this.compiled=eval(rhs)}},Eden.AST.Assignment.prototype.execute=function(a,b,c,d){if(void 0!==this.expression){this.executed=1,this.compile(a);try{var e=this.lvalue.getSymbol(a,b,c);this.lvalue.hasListIndices()?(this.value=this.compiled.call(e,eden.root,c),e.listAssign(this.value,c,d,!1,this.lvalue.executeCompList(a,c))):(this.value=this.compiled.call(e,eden.root,c),e.assign(this.value,c,d),eden.peer&&d&&!d.loading&&eden.peer.assign(e.name,this.value))}catch(f){this.errors.push(new Eden.RuntimeError(b,Eden.RuntimeError.ASSIGNEXEC,this,f))}}},Eden.AST.Assignment.prototype.error=fnEdenASTerror,Eden.AST.Modify=function(a,b){this.type="modify",this.parent=void 0,this.errors=b?b.errors:[],this.kind=a,this.expression=b,this.lvalue=void 0,this.start=0,this.end=0,this.executed=0,this.scopes=[]},Eden.AST.Modify.prototype.getParameterByNumber=function(a){if(this.parent&&this.parent.getParameterByNumber)return this.parent.getParameterByNumber(a)},Eden.AST.Modify.prototype.setSource=function(a,b){this.start=a,this.end=b},Eden.AST.Modify.prototype.left=function(a){this.lvalue=a,a.errors.length>0&&this.errors.push.apply(this.errors,a.errors)},Eden.AST.Modify.prototype.generate=function(a){var b=this.lvalue.generate(a),c=b;c+=0==this.lvalue.islocal?".assign(\n\t":" = ";var d;return this.expression&&(d=this.expression.generate(a,"scope"),this.expression.doesReturnBound&&this.expression.doesReturnBound()&&(d+=".value")),"+="==this.kind?(c+=b,0==this.lvalue.islocal&&(c+=".value(scope)"),c+=" + "+d):"-="==this.kind?(c+=b,0==this.lvalue.islocal&&(c+=".value(scope)"),c+=" - "+d):"/="==this.kind?(c+=b,0==this.lvalue.islocal&&(c+=".value(scope)"),c+=" / "+d):"*="==this.kind?(c+=b,0==this.lvalue.islocal&&(c+=".value(scope)"),c+=" * "+d):"++"==this.kind?(c+=b,0==this.lvalue.islocal&&(c+=".value(scope)"),c+="+1"):"--"==this.kind&&(c+=b,0==this.lvalue.islocal&&(c+=".value(scope)"),c+="-1"),c+=0==this.lvalue.islocal?", scope);\n":";\n"},Eden.AST.Modify.prototype.execute=function(ctx,base,scope,agent){var _scopes=[];this.executed=1;var sym=this.lvalue.getSymbol(ctx,base);if("++"==this.kind)sym.assign(sym.value(scope)+1,scope,agent);else if("--"==this.kind)sym.assign(sym.value(scope)-1,scope,agent);else{var rhs="(function(context,scope) { return ";rhs+=this.expression.generate(this,"scope"),this.expression.doesReturnBound&&this.expression.doesReturnBound()&&(rhs+=".value"),rhs+=";})";for(var context=eden.root,i=0;i<this.scopes.length;i++)_scopes.push(eval(this.scopes[i]));switch(this.scopes=[],this.kind){case"+=":sym.assign(rt.add(sym.value(scope),eval(rhs)(context,scope)),scope,agent);break;case"-=":sym.assign(rt.subtract(sym.value(scope),eval(rhs)(context,scope)),scope,agent);break;case"/=":sym.assign(rt.divide(sym.value(scope),eval(rhs)(context,scope)),scope,agent);break;case"*=":sym.assign(rt.multiply(sym.value(scope),eval(rhs)(context,scope)),scope,agent)}}},Eden.AST.Modify.prototype.error=fnEdenASTerror,Eden.AST.Subscribers=function(){this.type="subscribers",this.errors=[],this.list=[],this.lvalue=void 0,this.start=void 0,this.end=void 0},Eden.AST.Subscribers.prototype.left=function(a){this.lvalue=a,a.errors.length>0&&this.errors.push.apply(this.errors,a.errors)},Eden.AST.Subscribers.prototype.setSource=function(a,b){this.start=a,this.end=b},Eden.AST.Subscribers.prototype.execute=function(a,b,c){},Eden.AST.Subscribers.prototype.setList=function(a){this.list=a},Eden.AST.Subscribers.prototype.error=fnEdenASTerror,Eden.AST.Primary=function(){this.type="primary",this.errors=[],this.observable="",this.extras=[],this.backtick=void 0,this.returnsbound=!0},Eden.AST.Primary.prototype.setBackticks=function(a){this.backtick=a,this.errors.push.apply(this.errors,a.errors)},Eden.AST.Primary.prototype.setObservable=function(a){this.observable=a},Eden.AST.Primary.prototype.getObservable=function(){return this.observable},Eden.AST.Primary.prototype.doesReturnBound=function(){return this.returnsbound},Eden.AST.Primary.prototype.prepend=function(a){this.extras.unshift(a),"functioncall"==a.type&&(this.returnsbound=!1),a.errors.length>0&&this.errors.push.apply(this.errors,a.errors)},Eden.AST.Primary.prototype.generate=function(a,b,c){if(a&&a.locals&&a.locals.list.indexOf(this.observable)!=-1){this.returnsbound=!1;for(var d=this.observable,e=0;e<this.extras.length;e++)d+=this.extras[e].generate(a,b);return d}if(a&&a.params){var f=a.params.list.indexOf(this.observable);if(f!=-1){this.returnsbound=!1;for(var d=this.observable,e=0;e<this.extras.length;e++)d+=this.extras[e].generate(a,b);return d}}var d;if("__BACKTICKS__"==this.observable){var g=0;a&&void 0!==a.backtickCount&&(g=a.backtickCount,a.backtickCount++),d="this.subscribeDynamic("+g+","+this.backtick.generate(a,b),this.backtick.doesReturnBound&&this.backtick.doesReturnBound()&&(d+=".value"),d+=","+b+")"}else a&&a.dependencies&&(a.dependencies[this.observable]=!0),d='context.lookup("'+this.observable+'")';if(0==this.extras.length)d+=".boundValue("+b+")";else{this.returnsbound=!!c,d+=c?".boundValue("+b+",":".value("+b+")";for(var e=0;e<this.extras.length;e++)d+=this.extras[e].generate(a,b);c&&(d+=")")}return d},Eden.AST.Primary.prototype.execute=function(ctx,base,scope){var rhs="(function(context,scope) { return ";return rhs+=this.generate(ctx,"scope"),rhs+=";})",eval(rhs)(eden.root,scope)},Eden.AST.Primary.prototype.error=fnEdenASTerror,Eden.AST.If=function(){this.type="if",this.parent=void 0,this.errors=[],this.condition="",this.statement=void 0,this.elsestatement=void 0,this.start=0,this.end=0,this.executed=0},Eden.AST.If.prototype.setSource=function(a,b){this.start=a,this.end=b},Eden.AST.If.prototype.setCondition=function(a){this.condition=a,this.errors.push.apply(this.errors,a.errors)},Eden.AST.If.prototype.setStatement=function(a){this.statement=a,a&&(a.parent=this,this.errors.push.apply(this.errors,a.errors))},Eden.AST.If.prototype.setElse=function(a){this.elsestatement=a,a&&(a.parent=this,this.errors.push.apply(this.errors,a.errors))},Eden.AST.If.prototype.generate=function(a){var b="if (";return b+=this.condition.generate(a,"scope"),this.condition.doesReturnBound&&this.condition.doesReturnBound()&&(b+=".value"),b+=") ",b+=this.statement.generate(a)+" ",this.elsestatement&&(b+="\nelse "+this.elsestatement.generate(a)+"\n"),b},Eden.AST.If.prototype.getCondition=function(ctx){var cond="(function(context,scope) { return ";return cond+=this.condition.generate(ctx,"scope"),this.condition.doesReturnBound&&this.condition.doesReturnBound()&&(cond+=".value"),cond+=";})",eval(cond)},Eden.AST.If.prototype.execute=function(a,b,c,d){return this.executed=1,this.getCondition(a)(eden.root,c)?[this.statement]:(this.executed=2,this.elsestatement?[this.elsestatement]:void 0)},Eden.AST.If.prototype.error=fnEdenASTerror,Eden.AST.Switch=function(){this.type="switch",this.parent=void 0,this.errors=[],this.expression="",this.statement=void 0,this.start=0,this.end=0},Eden.AST.Switch.prototype.setSource=function(a,b){this.start=a,this.end=b},Eden.AST.Switch.prototype.setExpression=function(a){this.expression=a,this.errors.push.apply(this.errors,a.errors)},Eden.AST.Switch.prototype.setStatement=function(a){this.statement=a,this.errors.push.apply(this.errors,a.errors)},Eden.AST.Switch.prototype.generate=function(a,b){void 0===b&&(b="eden.root.scope");var c="switch(";return c+=this.expression.generate(a,b),this.expression.doesReturnBound&&this.expression.doesReturnBound()&&(c+=".value"),c+=") "+this.statement.generate(a,b)},Eden.AST.Switch.prototype.execute=function(ctx,base,scope){var swi="(function(context,scope) { ";swi+=this.generate(ctx,"scope"),swi+=" })",eval(swi)(eden.root,scope)},Eden.AST.Switch.prototype.error=fnEdenASTerror,Eden.AST.FunctionCall=function(){this.type="functioncall",this.parent=void 0,this.errors=[],this.lvalue=void 0,this.params=void 0,this.start=0,this.end=0,this.executed=0},Eden.AST.FunctionCall.prototype.setSource=function(a,b){this.start=a,this.end=b},Eden.AST.FunctionCall.prototype.setParams=function(a){this.params=a;for(var b=0;b<a.length;b++)this.errors.push.apply(this.errors,a[b].errors)},Eden.AST.FunctionCall.prototype.left=function(a){this.lvalue=a,a.errors.length>0&&this.errors.push.apply(this.errors,a.errors)},Eden.AST.FunctionCall.prototype.generate=function(a,b){if(void 0===this.lvalue){var c="(";if(this.params)for(var d=0;d<this.params.length;d++){var e=this.params[d].generate(a,b);this.params[d].doesReturnBound&&this.params[d].doesReturnBound()&&(e+=".value"),c+="("+e+")",d!=this.params.length-1&&(c+=",")}return c+")"}var f=this.lvalue.generate(a),c=f+".value(scope).call("+f;if(this.params)for(var d=0;d<this.params.length;d++){c+=",";var e=this.params[d].generate(a,b);this.params[d].doesReturnBound&&this.params[d].doesReturnBound()&&(e+=".value"),c+="("+e+")"}return c+");"},Eden.AST.FunctionCall.prototype.execute=function(ctx,base,scope){this.executed=1;var func="(function(context,scope) { return "+this.generate(ctx,"scope")+"; })";try{return eval(func).call(ctx,eden.root,scope)}catch(e){this.errors.push(new Eden.RuntimeError(base,Eden.RuntimeError.FUNCCALL,this,e)),console.error("Details: "+e+"\nFunction: "+this.lvalue.name)}},Eden.AST.FunctionCall.prototype.error=fnEdenASTerror,Eden.AST.DummyStatement=function(){this.type="dummy",this.parent=void 0,this.errors=[]},Eden.AST.DummyStatement.prototype.setSource=function(a,b){this.start=a,this.end=b},Eden.AST.DummyStatement.prototype.generate=function(){return""},Eden.AST.DummyStatement.prototype.execute=function(){},Eden.AST.DummyStatement.prototype.error=fnEdenASTerror,Eden.AST.Action=function(){this.type="action",this.parent=void 0,this.kindofaction="touch",this.errors=[],this.triggers=[],this.body=void 0,this.name="",this.start=0,this.end=0,this.executed=0},Eden.AST.Action.prototype.setSource=function(a,b){this.start=a,this.end=b},Eden.AST.Action.prototype.kind=function(a){this.kindofaction=a},Eden.AST.Action.prototype.setBody=function(a){this.body=a,a&&(a.parent=this,this.errors.push.apply(this.errors,a.errors))},Eden.AST.Action.prototype.generate=function(a){var b=this.body.generate(a),c='context.lookup("'+this.name+'").define('+b+', {name: "execute"})';return this.triggers.length>0&&(c+=".observe("+JSON.stringify(this.triggers)+");\n"),c},Eden.AST.Action.prototype.execute=function(ctx,base,scope){this.executed=1;var body=this.body.generate(ctx),sym=eden.root.lookup(this.name);sym.eden_definition=base.getSource(this),this.triggers.length>0?sym.define(eval(body),{name:"execute"},[]).observe(this.triggers):sym.define(eval(body),{name:"execute"},[])},Eden.AST.Action.prototype.error=fnEdenASTerror,Eden.AST.Function=function(){this.type="function",this.parent=void 0,this.errors=[],this.body=void 0,this.name="",this.start=0,this.end=0,this.executed=0},Eden.AST.Function.prototype.setSource=function(a,b){this.start=a,this.end=b},Eden.AST.Function.prototype.setBody=function(a){this.body=a,a&&(a.parent=this,this.errors.push.apply(this.errors,a.errors))},Eden.AST.Function.prototype.generate=function(a){var b=this.body.generate(a),c='context.lookup("'+this.name+'").define('+b+', {name: "execute"}, []);\n';return c},Eden.AST.Function.prototype.execute=function(ctx,base,scope,agent){this.executed=1;var body=this.body.generate(ctx),sym=eden.root.lookup(this.name);sym.eden_definition=base.getSource(this),sym.define(eval(body),agent,[])},Eden.AST.Function.prototype.error=fnEdenASTerror;Eden.AST.Return=function(){this.type="return",this.parent=void 0,this.errors=[],this.result=void 0,this.start=0,this.end=0};Eden.AST.Return.prototype.setSource=function(a,b){this.start=a,this.end=b},Eden.AST.Return.prototype.error=fnEdenASTerror,Eden.AST.Return.prototype.setResult=function(a){this.result=a,this.errors.push.apply(this.errors,a.errors)},Eden.AST.Return.prototype.generate=function(a){if(this.result){var b=this.result.generate(a,"scope");return this.result.doesReturnBound&&this.result.doesReturnBound()&&(b+=".value"),"return "+b+";\n"}return"return;\n"},Eden.AST.While=function(){this.type="while",this.parent=void 0,this.errors=[],this.condition=void 0,this.statement=void 0,this.start=0,this.end=0},Eden.AST.While.prototype.error=fnEdenASTerror,Eden.AST.While.prototype.setSource=function(a,b){this.start=a,this.end=b},Eden.AST.While.prototype.setCondition=function(a){this.condition=a,this.errors.push.apply(this.errors,a.errors)},Eden.AST.While.prototype.setStatement=function(a){this.statement=a,a&&this.errors.push.apply(this.errors,a.errors)},Eden.AST.While.prototype.generate=function(a){var b="while ("+this.condition.generate(a,"scope");return this.condition.doesReturnBound&&this.doesReturnBound()&&(b+=".value"),b+=") ",b+=this.statement.generate(a)+"\n"},Eden.AST.Do=function(){this.type="do",this.parent=void 0,this.errors=[],this.name=void 0,this.script=void 0,this.start=0,this.end=0,this.executed=0,this.parameters=[]},Eden.AST.Do.prototype.error=fnEdenASTerror,Eden.AST.Do.prototype.setSource=function(a,b){this.start=a,this.end=b},Eden.AST.Do.prototype.addParameter=function(a){this.parameters.push(a),a&&a.errors.length>0&&this.errors.push.apply(this.errors,a.errors)},Eden.AST.Do.prototype.setScript=function(a){this.script=a,this.script&&this.script.errors.length>0&&this.errors.push.apply(this.errors,a.errors)},Eden.AST.Do.prototype.setName=function(a){this.name=a},Eden.AST.Do.prototype.generate=function(a){return""},Eden.AST.Do.prototype.getParameters=function(a,b,c){for(var d=[],e=0;e<this.parameters.length;e++)d.push(this.parameters[e].execute(a,b,c));return d},Eden.AST.Do.prototype.execute=function(a,b,c,d){this.executed=1;var e;return(e=this.script?this.script:b.getActionByName(this.name))?e.execute(a,b,c,d):(this.executed=3,this.errors.push(new Eden.RuntimeError(b,Eden.RuntimeError.ACTIONNAME,this,"Action '"+this.name+"' does not exist")),this.parent&&(this.parent.executed=3),void 0)},Eden.AST.For=function(){this.type="for",this.parent=void 0,this.errors=[],this.sstart=void 0,this.condition=void 0,this.inc=void 0,this.statement=void 0,this.start=0,this.end=0,this.executed=0},Eden.AST.For.prototype.error=fnEdenASTerror,Eden.AST.For.prototype.setSource=function(a,b){this.start=a,this.end=b},Eden.AST.For.prototype.setStart=function(a){this.sstart=a,a&&this.errors.push.apply(this.errors,a.errors)},Eden.AST.For.prototype.setCondition=function(a){this.condition=a,a&&this.errors.push.apply(this.errors,a.errors)},Eden.AST.For.prototype.setIncrement=function(a){this.inc=a,a&&this.errors.push.apply(this.errors,a.errors)},Eden.AST.For.prototype.setStatement=function(a){this.statement=a,a&&this.errors.push.apply(this.errors,a.errors)},Eden.AST.For.prototype.generate=function(a){var b="for (";b+=this.sstart?this.sstart.generate(a)+" ":"; ",b+=this.condition?this.condition.generate(a,"scope")+"; ":"; ";var c=this.inc.generate(a);return";"==c.charAt(c.length-2)&&(c=c.slice(0,-2)),b+=c+")\n",b+=this.statement.generate(a)},Eden.AST.For.prototype.getCondition=function(ctx){if(this.compiled){var express=this.condition.generate(ctx,"scope");this.condition.doesReturnBound&&this.condition.doesReturnBound()&&(express+=".value");var expfunc=eval("(function(context,scope){ return "+express+"; })");return this.compiled=expfunc,expfunc}return this.compiled},Eden.AST.For.prototype.execute=function(a,b,c){return this.executed=1,this.sstart&&!this.started?[this.sstart,this]:this.getCondition(a)(eden.root,c)?[this.statement,this.inc,this]:void 0},Eden.AST.Default=function(){this.type="default",this.parent=void 0,this.errors=[],this.start=0,this.end=0},Eden.AST.Default.prototype.error=fnEdenASTerror,Eden.AST.Default.prototype.setSource=function(a,b){this.start=a,this.end=b},Eden.AST.Default.prototype.generate=function(a,b){return"default: "},Eden.AST.Case=function(){this.type="case",this.parent=void 0,this.datatype="",this.literal=void 0,this.errors=[],this.start=0,this.end=0},Eden.AST.Case.prototype.setLiteral=function(a,b){this.datatype=a,this.literal=b},Eden.AST.Case.prototype.setSource=function(a,b){this.start=a,this.end=b},Eden.AST.Case.prototype.generate=function(a,b){return"string"==typeof this.literal?'case "'+this.literal+'": ':"case "+this.literal+": "},Eden.AST.Case.prototype.error=fnEdenASTerror,Eden.AST.Continue=function(){this.type="continue",this.parent=void 0,this.errors=[],this.start=0,this.end=0},Eden.AST.Continue.prototype.error=fnEdenASTerror,Eden.AST.Continue.prototype.setSource=function(a,b){this.start=a,this.end=b},Eden.AST.Continue.prototype.generate=function(a,b){return"continue; "},Eden.AST.Break=function(){this.type="break",this.parent=void 0,this.errors=[],this.start=0,this.end=0},Eden.AST.Break.prototype.error=fnEdenASTerror,Eden.AST.Break.prototype.setSource=function(a,b){this.start=a,this.end=b},Eden.AST.Break.prototype.generate=function(a,b){return"break; "},Eden.AST.Wait=function(){this.type="wait",this.parent=void 0,this.errors=[],this.start=0,this.end=0,this.delay=void 0,this.executed=0,this.compiled_delay=void 0},Eden.AST.Wait.prototype.error=fnEdenASTerror,Eden.AST.Wait.prototype.setSource=function(a,b){this.start=a,this.end=b},Eden.AST.Wait.prototype.setDelay=function(a){this.delay=a,a&&a.errors.length>0&&this.errors.push.apply(this.errors,a.errors)},Eden.AST.Wait.prototype.compile=function(ctx){if(void 0!==this.delay&&!this.compiled_delay){var source="(function(context,scope) { return ";source+=this.delay.generate(ctx,"scope"),this.delay.doesReturnBound&&this.delay.doesReturnBound()&&(source+=".value"),source+=";})",this.compiled_delay=eval(source)}},Eden.AST.Wait.prototype.generate=function(a,b){return"yield "+this.delay+";"},Eden.AST.CodeBlock=function(){this.type="codeblock",this.errors=[],this.params=void 0,this.locals=void 0,this.script=void 0,this.parent=void 0},Eden.AST.CodeBlock.prototype.error=fnEdenASTerror,Eden.AST.CodeBlock.prototype.setLocals=function(a){this.locals=a,this.errors.push.apply(this.errors,a.errors)},Eden.AST.CodeBlock.prototype.setParams=function(a){this.params=a,this.errors.push.apply(this.errors,a.errors)},Eden.AST.CodeBlock.prototype.setScript=function(a){this.script=a,a&&(a.parent=this,this.errors.push.apply(this.errors,a.errors))},Eden.AST.CodeBlock.prototype.generate=function(a){var b="(function(context, scope) {\n";if(this.locals&&this.locals.list)for(var c=0;c<this.locals.list.length;c++)b+="var "+this.locals.list[c]+";\n";if(b+="return (function() {\n",this.params&&this.params.list)for(var c=0;c<this.params.list.length;c++)b+="var "+this.params.list[c]+" = edenCopy(arguments["+c+"]);\n";return b+=this.script.generate(this,"scope")+"}); })"},Eden.AST.When=function(){this.type="when",this.name="*When",this.id=void 0,this.errors=[],this.expression=void 0,this.statement=void 0,this.start=0,this.end=0,this.executed=0,this.parent=void 0,this.dependencies={},this.active=!1,this.compiled=void 0,this.scope=void 0,this.compScope=void 0,this.base=void 0,this.scopes=[],this.doxyComment=void 0},Eden.AST.When.prototype.getSource=function(){return this.base.getSource(this)},Eden.AST.When.prototype.getLine=function(){return this.line},Eden.AST.When.prototype.doDebug=function(){return this.doxyComment&&this.doxyComment.getControls()["@debug"]},Eden.AST.When.prototype.setScope=function(a){this.scope=a},Eden.AST.When.prototype.subscribeDynamic=function(a,b){if(this.base.triggers[b])this.base.triggers[b].indexOf(this)==-1&&this.base.triggers[b].push(this);else{var c=[this];this.base.triggers[b]=c}return eden.root.lookup(b)},Eden.AST.When.prototype.setExpression=function(a){this.expression=a,a&&this.errors.push.apply(this.errors,a.errors)},Eden.AST.When.prototype.setStatement=function(a){this.statement=a,a&&this.errors.push.apply(this.errors,a.errors)},Eden.AST.When.prototype.setSource=function(a,b){this.start=a,this.end=b},Eden.AST.When.prototype.generate=function(){return""},Eden.AST.When.prototype.compile=function(base){this.base=base;var cond="(function(context,scope) { return ";cond+=this.expression.generate(this,"scope"),this.expression.doesReturnBound&&this.expression.doesReturnBound()&&(cond+=".value"),cond+=";})",this.compiled=eval(cond);for(var d in this.dependencies)if(base.triggers[d])base.triggers[d].indexOf(this)==-1&&base.triggers[d].push(this);else{var trigs=[this];base.triggers[d]=trigs}return this.scope&&void 0===this.compScope&&(this.compScope=eval("(function (context, scope) { return "+this.scope.generateConstructor(this,"scope")+"; })")(eden.root,eden.root.scope)),""},Eden.AST.When.prototype.execute=function(a,b,c){this.executed=1;var c=eden.root.scope;if(this.compScope&&(c=this.compScope),c.range){for(c.range=!1;;)if(this.compiled(eden.root,c)?this.statement.execute(a,b,c,this):this.executed=2,0==c.next())break;c.range=!0}else{if(this.compiled(eden.root,c))return[this.statement];this.executed=2}},Eden.AST.When.prototype.error=fnEdenASTerror,Eden.AST.LList=function(){this.type="lvaluelist",this.errors=[],this.llist=[]},Eden.AST.LList.prototype.append=function(a){this.llist.push(a),this.errors.push.apply(this.errors,a.errors)},Eden.AST.LList.prototype.error=fnEdenASTerror,Eden.AST.Declarations=function(){this.type="declarations",this.errors=[],this.list=[]},Eden.AST.Declarations.prototype.error=fnEdenASTerror,Eden.AST.Script=function(){this.type="script",this.name=void 0,this.parent=void 0,this.errors=[],this.statements=[],this.start=0,this.end=0,this.executed=0,this.active=!1,this.parameters=void 0,this.locals=void 0,this.onfinish=void 0,this.base=void 0},Eden.AST.Script.prototype.getSource=function(){return this.base.getSource(this)},Eden.AST.Script.prototype.getLine=function(){return this.line},Eden.AST.Script.prototype.setLocals=function(a){this.locals=a,a&&this.errors.push.apply(this.errors,a.errors)},Eden.AST.Script.prototype.subscribeDynamic=function(a,b){return console.log("SUBDYN: "+b),eden.root.lookup(b)},Eden.AST.Script.prototype.getParameterByNumber=function(a){if(this.parameters)return this.parameters[a-1]},Eden.AST.Script.prototype.error=fnEdenASTerror,Eden.AST.Script.prototype.setName=function(a){this.name=a},Eden.AST.Script.prototype.setSource=function(a,b){this.start=a,this.end=b},Eden.AST.Script.prototype.append=function(a){
this.statements.push(a),a.errors.length>0&&this.errors.push.apply(this.errors,a.errors)},Eden.AST.Script.prototype.execute=function(a,b,c,d){for(var e=[],f=0;f<this.statements.length;f++)"script"!=this.statements[f].type&&e.push(this.statements[f]);return e},Eden.AST.Script.prototype.generate=function(a,b){for(var c="{\n",d=0;d<this.statements.length;d++)c+=this.statements[d].generate(a,b);return c+="}"},Eden.DB={directory:{},meta:{},remoteMeta:{},remoteURL:void 0,username:void 0,userid:void 0,repositories:["http://jseden.dcs.warwick.ac.uk/projectmanager","http://localhost:18880"],repoindex:0,retrycount:0,connected:!1},Eden.DB.listeners={},Eden.DB.emit=emit,Eden.DB.listenTo=listenTo,Eden.DB.Meta=function(){this.remote=!1,this.title="Script View",this.author=void 0,this.saveID=-1,this.tag="origin",this.defaultID=-1,this.latestID=-1,this.publicID=-1,this.file=void 0,this.date=void 0},Eden.DB.Meta.prototype.updateDefault=function(a,b,c,d){if(a>this.defaultID&&(this.defaultID=a),this.latestID==-1&&(this.latestID=a),this.saveID==-1){if(b&&"{"==b.charAt(0)){var e=JSON.parse(b);this.title=e.title,this.thumb=e.thumb,this.tags=e.tags}else this.title=b;this.author=c,this.date=d}},Eden.DB.Meta.prototype.updateLatest=function(a,b,c,d){if(a>this.latestID&&(this.latestID=a),this.saveID==-1&&this.defaultID==-1){if(b&&"{"==b.charAt(0)){var e=JSON.parse(b);this.title=e.title,this.thumb=e.thumb,this.tags=e.tags}else this.title=b;this.author=c,this.date=d}this.defaultID==-1&&(this.defaultID=a)},Eden.DB.Meta.prototype.updatePublicLatest=function(a,b,c,d){if(a>this.publicID&&(this.publicID=a),this.saveID==-1&&this.defaultID==-1){if(b&&"{"==b.charAt(0)){var e=JSON.parse(b);this.title=e.title,this.thumb=e.thumb,this.tags=e.tags}else this.title=b;this.author=c,this.date=d}this.defaultID==-1&&(this.defaultID=a)},Eden.DB.Meta.prototype.updateVersion=function(a,b,c,d,e){if(this.saveID=a,c&&"{"==c.charAt(0)){var f=JSON.parse(c);this.title=f.title,this.thumb=f.thumb,this.tags=f.tags}else this.title=c;this.author=d,this.date=e,b?this.tag=b:this.tag=a},Eden.DB.isConnecting=function(){return void 0!==Eden.DB.remoteURL},Eden.DB.isConnected=function(){return Eden.DB.connected},Eden.DB.isLoggedIn=function(){return void 0!==Eden.DB.username},Eden.DB.logOut=function(a){Eden.DB.isLoggedIn()&&$.ajax({url:Eden.DB.remoteURL+"/logout",type:"get",crossDomain:!0,xhrFields:{withCredentials:!0},success:function(b){function c(){Eden.DB.isConnected()&&void 0===Eden.DB.username&&setTimeout(function(){Eden.DB.getLoginName(function(a){a?Eden.DB.emit("login",[a]):c()})},5e3)}Eden.DB.username=void 0,a&&a(),c()},error:function(a){Eden.DB.disconnect(!0)}})},Eden.DB.connect=function(a,b){function c(a){for(var b in a)a[b].missing=!0,a[b].children&&c(a[b].children)}function d(){Eden.DB.isConnected()&&void 0===Eden.DB.username&&setTimeout(function(){Eden.DB.getLoginName(function(a){a?Eden.DB.emit("login",[a]):d()})},5e3)}Eden.DB.remoteURL=a,c(Eden.DB.directory),Eden.DB.refreshint=setInterval(function(){for(var a in Eden.DB.directory)Eden.DB.directory[a].missing=!0},2e4),Eden.DB.getLoginName(function(c){Eden.DB.isConnected()?(Eden.DB.retrycount=0,Eden.DB.loadDatabaseRoot(function(){b&&b(Eden.DB.isConnected())}),Eden.DB.emit("connected",[a]),c?Eden.DB.emit("login",[c]):d()):b&&b(Eden.DB.isConnected())})},Eden.DB.disconnect=function(a){Eden.DB.remoteURL=void 0,Eden.DB.emit("disconnected",[]),Eden.DB.connected=!1,Eden.DB.refreshint&&(clearInterval(Eden.DB.refreshint),Eden.DB.refreshint=void 0),a&&(Eden.DB.retrycount++,setTimeout(function(){Eden.DB.repoindex>=Eden.DB.repositories.length&&(Eden.DB.repoindex=Eden.DB.repositories.length-1),Eden.DB.connect(Eden.DB.repositories[Eden.DB.repoindex]),Eden.DB.repoindex=(Eden.DB.repoindex+1)%Eden.DB.repositories.length},200*Math.pow(2,Math.ceil(Eden.DB.retrycount/Eden.DB.repositories.length))))},Eden.DB.getLoginName=function(a){Eden.DB.isConnecting()?$.ajax({url:Eden.DB.remoteURL+"/user/details",type:"get",crossDomain:!0,xhrFields:{withCredentials:!0},success:function(b){Eden.DB.connected=!0,null==b||b.error?(Eden.DB.username=void 0,a()):(Eden.DB.username=b.name,Eden.DB.userid=b.id,!b.id||""!=b.name&&b.name||(Eden.DB.username="NoName"),a(Eden.DB.username))},error:function(b){Eden.DB.disconnect(!0),a(void 0)}}):a()},Eden.DB.loadLocalMeta=function(){try{window.localStorage&&(Eden.DB.localMeta=JSON.parse(window.localStorage.getItem("agent_localmeta"))||{})}catch(a){Eden.DB.localMeta={}}Eden.DB.processManifestObject(Eden.DB.localMeta)},Eden.DB.loadDatabaseRoot=function(a){var b=this;Eden.DB.isConnected()&&$.ajax({url:b.remoteURL+"/agent/search",type:"get",crossDomain:!0,xhrFields:{withCredentials:!0},success:function(b){null==b||b.error||Eden.DB.processManifestList(b,!0),a&&a()},error:function(a){Eden.DB.disconnect(!0)}})},Eden.DB.loadManifestFile=function(a){var b=this;$.get(a,function(a){b.processManifestObject(a.meta)},"json")},Eden.DB.loadManifestFile("resources/agents.db.json"),Eden.DB.processManifestObject=function(a){if(a)for(var b in a)this.processManifestEntry(b,a[b])},Eden.DB.processManifestList=function(a,b){if(a)for(var c=0;c<a.length;c++){var d=this.processManifestEntry(a[c].path,a[c]);d.remote=b}},Eden.DB.processManifestEntry=function(a,b){var c=Eden.DB.meta[a];if(void 0===c&&(c=new Eden.DB.Meta),b.versions){if(b.versions.Official.length>0){var d=b.versions.Official[0];c.updateDefault(d.saveID,d.title,d.name,d.date)}if(b.versions.UserLatest.length>0){var d=b.versions.UserLatest[0];c.updateLatest(d.saveID,d.title,d.name,d.date)}if(b.versions.PublicLatest.length>0){var d=b.versions.PublicLatest[0];0==b.versions.UserLatest.length&&c.updateLatest(d.saveID,d.title,d.name,d.date),c.updatePublicLatest(d.saveID,d.title,d.name,d.date)}}if(b.title&&"{"==b.title.charAt(0)){var e=JSON.parse(b.title);c.title=e.title,c.thumb=e.thumb,c.tags=e.tags,console.log("DECODE: "+c.title)}else b.title&&(c.title=b.title);return b.remote&&(c.remote=!0),b.file&&(c.file=b.file),Eden.DB.updateDirectory(a),Eden.DB.meta[a]=c,c},Eden.DB.addLocalMeta=function(a,b){Eden.DB.localMeta[a]=b,edenUI.setOptionValue("agent_localmeta",JSON.stringify(Eden.DB.localMeta))},Eden.DB.updateDirectory=function(a){for(var b=a.split("/"),c=Eden.DB.directory,d=!1,e=0;e<b.length;e++)void 0===c[b[e]]&&(c[b[e]]={missing:!0,children:{}},d=!0),c=c[b[e]].children},Eden.DB.updateMeta=function(a,b,c){var d=Eden.DB.meta[a];console.error("DEPRECATED UPDATEMETA"),console.trace("Meta"),void 0===d&&(d=Eden.DB.remoteMeta[a],void 0===d&&(console.error("NO META"),d={}),Eden.DB.meta[a]=d),d[b]=c},Eden.DB.getDirectory=function(a,b){var c=a.split("/"),d=Eden.DB.directory;if(""==a)return void b(d);for(var e=0;e<c.length;e++){if(void 0===d[c[e]])return void b(void 0);if(d[c[e]].missing){d[c[e]].missing=!1;for(var f in d[c[e]].children)d[c[e]].children[f].missing=!0;if(Eden.DB.isConnected()){var g=c.slice(0,e+1).join("/");return void $.ajax({url:this.remoteURL+"/agent/search?path="+g,type:"get",crossDomain:!0,xhrFields:{withCredentials:!0},success:function(c){if(c&&c.error)return console.error(c),eden.error(c?c.description:"No response from server"),void b(void 0);if(c){if(Eden.DB.processManifestList(c,!0),0==c.length)return void b(void 0);Eden.DB.getDirectory(a,b)}else b(void 0)},error:function(a){Eden.DB.disconnect(!0)}})}}d=d[c[e]].children}b(d)},Eden.DB.upload=function(a,b,c,d,e,f){return void 0===b?(console.error("Attempting to upload agent without meta data: "+a),eden.error("Attempting to upload agent without meta data: "+a),void(f&&f(!1))):void(Eden.DB.isConnected()?$.ajax({url:this.remoteURL+"/agent/add",type:"post",crossDomain:!0,xhrFields:{withCredentials:!0},data:{path:a,parentSaveID:"origin"==b.saveID?void 0:b.saveID,title:b.title,source:c,tag:d,permission:e?"public":void 0},success:function(a){null==a||a.error?(console.error(a),eden.error(a?a.description:"No response from server"),f&&f(!1)):(b.updateVersion(a.saveID,a.tag,b.title,b.name,b.date),f&&f(!0))},error:function(a){Eden.DB.disconnect(!0),f&&f(!1)}}):(console.error("Cannot upload, not connected to server"),f&&f(!1),eden.error("Cannot upload "+a+", not connected to server")))},Eden.DB.createMeta=function(a){return Eden.DB.meta[a]=new Eden.DB.Meta,Eden.DB.meta[a].saveID="origin",Eden.DB.meta[a]},Eden.DB.getVersions=function(a,b){Eden.DB.isConnected()?$.ajax({url:Eden.DB.remoteURL+"/agent/versions?path="+a,type:"get",crossDomain:!0,xhrFields:{withCredentials:!0},success:function(a){b(a)},error:function(a){Eden.DB.disconnect(!0)}}):b(void 0)},Eden.DB.getMeta=function(a,b){var c=a.split("/");c.pop(),c=c.join("/"),Eden.DB.getDirectory(c,function(c){b(a,Eden.DB.meta[a])})},Eden.DB.getSource=function(a,b,c){Eden.DB.getMeta(a,function(a,d){if(void 0===d)return void c(void 0,"No such agent");if("origin"==b)return d.saveID="origin",void c("");if(d.remote&&Eden.DB.isConnected()){var e;if(void 0===b||"default"==b||""==b)if(d.defaultID>=0)e="&version="+d.defaultID;else if(d.latestID>=0)e="&version="+d.latestID;else{if("origin"==d.saveID)return void c("");if(!(d.saveID>=0))return void c("");e="&version="+d.saveID}else if("latest"==b){if(!(d.latestID>=0))return void c("");e="&version="+d.latestID}else if("public"==b)if(d.publicID>=0)e="&version="+d.publicID;else{if(!(d.latestID>=0))return void c("");e="&version="+d.latestID}else e="string"==typeof b?"&tag="+b:"&version="+b;$.ajax({url:Eden.DB.remoteURL+"/agent/get?path="+a+e,type:"get",crossDomain:!0,xhrFields:{withCredentials:!0},success:function(e){null==e||e.error?(c(void 0,"No such version"),console.error("No such version "+b+" for "+a)):(d.updateVersion(e.saveID,e.tag,e.title,e.name,e.date),c(e.source))},error:function(a){Eden.DB.disconnect(!0)}})}else d.file?$.get(d.file,function(a){d.updateVersion("origin","default",d.title,d.name,a.date),c(a)},"text"):(d.saveID="origin",c(""))})},Eden.DB.generateSource=function(a){return JSON.stringify({script:Eden.Agent.save()+"\n"+eden.root.save(),title:a},null,"\t")},Eden.DB.save=function(a,b,c){Eden.DB.saveSource(a,Eden.DB.generateSource(a),b,c)},Eden.DB.saveSource=function(a,b,c,d){var e={},f=d?d.tags:void 0,g=d?d.publish:void 0,h=(d?d.description:void 0,d?d.thumb:void 0),i=a.replace(/[ \!\'\-\?\&]/g,"");e.source=b;var j={title:a,thumb:h,tags:f};if(Eden.DB.isLoggedIn()){var k=g?"public":Eden.DB.username?Eden.DB.username.replace(/[ \!\'\-\?\&]/g,""):"public",l="jseden1/"+k+"/"+i,m=Eden.DB.meta[l];void 0===m&&(m=new Eden.DB.createMeta(l)),m.title=JSON.stringify(j),Eden.DB.upload(l,m,e.source,"v1",!0,function(){var b="?load="+l+"&tag="+m.saveID;e.path=l,e.saveID=m.saveID,m.title=a,window.history.replaceState({project:l,tag:m.saveID},"",b),c&&c(e)})}else c&&c(e)},Eden.DB.load=function(a,b,c,d){function e(){eden.execute2(c.script,"*Restore",function(){console.log("Loaded: "+a),d&&d(c)})}void 0===c?Eden.DB.getSource(a,b,function(a){a&&""!=a&&(c=JSON.parse(a),e())}):e()},Eden.DB.loadLocalMeta(),Eden.Agent=function(a,b,c,d){this.name=void 0,void 0===b?this.name=makeRandomName():this.name=b,Eden.Agent.agents[this.name]=this,void 0===c&&(c=Eden.DB.createMeta(b)),this.watches=[],this.scope=eden.root.scope,this.ast=void 0,this.state={},this.enabled=!(!c||void 0===c.enabled)&&c.enabled,this.owned=!1,this.oracles=[],this.handles=[],this.meta=c,this.title=c&&c.title?c.title:"Script View",this.history=JSON.parse(edenUI.getOptionValue("agent_"+this.name+"_history"))||{},c&&void 0===this.history[c.saveID]&&(this.history[c.saveID]=[]),this.index=-1,this.snapshot="",this.autosavetimer=void 0,this.executed=!1,this.options=d,this.loading=!1,this.snapshot,this.setOptions(d),this.dmp=new diff_match_patch,Eden.Agent.emit("create",[this]),Eden.DB.updateDirectory(this.name);var e=this;eden.root.addGlobal(function(a,b){if(e.ast&&e.executed&&0==e.ast.script.errors.length){var c=e.ast.triggers[a.name.slice(1)];if(c)for(var d=0;d<c.length;d++)if(0==c[d].active){c[d].active=!0;var f=c[d].execute(void 0,e.ast,eden.root.scope);f&&(void 0===eden.peer||eden.peer.authoriseWhen(c[d]))?e.ast.executeStatements(f,-1,c[d]):c[d].active=!1}}})},Eden.Agent.agents={},Eden.Agent.importQueue={},Eden.Agent.listeners={},Eden.Agent.emit=emit,Eden.Agent.listenTo=listenTo,Eden.Agent.unlisten=function(a){for(var b in Eden.Agent.listeners)for(var c=0;c<Eden.Agent.listeners[b].length;c++)Eden.Agent.listeners[b][c].target===a&&Eden.Agent.listeners[b].splice(c,1)},Eden.Agent.AUTOSAVE_INTERVAL=2e3,Eden.Agent.importAgent=function(a,b,c,d){function e(b,c){var d=Eden.Agent.importQueue[a];Eden.Agent.importQueue[a]=void 0;for(var e=0;e<d.length;e++)d[e](b,c)}function f(d,f){if(g){if(!d)return void e(void 0,"No source");if(g.ast&&g.ast.script.errors.length>0&&console.error("Agent: "+a+"@"+b+"\n"+g.ast.script.errors[0].prettyPrint()),void 0===c||c.indexOf("noexec")==-1)return g.loading=!0,void g.execute(c&&c.indexOf("force")>=0,!0,function(){g.loading=!1,e(g)})}else if(c&&c.indexOf("create")>=0)console.log("CREATE: "+a),g=new Eden.Agent((void 0),a,Eden.DB.createMeta(a),c),"default"!=b&&(g.meta.tag=b),Eden.DB.addLocalMeta(a,g.meta);else if(!d)return console.log(c),void e(void 0,f);e(g)}var g;if(void 0===d)return void console.trace("DEPRECATED USE OF IMPORT");if(Eden.Agent.importQueue[a])return void Eden.Agent.importQueue[a].push(function(e,f){e?d(e,f):Eden.Agent.importAgent(a,b,c,d)});if(Eden.Agent.importQueue[a]=d?[d]:[],void 0!==b&&""!=b||(b="default"),void 0!==Eden.Agent.agents[a]){var g=Eden.Agent.agents[a];return g.setOptions(c),void(g.meta&&g.meta.tag!=b&&"default"!=b||c&&c.indexOf("reload")>=0?(g.meta.tag=b,g.loadSource(f)):f(!0))}Eden.DB.getMeta(a,function(a,d){if(d){if(d.tag=b,g=new Eden.Agent((void 0),a,d,c),d.file||d.remote)return void g.loadSource(f);for(d.saveID="origin",g.setSnapshot(""),g.setSource("");g.canRedo();)g.redo();return void f(!0)}f(!1,"No agent")})},Eden.Agent.hasLocalModifications=function(a){try{if(window.localStorage){var b=JSON.parse(window.localStorage.getItem("agent_"+a+"_index"));return null!==b&&b>=0}}catch(c){return!1}},Eden.Agent.remove=function(a){if(void 0!==a){Eden.Agent.agents[a.name]=void 0;var b;for(var c in Eden.Agent.agents){if(c==a.name)break;b=c}delete Eden.Agent.agents[a.name],Eden.Agent.emit("remove",[a.name,b]),a.enabled=!1}},Eden.Agent.removeAll=function(){for(var a in Eden.Agent.agents)/^(lib|view\/script)(\/|$)/.test(a)||Eden.Agent.remove(Eden.Agent.agents[a])},Eden.Agent.save=function(){var a="";for(var b in Eden.Agent.agents)a+="import "+b+"@"+Eden.Agent.agents[b].meta.saveID+";\n";return a},Eden.Agent.getActiveAgents=function(a,b){var c="";for(var d in Eden.Agent.agents){var e=Eden.Agent.agents[d];if((b||e.canUndo()||a&&a[d])&&e.executed&&e.ast)for(var f=0;f<e.ast.lines.length;f++)e.ast.lines[f]&&"when"==e.ast.lines[f].type&&(c+=e.ast.getSource(e.ast.lines[f]),c+="\n\n")}return c},Eden.Agent.prototype.getSource=function(){return this.snapshot},Eden.Agent.prototype.getLine=function(){return 0},Eden.Agent.prototype.doDebug=function(){return!1},Eden.Agent.prototype.isSaved=function(){return void 0===this.autosavetimer},Eden.Agent.prototype.autoSave=function(){if(!(void 0===this.ast||this.ast.script.errors.length>0)){var a=new diff_match_patch,b=a.diff_main(this.snapshot,this.ast.stream.code,!1),c=a.patch_make(this.snapshot,this.ast.stream.code,b),d=a.patch_toText(c);b=a.diff_main(this.ast.stream.code,this.snapshot,!1),c=a.patch_make(this.ast.stream.code,this.snapshot,b);var e=a.patch_toText(c);""!=e&&(this.addHistory(d,e),this.setSnapshot(this.ast.stream.code),this.autosavetimer=void 0,Eden.Agent.emit("autosave",[this]))}},Eden.Agent.prototype.setOptions=function(a){a&&(this.options=a,a.indexOf("remote")>=0&&this.clearHistory(),a.indexOf("readonly")>=0&&(this.owned=!0))},Eden.Agent.prototype.setSnapshot=function(a){this.snapshot=a},Eden.Agent.prototype.saveHistory=function(){edenUI.setOptionValue("agent_"+this.name+"_history",JSON.stringify(this.history))},Eden.Agent.prototype.clearFuture=function(){this.history[this.meta.saveID].length-1!=this.index&&(this.history[this.meta.saveID]=this.history[this.meta.saveID].slice(0,this.index+1))},Eden.Agent.prototype.addHistory=function(a,b){return void 0===this.meta?void console.error("Cannot save history of metaless agent"):(this.clearFuture(),this.history[this.meta.saveID].push({time:Date.now()/1e3|0,redo:a,undo:b}),this.index=this.history[this.meta.saveID].length-1,void this.saveHistory())},Eden.Agent.prototype.clearHistory=function(){return void 0===this.meta?void console.error("Cannot clear history of metaless agent"):(this.history[this.meta.saveID]=[],this.index=-1,void this.saveHistory())},Eden.Agent.prototype.rollback=function(a){var b=this.generateSnapshot(a);this.index=a,this.setSnapshot(b),this.setSource(b),Eden.Agent.emit("rollback",[this])},Eden.Agent.prototype.generateSnapshot=function(a){if(a>=0&&this.history[this.meta.saveID][a].snapshot)return this.history[this.meta.saveID][a].snapshot;var b=new diff_match_patch,c=this.snapshot,d=this.index;if(d>a)for(;d>a;){var e=this.history[this.meta.saveID][d];d--;var f=b.patch_fromText(e.undo),g=b.patch_apply(f,c);c=g[0]}else for(;d<a;){d++;var e=this.history[this.meta.saveID][d],f=b.patch_fromText(e.redo),g=b.patch_apply(f,c);c=g[0]}return c},Eden.Agent.prototype.makeSnapshot=function(a){if(!this.history[this.meta.saveID][a].snapshot){var b=this.generateSnapshot(a);this.history[this.meta.saveID][a].snapshot=b,this.saveHistory()}},Eden.Agent.prototype.undo=function(){if(!(this.index<0)&&0!=this.history[this.meta.saveID].length){var a=this.history[this.meta.saveID][this.index];this.index--;var b;if(this.index>=0&&this.history[this.meta.saveID][this.index].snapshot)b=this.history[this.meta.saveID][this.index].snapshot;else{var c=new diff_match_patch,d=c.patch_fromText(a.undo),e=c.patch_apply(d,this.snapshot);b=e[0]}this.setSnapshot(b),this.setSource(b)}},Eden.Agent.prototype.canUndo=function(){return void 0!==this.meta&&(void 0===this.history[this.meta.saveID]&&(this.history[this.meta.saveID]=[]),this.history[this.meta.saveID].length>0&&this.index>=0)},Eden.Agent.prototype.canRedo=function(){return void 0!==this.meta&&(void 0===this.history[this.meta.saveID]&&(this.history[this.meta.saveID]=[]),this.index<this.history[this.meta.saveID].length-1)},Eden.Agent.prototype.redo=function(){if(!(this.index>=this.history.length-1)){this.index++;var a,b=this.history[this.meta.saveID][this.index];if(b.snapshot)a=b.snapshot;else{var c=new diff_match_patch,d=c.patch_fromText(b.redo),e=c.patch_apply(d,this.snapshot);a=e[0]}this.setSnapshot(a),this.setSource(a)}},Eden.Agent.prototype.changeVersion=function(a,b){Eden.Agent.importAgent(this.name,a,this.options,b)},Eden.Agent.prototype.findDefinitionLine=function(a,b){if(this.ast)for(var c=0;c<this.ast.lines.length;c++)if((!this.ast.lines[c]||"definition"==this.ast.lines[c].type||!this.ast.lines[c].lvalue||this.ast.lines[c].lvalue.name==a)&&this.ast.lines[c]&&this.ast.getSource(this.ast.lines[c])==b)return c;return-1},Eden.Agent.prototype.recovery=function(){var a=[];for(var b in this.history)"recover"!=b&&(a=a.concat(this.history[b]));a.sort(function(a,b){return a.time-b.time}),this.history.recover=a},Eden.Agent.prototype.loadSource=function(a){var b=this;if(this.executed=!1,"recover"==b.meta.tag){for(b.index=-1,b.setSnapshot(""),b.meta.saveID="recover",b.recovery();b.canRedo();)b.redo();b.setSource(b.snapshot),a&&a(!0),Eden.Agent.emit("loaded",[b])}else Eden.DB.getSource(b.name,b.meta.tag,function(c,d){if(c||""==c){if(void 0===b.history[b.meta.saveID]&&(b.history[b.meta.saveID]=[]),b.index=-1,b.setSnapshot(c),b.options&&b.options.indexOf("rebase")>=0)for(;b.canRedo();)b.redo();b.setSource(b.snapshot),a&&a(!0),Eden.Agent.emit("loaded",[b])}else a?a(!1,d):console.error("AGENT ERROR: "+b.name+" - "+d)},"text")},Eden.Agent.prototype.clearExecutedState=function(){this.ast.clearExecutedState()},Eden.Agent.prototype.setTitle=function(a){this.title=a,this.meta.title=a,Eden.Agent.emit("title",[this])},Eden.Agent.prototype.setOwned=function(a,b){this.owned=a,Eden.Agent.emit("owned",[this,b])},Eden.Agent.prototype.setReadonly=function(a){this.oracles.push.apply(this.oracles,a);for(var b=0;b<a.length;b++){var c=eden.root.lookup(a[b]);(function(a,b){var c=this;Object.defineProperty(this.state,b,{get:function(){return a.value(c.parent.scope)},set:function(b){a.assign(b,c.scope,c)}})}).call(this,c,a[b])}},Eden.Agent.prototype.setWriteonly=function(a){this.handles.push.apply(this.handles,a);for(var b=0;b<a.length;b++){var c=eden.root.lookup(a[b]);(function(a,b){var c=this;Object.defineProperty(this.state,b,{get:function(){return a.value(c.scope)},set:function(b){a.assign(b,c.parent.scope,{name:"*JavaScript",agent:c})}})}).call(this,c,a[b])}},Eden.Agent.prototype.setReadWrite=function(a){this.oracles.push.apply(this.oracles,a),this.handles.push.apply(this.handles,a);for(var b=0;b<a.length;b++){var c=eden.root.lookup(a[b]);(function(a,b){var c=this;Object.defineProperty(this.state,b,{get:function(){return a.value(c.parent.scope)},set:function(b){a.assign(b,c.parent.scope,{name:"*JavaScript",agent:c})}})}).call(this,c,a[b])}},Eden.Agent.prototype.declare=function(a){var b=eden.root.lookup(a),c=this;Object.defineProperty(this.state,a,{get:function(){return b.value(c.scope)},set:function(a){b.assign(a,c.scope,{name:"*JavaScript",agent:c})}})},Eden.Agent.prototype.derivative=function(a,b){var c=eden.root.lookup(a),d=this;c.define(function(b,c){d.ast.definitions[a].evaluate(b,c)},b,this)},Eden.Agent.prototype.definitions=function(){return this.ast.definitions},Eden.Agent.prototype.actions=function(){return this.ast.scripts},Eden.Agent.prototype.setScope=function(a){this.scope=a},Eden.Agent.prototype.on=function(a,b){var c=this;this.watches.push(a),eden.root.lookup(a).addJSObserver(this.name,function(a,d){b.call(c,a.name.slice(1),d)})},Eden.Agent.prototype.when=function(a,b,c){},Eden.Agent.prototype.hasErrors=function(){return this.ast&&this.ast.script.errors.length>0},Eden.Agent.prototype.executeLine=function(a,b,c){this.ast.executeLine(a,this,c),b||Eden.Agent.emit("executeline",[this,a])},Eden.Agent.prototype.execute=function(a,b,c){0==this.executed||a?(this.executeLine(-1,b,c),this.executed=!0,b||Eden.Agent.emit("execute",[this,a])):c&&c()},Eden.Agent.prototype.upload=function(a,b,c){var d=this;this.ast?Eden.DB.upload(this.name,this.meta,this.ast.stream.code,a,b,function(a){void 0===d.history[d.meta.saveID]&&(d.history[d.meta.saveID]=[]),c&&c(a)}):c&&c(!1)},Eden.Agent.prototype.applyPatch=function(a,b){var c=new diff_match_patch,d=c.patch_fromText(a),e=c.patch_apply(d,this.snapshot),f=e[0];this.clearFuture(),this.setSnapshot(f),this.setSource(f,!0),Eden.Agent.emit("patched",[this,a,b])},Eden.Agent.prototype.setSource=function(a,b,c){var d=this.hasErrors(),e=!1;if(this.ast){if(!b){var f=this;clearTimeout(this.autosavetimer),this.autosavetimer=setTimeout(function(){f.autoSave()},Eden.Agent.AUTOSAVE_INTERVAL);var g=this.dmp.diff_main(this.ast.stream.code,a,!1),h=this.dmp.patch_make(this.ast.stream.code,a,g),i=this.dmp.patch_toText(h);""!=i&&(e=!0,Eden.Agent.emit("patch",[this,i,c]))}}else this.setSnapshot(a),b||(e=!0,Eden.Agent.emit("source",[this,a]));this.ast?this.ast=new Eden.AST(a,this.ast.imports,this):this.ast=new Eden.AST(a,(void 0),this),this.hasErrors()&&!d?Eden.Agent.emit("error",[this]):!this.hasErrors()&&d&&Eden.Agent.emit("fixed",[this]),e&&Eden.Agent.emit("changed",[this,a,c])},Eden.Agent.prototype.getSource=function(){return this.ast?this.ast.stream.code:""},Eden.Agent.prototype.cleanUp=function(){for(var a=0;a<this.watches.length;a++)eden.root.lookup(this.watches[a]).removeJSObserver(this.name)},Eden.Peer=function(master,id){function processData(data){var obj=JSON.parse(data);if(console.log(obj.cmd,obj.symbol),"assign"==obj.cmd){var sym=eden.root.lookup(obj.symbol.slice(1));sym.assign(obj.value,eden.root.scope,{name:"*net"})}else if("define"==obj.cmd){var sym=eden.root.lookup(obj.symbol.slice(1));sym.eden_definition=obj.source,sym.define(eval(obj.code),{name:"*net"},obj.dependencies)}else"import"==obj.cmd&&Eden.Agent.importAgent(obj.path,obj.tag,obj.options,function(){})}function init(a){if(a){var b;a.replace(/[ \!\'\-\?\&]/g,"");b=id?new Peer(id,{key:"w2cjkz0cpw6x0f6r"}):new Peer({key:"w2cjkz0cpw6x0f6r"}),b.on("open",function(a){if(console.log("My peer id is "+a),master){var c=b.connect(master);c.on("open",function(){me.connections.push(c),c.on("data",processData)})}}),b.on("connection",function(a){me.connections.push(a),a.on("data",processData)})}}function createDialog(a,b){a.slice(0,-7);$('<div id="'+a+'"></div>').html("").dialog({title:"Peer Connections",width:200,height:300,minHeight:120,minWidth:100})}this.connections=[],this.id=id,this.master=master;var me=this;Eden.DB.listenTo("login",this,init),Eden.DB.isLoggedIn()&&init(Eden.DB.username),edenUI.views.Peers={dialog:createDialog,title:"Connections",category:edenUI.viewCategories.environment},edenUI.menu.updateViewsMenu()},Eden.Peer.prototype.broadcast=function(a){for(var b=0;b<this.connections.length;b++)this.connections[b].send(a)},Eden.Peer.prototype.authoriseWhen=function(a){return!!this.id},Eden.Peer.prototype.assign=function(a,b){this.broadcast(JSON.stringify({cmd:"assign",symbol:a,value:b}))},Eden.Peer.prototype.define=function(a,b,c,d){this.broadcast(JSON.stringify({cmd:"define",symbol:a,source:b,code:c,dependencies:d}))},Eden.Peer.prototype.imports=function(a,b,c){this.broadcast(JSON.stringify({cmd:"import",path:a,tag:b,options:c}))};