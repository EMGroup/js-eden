!function(a){function b(a,b,c,d){function e(){f.insertBefore(b,g)}var f=b.parentNode,g=b.nextSibling;return f?(f.removeChild(b),"boolean"!=typeof c&&(d=c,c=!1),void(d&&c?d.call(a,b,e):d&&(d.call(a,b),e()))):void d.call(a,b)}var c={apply:!0,array:!0,canvasURL:!0,centroid:!0,char:!0,charCode:!0,choose:!0,compose:!0,concat:!0,curry:!0,decodeHTML:!0,definitionOf:!0,definitionRHS:!0,doDefault:!0,edenCode:!0,escapeRE:!0,foldl:!0,foldr:!0,hasProperty:!0,hslColour:!0,htmlBulletList:!0,htmlNumberedList:!0,positionInList:!0,positionOfRE:!0,substringPosition:!0,int:!0,isBoolean:!0,isCallable:!0,isChar:!0,isDefined:!0,isDependency:!0,isDependent:!0,isFunc:!0,isInt:!0,isList:!0,isNaN:!0,isNumber:!0,isObject:!0,isPoint:!0,isPointer:!0,isProc:!0,isString:!0,isValue:!0,distanceMoved:!0,angleTurned:!0,List:!0,listcat:!0,lookup:!0,lowercase:!0,map:!0,mapPartial:!0,max:!0,Menu:!0,MenuItem:!0,min:!0,mod:!0,nameof:!0,partApply:!0,Point:!0,pow:!0,properties:!0,randomBoolean:!0,randomFloat:!0,randomInteger:!0,RE:!0,replaceFirst:!0,reverse:!0,rgbColour:!0,rotatePoint:!0,round:!0,roundMultiple:!0,scalePoint:!0,search:!0,sequenceItoJ:!0,sequenceN:!0,sequenceArithmeticN:!0,sequenceList:!0,sequencePrevious:!0,sort:!0,str:!0,sqrt:!0,strcat:!0,sublist:!0,substitute:!0,substr:!0,sum:!0,tail:!0,trim:!0,type:!0,uppercase:!0,include_css:!0,html:!0,time:!0,execute:!0,Text:!0,textWidth:!0,textHeight:!0,Arc:!0,Curve:!0,FillPattern:!0,Ellipse:!0,Line:!0,LinearGradient:!0,LineSequence:!0,PixelList:!0,GreyPixelList:!0,Rectangle:!0,RotateAboutCentre:!0,RotateAboutPoint:!0,CombinedRotation:!0,Scale:!0,Translate:!0,RoundedRectangle:!0,Polygon:!0,RegularPolygon:!0,Sector:!0,Shadow:!0,Circle:!0,Button:!0,Checkbox:!0,Div:!0,Image:!0,imageWithZones:!0,HTMLImage:!0,RadioButtons:!0,Slider:!0,Textbox:!0,DropDownList:!0,Combobox:!0,BulletSlide:!0,Video:!0,Audio:!0,Slide:!0,TitledSlide:!0,TitleSlide:!0,cos:!0,sin:!0,tan:!0,abs:!0,acos:!0,asin:!0,atan:!0,ceil:!0,roundUp:!0,exp:!0,floor:!0,roundDown:!0,log:!0,random:!0,forget:!0,forgetAll:!0,shapeOnTopAt:!0,zoneOnTopAt:!0,observableOnTopAt:!0,shapeOnBottomAt:!0,zoneOnBottomAt:!0,observableOnBottomAt:!0,shapesAt:!0,zonesAt:!0,observablesAt:!0,observableForShape:!0,alias:!0,arrangeWindows:!0,attemptMouseCapture:!0,bindCSSNumericProperty:!0,bindCSSProperty:!0,bindCSSRule:!0,createCanvas:!0,createHTMLView:!0,createProjectList:!0,createView:!0,destroyView:!0,eager:!0,error:!0,hideView:!0,highlightView:!0,moveView:!0,patch:!0,removeedenclock:!0,resizeView:!0,setedenclock:!0,showObservables:!0,showView:!0,stopHighlightingView:!0,todo:!0,touch:!0,unbind:!0,withAppendedItem:!0,writeln:!0},d={autocalc:!0,mouseX:!0,mouseY:!0,mousePosition:!0,screenHeight:!0,screenWidth:!0,PI:!0},e={true:!0,false:!0,green:!0},f={var:!0,if:!0,while:!0,typeof:!0,this:!0,function:!0,return:!0,else:!0,break:!0,continue:!0,switch:!0,for:!0,prototype:!0};EdenUI.Highlight=function(a){this.ast=void 0,this.outelement=a,this.line=1,this.currentline=-1,this.mode=0,this.mode_at_line={},this.heredocend=void 0,this.lastmode=0},EdenUI.Highlight.isType=function(a){return!1},EdenUI.Highlight.prototype.highlightLine=function(a,b){var g=-1,h=-1,i="",j=!1,k=a.stream,l=!1,m="INVALID",n="INVALID",o=[];this.mode_at_line[this.line-1]?this.mode=this.mode_at_line[this.line-1]:this.mode=0,a.script&&a.script.errors.length>0&&(g=a.script.errors[0].prevposition,h=a.script.errors[0].position,i=a.script.errors[0].messageText());for(var p="",q=document.createElement("span");;){if(6==this.mode&&(this.mode=this.lastmode,q=o.pop()),k.position==b){if(""!=p){var r=document.createTextNode(p);q.appendChild(r),p=""}var s=document.createElement("span");s.className="fake-caret",q.appendChild(s)}var t=k.peek();if(10==t){if(""!=p){var r=document.createTextNode(p);q.appendChild(r),p=""}break}if(9!=t&&13!=t&&32!=t&&160!=t){if(""!=p){8==this.mode&&(q=o.pop(),this.mode=1);var r=document.createTextNode(p);q.appendChild(r),p=""}if(n=m,m=k.readToken(),"string"!=typeof m&&console.error("Token error: line = "+this.line+" position = "+k.position),"EOF"==m){if(""!=p){var r=document.createTextNode(p);q.appendChild(r),p=""}break}if("INVALID"!=m){var u=k.tokenType(m),v="",w=k.tokenText();if(g!=-1&&(g<=k.prevposition&&!j&&(j=!0),h<=k.prevposition&&j&&(j=!1),j&&(l=!0)),j&&"EOF"!=a.script.errors[0].token&&(v+="eden-error "),0==this.mode||5==this.mode)if("##"==m){v+="eden-comment";for(var x="";k.valid()&&10!=k.peek();)x+=String.fromCharCode(k.get());w="##"+x}else if("local"==m||"auto"==m||"para"==m)v+="eden-storage";else if("keyword"==u)v+="eden-keyword","import"==k.data.value?this.mode=7:"do"==k.data.value&&(this.mode=77);else if("NUMBER"==m)v+="eden-number";else if("<<"==m){var y=(k.readToken(),k.tokenText());w+=y,this.heredocend=y,v+="eden-storage",this.mode=44}else if("STRING"==m)v+="eden-string";else if("CHARACTER"==m)v+="eden-string";else if("BOOLEAN"==m)v+="eden-constant";else if("OBSERVABLE"==m)v+=c[k.data.value]?"eden-function":EdenUI.Highlight.isType(k.data.value)?"eden-type":e[k.data.value]?"eden-constant":d[k.data.value]?"eden-special":"eden-observable";else if(5==this.mode&&"}"==m)this.mode=this.lastmode,v+="eden-operator";else if("`"==m)if(5==this.mode)this.mode=6;else{this.lastmode=this.mode,this.mode=5,o.push(q);var z=document.createElement("span");z.className="eden-backticks",q.appendChild(z),q=z}else"${{"==m?(v+="eden-javascript",this.mode=4):"-"==m&&k.isNumeric(k.peek())?(m=k.readToken(),w="-"+k.tokenText(),v+="eden-number"):"/*"==m?42==k.peek()?(this.mode=22,v+="eden-doxycomment"):(this.mode=2,v+="eden-comment"):v+="eden-operator";else if(1==this.mode||7==this.mode||8==this.mode){if(7==this.mode){o.push(q);var z=document.createElement("span");z.className="eden-pathblock",q.appendChild(z),q=z,this.mode=8}";"==m?(8==this.mode&&(q=o.pop()),this.mode=0,v+="eden-operator"):v+=Language.importoptions[k.data.value]?"eden-importopt":"eden-path"}else 2==this.mode||22==this.mode?"*/"==m?(this.mode=0,v+=2==this.mode?"eden-comment":"eden-doxycomment"):"@"==m||"#"==m?(this.mode=2==this.mode?3:33,v+="eden-doxytag"):v+=2==this.mode?"eden-comment":"eden-doxycomment":3==this.mode||33==this.mode?(this.mode=3==this.mode?2:22,v+="eden-doxytag"):4==this.mode?(v+=("OBSERVABLE"==m||"keyword"==u)&&f.hasOwnProperty(k.data.value)?"eden-javascript-bold":"eden-javascript","}}$"==m&&(this.mode=0)):44==this.mode?"INVALID"==n&&w==this.heredocend?(v+="eden-storage",this.mode=0):v+="eden-string":77!=this.mode&&78!=this.mode||("{"==m?(v+="eden-operator",77==this.mode?this.mode=0:(this.lastmode=this.mode,this.mode=5)):";"==m?(v+="eden-operator",this.mode=0):"::"==m||"with"==m?(v+="eden-keyword",this.mode=0):(this.mode=78,v+="eden-selector"));if(k.prevposition<b&&k.position>b){var s=b-k.prevposition,A=w.slice(0,s),B=w.slice(s),C=document.createElement("span");C.className=v,"eden-observable"==v&&C.setAttribute("data-observable",w);var D=document.createElement("span");D.appendChild(document.createTextNode(A)),C.appendChild(D);var s=document.createElement("span");s.className="fake-caret",C.appendChild(s),D=document.createElement("span"),D.appendChild(document.createTextNode(B)),C.appendChild(D),q.appendChild(C)}else{var D=document.createElement("span");D.className=v,"eden-observable"==v&&D.setAttribute("data-observable",w),D.appendChild(document.createTextNode(w)),q.appendChild(D)}}else console.log("INVALID: "+k.peek()),k.skip()}else k.skip(),32==t||160==t?p+=" ":13!=t&&(p+=String.fromCharCode(t))}return o.length>0&&(q=o[0],this.mode=0),this.mode_at_line[this.line]=this.mode,q},EdenUI.Highlight.prototype.highlight=function(a,c,d){this.ast=a,this.line=1;var e=-1,f=-1,g="",h=a.stream;if(void 0!==this.outelement){if(0==a.stream.code.length)return void(this.outelement&&(this.outelement.innerHTML="<div class='eden-line'><span class='fake-caret'></span></div>"));a.script&&a.script.errors.length>0&&(e=a.script.errors[0].prevposition,f=a.script.errors[0].position,g=a.script.errors[0].messageText()),h.reset();var i=void 0,j=!1,k=0;if(c==-1)b(this,this.outelement,!1,function(){for(this.outelement.innerHTML="",this.mode_at_line={};h.valid();){var b=h.peek();if(10!=b)i=this.highlightLine(a,d);else{j=k<=e&&h.position>=f;var c=document.createElement("div");c.className="eden-line",c.setAttribute("data-line",this.line-1),this.line++,void 0!==i?c.appendChild(i):this.mode_at_line[this.line-1]=this.mode;var g=document.createTextNode("\n");c.appendChild(g),this.outelement.appendChild(c),k=h.position+1,i=void 0,h.skip()}}if(j=k<=e&&h.position>=f,void 0!==i){var c=document.createElement("div");c.className="eden-line",c.setAttribute("data-line",this.line-1),c.appendChild(i),this.outelement.appendChild(c)}else{var c=document.createElement("div");if(d>=h.position){c.className="eden-line",c.setAttribute("data-line",this.line-1);var l=document.createElement("span");l.className="fake-caret",c.appendChild(l)}else c.className="eden-line";this.outelement.appendChild(c)}});else{for(;h.valid()&&this.line<c-1;){var l=h.peek();10==l&&this.line++,h.skip()}for(var m=2;m>=0;m--){this.line=c-m+1;var n=this.outelement.childNodes[c-m];if(void 0!==n){for(;n.firstChild;)n.removeChild(n.firstChild);k=h.position,i=this.highlightLine(a,d),j=k<=e&&h.position>=f,n.appendChild(i);var o=document.createTextNode("\n");n.appendChild(o),h.skip()}}for(;void 0!==this.mode_at_line[this.line+1]&&this.mode_at_line[this.line]!=this.mode_at_line[this.line+1];){this.line++;var n=this.outelement.childNodes[this.line-1];if(void 0!==n){for(;n.firstChild;)n.removeChild(n.firstChild);k=h.position,i=this.highlightLine(a,d),j=k<=e&&h.position>=f,n.appendChild(i);var o=document.createTextNode("\n");n.appendChild(o),h.skip()}}}}},EdenUI.Highlight.html=function(a,b){var c=document.createElement("div"),d=new EdenUI.Highlight(c);return d.ast={stream:new EdenStream(a)},d.highlight(d.ast,-1,-1,void 0),b?c.childNodes[0].innerHTML:c.innerHTML}}("undefined"!=typeof window?window:global),EdenUI.ContextMenu=function(a){this.element=$('<div class="eden-contextmenu"></div>'),this.origin=a,this.target=void 0,this.items=[],$(document.body).append(this.element);var b=this;this.element.on("mousedown",".eden-contextmenu-item",function(a){var c=parseInt(a.currentTarget.getAttribute("data-index"));b.items[c].action&&b.items[c].action(b.target)}),this.origin.oncontextmenu=function(a){b.target=a.target;var c=document.body.scrollLeft+a.clientX;c+150>=screen.width&&(c-=c+150-screen.width),b.element.css("top",""+(document.body.scrollTop+a.clientY+10)+"px"),b.element.css("left",""+c+"px");for(var d=0;d<b.items.length;d++){var e;e="function"==typeof b.items[d].status?b.items[d].status(a.target):b.items[d].status,changeClass(b.items[d].element,"disabled",!e)}b.element.slideDown(100),a.preventDefault()},document.addEventListener("mousedown",function(){b.element.hide()},!0)},EdenUI.ContextMenu.prototype.addItem=function(a,b,c,d){var e=$('<div class="eden-contextmenu-item"><span class="eden-contextmenu-icon">'+a+"</span><span>"+b+"</span></div>");e.get(0).setAttribute("data-index",""+this.items.length),this.element.append(e),this.items.push({status:c,action:d,element:e.get(0)})},EdenUI.ContextMenu.prototype.addSeparator=function(){var a=$('<div class="eden-contextmenu-sep"></div>');this.element.append(a)},EdenUI.MenuBar=function(){function a(){$(".menubar-menu").hide(),t=!1;var a=$("#menubar-mainitem-views");a.children().css("display","")}function b(a){var b=$("#menubar-mainitem-"+a);b.show(),u=a,t=!0,"sharebox"==a&&o.sharebox.show()}function c(){var a=$("#menubar-mainitem-existing-views");Object.keys&&0===Object.keys(edenUI.activeDialogs).length&&a.html('<div class="menubar-item-fullwidth">Use the "New Window" menu to create windows.</div>')}function d(b){a();var c=edenUI.eden.root,d=c.lookup("mouseFollow").value(),e=c.lookup("_views_number_created"),f=e.value()+1;e.assign(f,c.scope,Symbol.hciAgent,!0);var g=this.view,h=g.toLowerCase()+f;d?edenUI.eden.execute('createView("'+h+'", "'+g+'");'):edenUI.createView(h,g),o.updateViewsMenu()}function e(b){var d=this.parentNode.viewname;edenUI.viewInstances[d].confirmClose&&a(),edenUI.closeView(d),c()}function f(a){var b=a.currentTarget.children[0],c=this.parentNode.viewname;edenUI.viewInstances[c].pinned?(edenUI.unpinView(c),b.src=n):(edenUI.pinView(c),b.src=m)}function g(a){for(var b=$("<div class='menubar-item'></div>"),c=0;c<a.length;++c)b.append(a[c]);return b}function h(a,b){return $('<div class="'+a+' menubar-item-clickable">'+b+"</div>")}function i(a){return $("<div class='menubar-item menubar-nonselectable'><div class='menubar-item-fullwidth menubar-item-separator'>"+a+"</div></div>")}function j(b){return{mouseover:function(a){edenUI.highlightView(b,!0)},mouseout:function(a){edenUI.stopHighlightingView(b,!0,!1)},click:function(c){edenUI.stopHighlightingView(b,!0,!0),a()}}}function k(a){return a&&"false"!=a?'checked="checked"':""}function l(a,b,c,d){var e=edenUI.getOptionValue(a);null===e&&(e=c);var f=h("menubar-item-input",'<input id="menu-'+a+'" type="checkbox"'+k(e)+" />"),i=f.get(0).children[0],j=h("menubar-item-label",b),l=g([f,j]);l.click(function(b){b.target!=i&&(i.checked=!i.checked),edenUI.setOptionValue(a,i.checked)}),edenUI.listenTo("optionChange",void 0,function(b,c){if(b==a){var e="true"===c;i.checked=e,d&&d(a,e)}}),l.appendTo(v)}var m="images/pin.png",n="images/pin-greyed.png",o=this;this.itemViews={};var p=$('<div id="menubar-obscurer" class="login-subdialog modal" style="display: block;"></div>');p.html('<div class="modal-content" style="width: 290px;"><div class="menubar-sharebox-title"><span class="menubar-shareicon">&#xf090;</span>Login</div><iframe frameborder="0" name="logintarget" width="250" height="200" class="menubar-login-iframe"></iframe><br/><button class="jseden button-cancel">Cancel</button></div>'),p.hide(),eden.execute2("_views_number_created = 0;","*Default"),this.element=$('<div id="menubar-main"><a id="eden-logo" href="'+window.location.pathname+'" target="_blank" style="display: block"></a><div contenteditable class="jseden-title" title="Rename project">Construit!</div>'+(mobilecheck()?'<div class="menubar-mobilebuttons"><button class="scriptview-button enabled mobilemore">&#xf078;</button></div>':'<div class="jseden-subtitle">by Some Author</div><div id="menubar-login"><span class="icon">&#xf05e;</span>Not Connected</div><div class="menubar-buttons"><div class="menubar-button enabled main share" data-obs="sharebox" title="Save or share" style="display: none;">&#xf1e0;<div id="menubar-mainitem-sharebox" class="menubar-menu"></div></div><div class="menubar-button enabled main create" data-obs="views" title="Create Views" style="display: none;">&#xf067;<div id="menubar-mainitem-views" class="menubar-menu"></div></div><div class="menubar-button enabled main existing" data-obs="existing" title="Existing" style="display: none;">&#xf2d2;<div id="menubar-mainitem-existing" class="menubar-menu"></div></div><div class="menubar-button enabled main settings" data-obs="options" title="Options" style="display: none;">&#xf013;<div id="menubar-mainitem-options" class="menubar-menu"></div></div><div class="menubar-button enabled main help" data-obs="help" title="Help" style="display: none;">&#xf128;<div id="menubar-mainitem-help" class="menubar-menu"></div></div><div class="menubar-button enabled main notifications" data-obs="notifications" title="Notifications">&#xf0f3;<span class="menubar-notification-jewel"></span><div id="menubar-mainitem-notifications" class="menubar-menu"></div></div><div class="menubar-button enabled main maker" data-obs="maker" title="Maker Mode">&#xf0ad;</div></div><div class="searchouter menusearch" style="display: none;"><input type="text" class="search menusearch" placeholder="Search..." spellcheck="false"></input><div id="menubar-searchresults"></div></div>')+"</div>"),$(document.body).append(this.element);var q=this.element.find("#menubar-login"),r=new EdenUI.ContextMenu(q.get(0));r.addItem("&#xf08b;","Log out",function(){return Eden.DB.isLoggedIn()},function(){Eden.DB.logOut(function(){$("#menubar-login").html('<a href="'+Eden.DB.remoteURL+'/login" target="logintarget"><span class="icon">&#xf090;</span>Login</a>')})}),edenUI.listenTo("loadPlugin",this,function(a,b){this.updateViewsMenu()}),edenUI.listenTo("createView",this,function(a,b){this.updateViewsMenu()}),edenUI.listenTo("destroyView",this,function(a){$(this.itemViews[a]).remove(),delete this.itemViews[a],c()}),Eden.DB.listenTo("connected",this,function(a){$("#menubar-login").html('<a href="'+a+'/login" target="logintarget"><span class="icon">&#xf090;</span>Login</a>')}),Eden.DB.listenTo("disconnected",this,function(){$("#menubar-login").html('<span class="icon">&#xf05e;</span>Not Connected')}),Eden.DB.listenTo("login",this,function(a){a&&(setTimeout(function(){$("#menubar-obscurer").remove()},1e3),$("#menubar-login").html('<a href="'+Eden.DB.remoteURL+'/#" target="_blank"><span class="icon">&#xf2be;</span>'+a+"</a>"))}),$("#menubar-login").click(function(){Eden.DB.isConnected()&&!Eden.DB.isLoggedIn()?(p.show(),$(document.body).append(p),p.on("click",".button-cancel",function(){p.remove()})):Eden.DB.isConnected()&&Eden.DB.isLoggedIn()});var o=this;if(mobilecheck()){var s=new EdenUI.ContextMenu(this.element.find(".mobilemore").get(0));s.addItem("&#xf1e0;","Share",!0,function(a){o.script.stickAll()}),s.addItem("&#xf121;","New Script View",!0,function(a){o.script.unstickAll()}),s.addItem("&#xf022;","New Observable Lists",!0,function(a){o.script.clearUnstuck()}),s.addItem("&#xf03e;","New Graphic View",!0,function(a){o.script.activateAll()}),this.element.on("click",".mobilemore",function(a){o.element.find(".mobilemore").get(0).oncontextmenu(a)})}this.sharebox=new EdenUI.Sharebox(this.element.find("#menubar-mainitem-sharebox")),this.element.on("click",".menubar-button.share",function(a){a.currentTarget===a.target&&o.sharebox.update()}),this.searchbox=new EdenUI.SearchBox(this.element.find("#menubar-searchresults")),this.element.on("keyup",".search",function(a){o.searchbox.updateSearch(a.currentTarget.value)}),this.element.on("focus",".search",function(a){o.searchbox.updateSearch(a.currentTarget.value)});var t=!1,u=void 0;$(document.body).on("mousedown",function(){a(),o.searchbox.element.hide()}),this.element.on("mousedown",".menubar-search-outer",function(a){a.stopPropagation()}),this.element.on("mousedown",".menubar-button.main",function(c){var d=c.currentTarget.getAttribute("data-obs");t&&c.target===this?d==u?a():(a(),b(d)):b(d),o.searchbox.element.hide(),c.stopPropagation()}),this.element.on("mouseenter",".menubar-button.main",function(a){}),this.updateViewsMenu=function(){var a=$("#menubar-mainitem-views"),b=$("#menubar-mainitem-existing");a.html("");var k=$('<input id="menubar-view-type-search" class="menubar-search-box" type="text" placeholder="search"/>'),l=k[0],p=$('<div class="menubar-item-fullwidth"></div>');p.append(k);var q=$("<div class='menubar-item-search'></div>");q.append(p),l.search=function(){var b,c=l.value,d=new RegExp("(^|\\s)"+c,"i"),e=!1;a.children().each(function(a,f){if(!f.classList.contains("menubar-item-search")){var g=f.children[0],h=g.innerHTML,i=g.classList.contains("menubar-item-separator");i?(c.length>1&&(e=d.test(h)),b=f,e?f.style.display="":f.style.display="none"):e?f.style.display="":d.test(h)?(f.style.display="",b.style.display=""):f.style.display="none"}})},k.on("input",l.search);var r,s,t,u,v,w,x=[];for(s in edenUI.views){var y=edenUI.views[s],z=y.title,A=y.category.getLabel(),B=y.category.getMenuPriority(),C=y.menuPriority;u=h("menubar-item-fullwidth menubar-view",z),t=g([u]),t[0].view=s,t.click(d),x.push({title:z,viewEntry:t,categoryLabel:A,categoryPriority:B,itemPriority:C})}x=x.sort(function(a,b){if(a.categoryPriority!=b.categoryPriority)return a.categoryPriority-b.categoryPriority;if(void 0!==a.itemPriority){if(void 0===b.itemPriority)return-1;if(a.itemPriority!=b.itemPriority)return a.itemPriority-b.itemPriority}else if(void 0!==b.itemPriority)return 1;return a.title>b.title?1:a.title<b.title?-1:0});for(var D,E=0;E<x.length;++E){var F=x[E],G=F.categoryLabel;if(D!=G){var H=i(G);H.appendTo(a),D=G}F.viewEntry.appendTo(a)}a.append(q),b.html(""),o.itemViews={},c();for(r in edenUI.activeDialogs){var I=j(r),z=edenUI.eden.root.lookup("_view_"+r+"_title").value();u=h("menubar-item-label",z+' <span class="menubar-view-name">['+r+"]</span>"),u.click(I.click);var J;J=edenUI.viewInstances[r].pinned?m:n,v=h("menubar-item-pin",'<img src="'+J+'" width="18" height="18" class="menubar-item-pin-icon"/>'),v.click(f),w=h("menubar-item-close",'<div class="menubar-item-close-icon">X</div>'),w.click(e),t=g([u,v,w]),t.bind("mouseover",I.mouseover),t.bind("mouseout",I.mouseout),t[0].viewname=r,t.appendTo(b),o.itemViews[r]=t[0]}},this.updateViewsMenu();var v=$("#menubar-mainitem-options");l("optConfirmUnload",Language.ui.menu_bar.opt_confirm,!0,function(a,b){b?window.addEventListener("beforeunload",confirmUnload):window.removeEventListener("beforeunload",confirmUnload)}),l("optSimpleWildcards",Language.ui.menu_bar.opt_simple_search,!0),l("optHideOnMinimize",Language.ui.menu_bar.opt_hide,!1),l("optCollapseToTitleBar",Language.ui.menu_bar.opt_collapse,!1,function(a,b){var c;c=b?"collapse":"maximize",$(".ui-dialog-content").each(function(){$(this).dialogExtend("option","dblclick",c)})}),l("developer",Language.ui.menu_bar.opt_debug,!1,function(b,c){var d;d=c?"/index-dev.html":"/index.html";var e=document.location.pathname;d=e.slice(0,e.lastIndexOf("/"))+d,d!=document.location.pathname?(a(),edenUI.modalDialog("Restart Required","<p>JS-EDEN must be restarted for this change to fully take effect.  Would you like to restart JS-EDEN now?</p>",["Restart Now","Restart Later"],1,function(a){if(0==a)window.onbeforeunload=void 0,document.location.pathname=d;else if(1==a)root.lookup("debug").mutate(root.scope,function(a){a.cache.value.jsExceptions=c},Symbol.hciAgent);else{var b=document.getElementById("menu-developer");b.checked=!b.checked,edenUI.setOptionValue("developer",b.checked)}})):root.lookup("debug").mutate(root.scope,function(a){a.cache.value.jsExceptions=c},Symbol.hciAgent)}),this.element.on("keyup",".jseden-title",function(a){try{window.localStorage&&window.localStorage.setItem("title",a.currentTarget.textContent)}catch(a){}}),eden.root.lookup("jseden_project_title").addJSObserver("menubar",function(a,b){"*JavaScript"!=a.last_modified_by.name&&($(".jseden-title").get(0).textContent=b);try{window.localStorage&&window.localStorage.setItem("title",b)}catch(c){}}),eden.root.lookup("jseden_maker").addJSObserver("menubar",function(a,b){b?o.element.find(".maker").addClass("active"):o.element.find(".maker").removeClass("active")}),eden.root.lookup("jseden_menu_showsearch").addJSObserver("menubar",function(a,b){b?o.element.find(".menusearch").show():o.element.find(".menusearch").hide()}),eden.root.lookup("jseden_menu_showshare").addJSObserver("menubar",function(a,b){b?o.element.find(".menubar-button.share").show():o.element.find(".menubar-button.share").hide()}),eden.root.lookup("jseden_menu_showcreate").addJSObserver("menubar",function(a,b){b?o.element.find(".menubar-button.create").show():o.element.find(".menubar-button.create").hide()}),eden.root.lookup("jseden_menu_showexisting").addJSObserver("menubar",function(a,b){b?o.element.find(".menubar-button.existing").show():o.element.find(".menubar-button.existing").hide()}),eden.root.lookup("jseden_menu_showsettings").addJSObserver("menubar",function(a,b){b?o.element.find(".menubar-button.settings").show():o.element.find(".menubar-button.settings").hide()}),eden.root.lookup("jseden_menu_showhelp").addJSObserver("menubar",function(a,b){b?o.element.find(".menubar-button.help").show():o.element.find(".menubar-button.help").hide()}),eden.root.lookup("jseden_project_subtitle").addJSObserver("menubar",function(a,b){$(".jseden-subtitle").get(0).textContent=b}),this.notifications=new EdenUI.Notifications(this.element.find("#menubar-mainitem-notifications"),this.element.find(".menubar-notification-jewel")),this.element.on("click",".notifications",function(a){o.notifications.clearCount()}),this.element.on("click",".maker",function(a){var b=eden.root.lookup("jseden_maker");if(!b.eden_definition){var c=b.value();void 0===c&&(c=!1),b.assign(!c,eden.root.scope,Symbol.localJSAgent)}}),this.element.on("keyup",".jseden-title",function(a){var b=eden.root.lookup("jseden_project_title");b.eden_definition||b.assign(a.currentTarget.textContent,eden.root.scope,Symbol.localJSAgent)})},EdenUI.MenuBar.reset=function(){$(".jseden-title").html("Construit!")},EdenUI.MenuBar.saveTitle=function(a){eden.root.lookup("jseden_project_title").assign(a,eden.root.scope,Symbol.jsAgent)},EdenUI.Dialogs={},EdenUI.Dialogs.MergeError=function(a,b,c){var d=new diff_match_patch,e=d.diff_main(a,b);d.diff_cleanupSemantic(e);var f=d.diff_prettyHtml(e),g=$('<div title="Import Merge Conflict">'+f+"</div>");g.dialog({resizable:!0,height:"auto",width:600,modal:!0,buttons:{"Use Mine":function(){c&&c("old"),$(this).dialog("close")},"Use New":function(){c&&c("new"),$(this).dialog("close")},Merge:function(){c&&c("merge"),$(this).dialog("close")}}})},EdenUI.Notifications=function(a,b){var c=this;this.notificationCount=0,this.notificationCountElement=b,this.notificationCountElement.hide(),this.notificationPanel=a,this.notificationPanel.html('<button class="control-button close-button control-enabled">&#xf00d;</button><button class="control-button clear-button control-enabled">&#xf05e;</button><div id="errors-dialog"></div>'),this.notificationPanel.on("click",".close-button",function(){c.notificationPanel.hide()}).on("click",".clear-button",function(){c.notificationPanel.find("#errors-dialog").html("")}),this.notificationPanel.hide(),this.notificationContent=this.notificationPanel.find("#errors-dialog"),Eden.Peer.listenTo("user",void 0,function(a,b){c.notification("net",$('<div class="notification-content">User \'<a href="javascript:eden.peer.showConnection(\''+a+"');\">"+b+"</a>' connected to you.<br/><a href=\"javascript: eden.peer.requestShare('"+a+"');\">Watch</a> <a href=\"javascript: eden.peer.requestObserve('"+a+"');\">Broadcast</a> <a href=\"javascript: eden.peer.requestCollaborate('"+a+"');\">Collaborate</a></div>"))}),Eden.Peer.listenTo("share",void 0,function(a,b){c.notification("net",$('<div class="notification-content">Your model is being shared...</div>'))}),Eden.Peer.listenTo("disconnect",void 0,function(a,b){b?c.notification("net",$('<div class="notification-content">User \''+b+"' disconnected.</div>")):c.notification("net",$('<div class="notification-content">P2P User disconnected.</div>'))}),Eden.Peer.listenTo("error",void 0,function(a){c.notification("error",$('<div class="notification-content">P2P: '+a+"</div>"))}),Eden.Agent.listenTo("error",void 0,function(a,b){if(b){var d=("runtime"==b.type?"Runtime error":"Syntax error")+" in "+a.name+":"+(b.line!=-1?b.line:"")+" -> "+b.messageText(),e="<a href=\"javascript:edenUI.gotoCode('"+a.name+"',"+b.line+');">'+a.name+":"+(b.line!=-1?b.line+1:"")+"</a> "+b.messageText();if(!a.owned||"syntax"!=b.type){console.error(d);var f=$('<pre class="error-item">'+e+"</pre>\n\n");f.on("click",function(){var a="";if(!b.statement||"definition"!=b.statement.type&&"assignment"!=b.statement.type||(a+="    <b>Symbol:</b> "+b.statement.lvalue.name+"\n"),b.lastsymbol&&(a+="    <b>Related Symbol:</b> "+b.lastsymbol+"\n"),String(b.extra).search("SyntaxError")>=0)a+="    <b>JavaScript:</b> "+b.javascriptSource()+"\n",f.html(e+"\n"+a);else if(a+="    <b>Source:</b> <div class='error-source'</div>\n",f.html(e+"\n"+a),b.statement){var c=new Eden.AST(b.edenSource(),(void 0),Symbol.jsAgent),d=new EdenUI.Highlight(f.find(".error-source").get(0));d.highlight(c,-1,-1)}}),c.notification("error",f)}}}),Eden.DB.listenTo("disconnected",this,function(){c.notification("info",$('<div class="notification-content">Disconnected from project server</div>'))})},EdenUI.Notifications.prototype.notification=function(a,b){this.notificationCount++,this.notificationCountElement.html(this.notificationCount),this.notificationCountElement.show();var c;if("error"==a)c=$('<div class="notification-item error"></div>'),c.append($('<div class="notification-icon"><span style="color: red;">&#xf06a;</span></div>'));else{var d,e="#777";switch(a){case"net":d="&#xf0c1;";break;case"log":d="&#xf120;";break;case"warning":d="&#xf071;",e="#f57900";break;case"info":default:d="&#xf129;",e="#29454B"}c=$('<div class="notification-item"></div>'),c.append($('<div class="notification-icon"><span style="color: '+e+'">'+d+"</span></div>"))}"string"==typeof b?c.append($('<div class="notification-content">'+b+"</div>")):c.append(b),this.notificationContent.prepend(c),this.notificationContent.prop("scrollTop",0)},EdenUI.Notifications.prototype.clearCount=function(){this.notificationCountElement.hide(),this.notificationCount=0},EdenUI.Sharebox=function(a){function b(){var a=c.sharebox.find(".projecttags"),b=a.get(0).textContent;if(tags=b.toLowerCase().replace(/[\!\'\-\?\&]/g,"").split(" "),tags&&tags.length>0){for(var d="",e=0;e<tags.length;e++)d+='<span class="project-tag">'+tags[e]+"</span>",e<tags.length-1&&(d+=" ");a.html(d)}}var c=this;this.title=void 0,this.visible=!1,this.sharebox=a,this.sharebox.html('<div class="menubar-sharebox-title"><span class="menubar-shareicon">&#xf1e0;</span>Save and Share</div><div class="menubar-sharebox-content"><div id="projectoptions"></div><div id="projectuploadbox"></div><br/><br/>Download to file: <span class="downloadurl"></span></div>');var d=this.sharebox.find("#projectoptions");d.html('<h3>Tags</h3><div>Add tags to your project:<div class="projecttags" contenteditable></div></div><h3>Thumbnail</h3><div><input class="thumbnailtype" type="radio" name="thumbnail" value="auto" checked>Default</input><input class="thumbnailtype" type="radio" name="thumbnail" value="canvas">Canvas</input><input class="thumbnailtype" type="radio" name="thumbnail" value="manual">File</input><div id="projectthumb"></div></div><h3>Description</h3><div><textarea></textarea></div>'),d.accordion({collapsible:!0,heightStyle:"content",classes:{"ui-accordian-header":"ui-corner-top sharebox-header","ui-accordian-header-collapsed":"ui-corner-all sharebox-header-collapsed"}});var e=d.find("#projectthumb");this.thumbdata=void 0,this.thumbimg=$("<img></img>"),e.append(this.thumbimg),this.sharebox.on("change",".thumbnailtype",function(a){var b=a.currentTarget.value;if("manual"==b){e.html("");var d=$('<input type="file"></input>');e.append(d),d.change(function(){e.html("");var a=d.get(0),b=a.files[0],f=new FileReader;f.onload=function(a){var b=document.createElement("canvas");b.setAttribute("width","200"),b.setAttribute("height","112");var d=b.getContext("2d"),f=new Image;f.src=a.target.result;var g,h,i,j,k=f.width,l=f.height,m=200,n=112,o=k/l,p=m/n;o<p?(g=n,h=k*(g/l),i=(m-h)/2,j=0):o>p?(h=m,g=l*(h/k),i=0,j=(n-g)/2):(g=n,h=m,i=0,j=0),d.drawImage(f,i,j,h,g);var q=b.toDataURL("image/png");c.thumbdata=q;var r=$("<img></img>");e.append(r),r.get(0).src=q},f.readAsDataURL(b)})}else if("canvas"==b)e.html(""),c.thumbdata=void 0;else if("auto"==b){e.html("");var f=$("<img></img>");e.append(f),edenUI.plugins.Canvas2D.thumbnail(function(a){c.thumbdata=a,f.get(0).src=a})}}),this.sharebox.on("keydown",".projecttags",function(a){if(32==a.keyCode){var b=c.sharebox.find(".projecttags").get(0),d=document.createTextNode(" ");b.appendChild(d);var e=document.createElement("span");e.className="project-tag",e.innerHTML="&#8203;",b.appendChild(e);var f=document.createRange(),g=window.getSelection();f.selectNodeContents(e),f.collapse(!1),g.removeAllRanges(),g.addRange(f),a.preventDefault()}}),this.sharebox.on("blur",".projecttags",b),this.sharebox.on("click",".upload",function(a){var b=c.title.textContent,d=c.sharebox.find(".projecttags"),e=d.get(0).textContent.replace(/\u200B/g,"");return e=e.toLowerCase().replace(/[\!\'\-\?\&]/g,"").split(" "),"New Project"==b?void c.sharebox.find("#projectuploadbox").html('<br/><br/>Please give your project a name by editing the "New Project" title in the top left.'):(c.sharebox.find("#projectuploadbox").html('<br/><br/>Saved to your projects and shared at:<div class="projecturl">Saving...</div>'),
void Eden.Agent.uploadAll(function(){console.log("ALL UPLOADED"),Eden.DB.save(b,function(a){if(a.path){var b="?load="+a.path+"&tag="+a.saveID;c.sharebox.find(".projecturl").html(window.location.href+b);var d=document.createRange();d.selectNodeContents(c.sharebox.find(".projecturl").get(0));var e=window.getSelection();e.removeAllRanges(),e.addRange(d)}else c.sharebox.find(".projecturl").html("<b>Save failed</b>, not logged in.")},{thumb:c.thumbdata,tags:e,hidden:e.indexOf("hidden")>=0})}))}),this.sharebox.on("click",".publish",function(a){var b=c.title.textContent,d=c.sharebox.find(".projecttags"),e=d.get(0).textContent.replace(/\u200B/g,"");return e=e.toLowerCase().replace(/[\!\'\-\?\&]/g,"").split(" "),"New Project"==b?void c.sharebox.find("#projectuploadbox").html('<br/><br/>Please give your project a name by editing the "New Project" title in the top left.'):(c.sharebox.find("#projectuploadbox").html('<br/><br/>Saved to your projects and shared at:<div class="projecturl">Saving...</div>'),void Eden.Agent.publishAll(function(){Eden.DB.save(b,function(a){if(a.path){var b="?load="+a.path+"&tag="+a.saveID;c.sharebox.find(".projecturl").html(window.location.href+b);var d=document.createRange();d.selectNodeContents(c.sharebox.find(".projecturl").get(0));var e=window.getSelection();e.removeAllRanges(),e.addRange(d)}else c.sharebox.find(".projecturl").html("<b>Save failed</b>, not logged in.")},{publish:!0,thumb:c.thumbdata,tags:e,hidden:e.indexOf("hidden")>=0,official:e.indexOf("official")>=0})}))})},EdenUI.Sharebox.prototype.show=function(){this.visible||this.update(),this.visible=!0},EdenUI.Sharebox.prototype.hide=function(){this.visible=!1},EdenUI.Sharebox.prototype.update=function(){var a=this;void 0===a.title&&(a.title=$(document).find(".jseden-title").get(0));var b=a.title.textContent;Eden.DB.isLoggedIn()?a.sharebox.find("#projectuploadbox").html('<button class="sharebox-button upload">Upload</button><button class="sharebox-button publish" style="margin-top: 20px;">Publish</button>'):a.sharebox.find("#projectuploadbox").html(""),edenUI.plugins.Canvas2D.thumbnail(function(b){a.thumbimg.get(0).src=b,a.thumbdata=b});var c;if((void 0===c||0==c.length)&&(c=b.toLowerCase().replace(/[\!\'\-\?\&]/g,"").split(" "),Eden.DB.isLoggedIn())){var d=Eden.DB.username.toLowerCase().replace(/[\!\'\-\?\&]/g,"").split(" ");c.push.apply(c,d)}if(c&&c.length>0){for(var e="",f=0;f<c.length;f++)e+='<span class="project-tag">'+c[f]+"</span>",f<c.length-1&&(e+=" ");a.sharebox.find(".projecttags").html(e)}a.projectsource=Eden.DB.generateSource(b);var g="data:application/octet-stream,"+encodeURIComponent(a.projectsource);a.sharebox.find(".downloadurl").html('<a href="'+g+'" download="'+b+'.js-e">'+b+".js-e</a>")},EdenUI.SearchBox=function(a){var b=this;this.element=a,a.on("click",".menubar-search-result",function(a){var c=a.currentTarget.getAttribute("data-obs"),d=a.currentTarget.getAttribute("data-script");c&&""!=c?b.updateSymbolDetails($(a.currentTarget),c):d&&""!=d&&Eden.Agent.importAgent(d,"default",["noexec"],function(a){a.ast.mainDoxyComment&&a.ast.mainDoxyComment.getControls()["@run"]?(console.log("DOXY CONTROLS RUN"),a.execute()):edenUI.gotoCode(d,-1)})}),a.on("click",".edit-result",function(a){edenUI.gotoCode("/"+a.target.parentNode.parentNode.getAttribute("data-obs"),-1)})},EdenUI.SearchBox.prototype.updateSymbolDetails=function(a,b){var c=a.find(".doxy-search-details");if(c&&c.length>0&&eden.dictionary[b]){var d=eden.dictionary[b].pretty();d&&d.length>0&&c.html(d)}},EdenUI.SearchBox.prototype.makeSymbolResult=function(a){var b,c=eden.root.lookup(a);if(c.eden_definition)b=c.eden_definition.startsWith("func")?"func "+a:c.eden_definition.startsWith("proc")?"proc "+a:c.eden_definition.length>55?c.eden_definition.substr(0,55)+"...":c.eden_definition;else{var d=Eden.edenCodeForValue(c.value());b=d.length+a.length+3>55?a+" = "+d.substr(0,55-a.length-3)+"...":a+" = "+d+";"}var e='<div class="menubar-search-rescontrols"><span class="edit-result">&#xf044;</span><span>&#xf06e;</span></div>',f="";if(eden.dictionary[a]){var g=eden.dictionary[a].brief();g&&g.length>0&&(f='<div class="doxy-search-details"><p>'+g+"</p></div>")}var h=$('<div class="menubar-search-result" data-obs="'+a+'">'+EdenUI.Highlight.html(b)+e+f+"</div>");return h},EdenUI.SearchBox.prototype.makeAgentResult=function(a){var b;if(a.base){b=a.base.getSource(a).split("{")[0],b.length>55&&(b=b.substr(0,55)+"...");var c='<div class="menubar-search-rescontrols"><span>&#xf044;</span><span>&#xf06e;</span></div>',d="";if(a.doxyComment){var e=a.doxyComment.brief();e&&e.length>0&&(d='<div class="doxy-search-details"><p>'+e+"</p></div>")}var f=$('<div class="menubar-search-result" data-agent="'+a.name+'">'+EdenUI.Highlight.html(b)+c+d+"</div>");return f}},EdenUI.SearchBox.prototype.makeStatementResult=function(a){var b,c=a.base;if(void 0===c){for(var d=a.parent;d.parent;)d=d.parent;c=d.base}b=c?c.getSource(a).split("\n")[0]:a.type,b.length>55&&(b=b.substr(0,55)+"...");var e='<div class="menubar-search-rescontrols"><span>&#xf044;</span><span>&#xf06e;</span></div>',f="";if(a.doxyComment){var g=a.doxyComment.brief();g&&g.length>0&&(f='<div class="doxy-search-details"><p>'+g+"</p></div>")}var h=$('<div class="menubar-search-result">'+EdenUI.Highlight.html(b)+e+f+"</div>");return h},EdenUI.SearchBox.prototype.makeSourceResult=function(a){var b;b=a,b.length>55&&(b=b.substr(0,55)+"...");var c='<div class="menubar-search-rescontrols"><span>&#xf044;</span><span>&#xf06e;</span></div>',d="",e=$('<div class="menubar-search-result">'+EdenUI.Highlight.html(b)+c+d+"</div>");return e},EdenUI.SearchBox.prototype.makeScriptResult=function(a){var b,c=Eden.DB.meta[a];b=c&&c.title&&"Script View"!=c.title&&"Agent"!=c.title?c.title:a,b.length>55&&(b=b.substr(0,55)+"..."),b='<span class="search-scriptres">&#xf15c;</span> '+b;var d='<div class="menubar-search-rescontrols"><span class="edit-result">&#xf044;</span><span>&#xf06e;</span></div>',e="";if(Eden.Agent.agents[a]){var f=Eden.Agent.agents[a];if(f.ast&&f.ast.mainDoxyComment){var g=f.ast.mainDoxyComment.brief();g&&g.length>0&&(e='<div class="doxy-search-details"><p>'+g+"</p></div>")}}var h=$('<div class="menubar-search-result" data-script="'+a+'">'+b+d+e+"</div>");return h},EdenUI.SearchBox.prototype.updateSearch=function(a){if(a&&""!=a){this.element.show();var b=this;Eden.Query.search(a,function(a){function c(){var d=$('<div class="menubar-search-more">&#xf078;</div>');e.append(d),d.on("click",function(){e.html("");for(var d=0;f<a.all.length&&!(d>g);f++){d++;var h;"object"==typeof a.all[f]?"when"==a.all[f].type&&(h=b.makeAgentResult(a.all[f])):h="/"==a.all[f].charAt(0)?b.makeSymbolResult(a.all[f].slice(1)):a.all[f].startsWith("*script")?b.makeScriptResult(a.all[f].substring(7)):b.makeSourceResult(a.all[f]),e.append(h)}f<a.all.length&&c()})}b.element.html("");var d=$('<div class="menubar-search-outer"></div>'),e=$('<div class="menubar-search-results"></div>');d.append(e),b.element.append(d);var f=0,g=8,h=0;for(f=0;f<a.all.length&&!(h>=g);f++){h++;var i;"object"==typeof a.all[f]?"when"==a.all[f].type?i=b.makeAgentResult(a.all[f]):a.all[f].type&&(i=b.makeStatementResult(a.all[f])):i="/"==a.all[f].charAt(0)?b.makeSymbolResult(a.all[f].slice(1)):a.all[f].startsWith("*script")?b.makeScriptResult(a.all[f].substring(7)):b.makeSourceResult(a.all[f]),e.append(i)}f<a.all.length&&c()})}else this.element.hide()},EdenUI.ScriptBox=function(a,b){function c(a){q.dirty=!0,q.rebuild()}function d(a){if(q.ast&&q.ast.script&&!q.ast.hasErrors()&&13==a.keyCode&&"EOF"==q.ast.token&&q.intextarea.selectionStart>=q.ast.script.end)return q.ast.execute(EdenUI.ScriptBox.consoleAgent),q.history.push(q.ast.stream.code),q.historyindex=q.history.length,window.localStorage&&window.localStorage.setItem("console_history",JSON.stringify(q.history)),$(q.outdiv).find(".fake-caret").remove(),q.$codearea.append($("<div>"+q.outdiv.innerHTML+"</div>")),q.codearea.scrollTop=q.codearea.scrollHeight,q.setSource(""),void a.preventDefault();if(a.altKey)187==a.keyCode||61==a.keyCode?a.preventDefault():189==a.keyCode||173==a.keyCode?a.preventDefault():48==a.keyCode&&a.preventDefault();else if(a.ctrlKey||17==a.keyCode||16==a.keyCode){if(a.ctrlKey)if(a.shiftKey){if(37==a.keyCode||38==a.keyCode||39==a.keyCode||40==a.keyCode||36==a.keyCode||35==a.keyCode)return q.setCaretToFakeCaret(),void q.outdiv.focus()}else 38===a.keyCode?onPrevious():40===a.keyCode?onNext():86===a.keyCode||65===a.keyCode&&(a.preventDefault(),q.outdiv.focus())}else if(9==a.keyCode){a.preventDefault();var b=q.intextarea.selectionStart,c=q.intextarea.selectionEnd;q.intextarea.value=q.intextarea.value.substring(0,b)+"\t"+q.intextarea.value.substring(c),q.intextarea.selectionStart=q.intextarea.selectionEnd=b+1,q.rebuild()}else if(37==a.keyCode||38==a.keyCode||39==a.keyCode||40==a.keyCode||36==a.keyCode||35==a.keyCode){if(a.shiftKey)return q.setCaretToFakeCaret(),void q.outdiv.focus();38==a.keyCode?q.historyindex>0&&(q.historyindex--,q.setSource(q.history[q.historyindex]),a.preventDefault()):40==a.keyCode&&(q.historyindex<q.history.length-1?(q.historyindex++,q.setSource(q.history[q.historyindex]),a.preventDefault()):(q.historyindex=q.history.length,q.setSource(""))),q.updateLineCachedHighlight()}else(13==a.keyCode||8==a.keyCode&&10==q.intextarea.value.charCodeAt(q.intextarea.selectionStart-1))&&(q.refreshentire=!0)}function e(a){q.refreshentire=!0}function f(a){a.altKey||(a.ctrlKey||37!=a.keyCode&&38!=a.keyCode&&39!=a.keyCode&&40!=a.keyCode&&36!=a.keyCode&&35!=a.keyCode?(a.ctrlKey||8!=a.keyCode||""!=q.intextarea.value)&&q.rebuild():(q.updateLineCachedHighlight(),36==a.keyCode||35==a.keyCode))}function g(a){if(!a.altKey)if("pointer"==q.outdiv.style.cursor&&(q.outdiv.style.cursor="initial"),16==a.keyCode||17==a.keyCode||a.ctrlKey&&67==a.keyCode);else if(!a.shiftKey||37!=a.keyCode&&38!=a.keyCode&&39!=a.keyCode&&40!=a.keyCode&&35!=a.keyCode&&36!=a.keyCode){var b=getCaretCharacterOffsetWithin(q.outdiv,q.shadow),c=getStartCaretCharacterOffsetWithin(q.outdiv,q.shadow);q.intextarea.focus(),q.intextarea.selectionEnd=b,q.intextarea.selectionStart=c,c!=b&&(q.refreshentire=!0)}}function h(a){q.intextarea.focus(),setTimeout(function(){q.updateEntireHighlight()},0)}function i(a){}function j(a){$(q.outdiv).find(".fake-caret").remove(),q.hideInfoBox()}function k(a){}function l(a){if(q.hideInfoBox(),document.activeElement===q.outdiv){var b=getCaretCharacterOffsetWithin(q.outdiv,q.shadow),c=getStartCaretCharacterOffsetWithin(q.outdiv,q.shadow);if(c!=b)q.refreshentire=!0;else{var d=q.currentlineno;q.intextarea.focus(),q.intextarea.selectionEnd=b,q.intextarea.selectionStart=b,q.ast&&(q.highlighter.highlight(q.ast,d,b),q.updateLineCachedHighlight())}}}function m(a){var b=parseInt(a.currentTarget.getAttribute("data-statement")),c=Eden.Statement.statements[b];if(c.statement&&0==c.statement.errors.length)c.statement.execute(eden.root,c.ast,c.ast,eden.root.scope),"when"==c.statement.type&&(Eden.Statement.active[c.id]=!Eden.Statement.active[c.id],changeClass(a.currentTarget,"active",Eden.Statement.active[c.id]));else if(c.ast&&c.ast.script){var d=c.ast.script.errors[0];q.showInfoBox(a.target.offsetLeft+20,a.target.offsetTop-q.codearea.scrollTop+25,"error",d.messageText())}q.updateLineCachedHighlight()}function n(a){a.currentTarget.className.indexOf("stuck")>=0?changeClass(a.currentTarget,"stuck",!1):changeClass(a.currentTarget,"stuck",!0)}function o(a){if(q.dragline==-1&&(void 0===q.outdiv||a.currentTarget!==q.outdiv.parentNode)){var b=parseInt(a.currentTarget.getAttribute("data-statement"));q.moveTo(b)}}function p(a){var b=a.currentTarget.parentNode.parentNode,c=parseInt(b.getAttribute("data-statement"));b.removeChild(q.valuedivs[c][0]),delete q.valuedivs[c]}this.changeCB=void 0,this.outer=a,this.savecb=void 0,this.contents=$(this.outer),this.contents.html('<div class="scriptbox-inputhider"><textarea autofocus tabindex="1" class="hidden-textarea"></textarea><div class="scriptbox-codearea"></div></div><div class="scriptbox-outputbox"><div class="scriptbox-statement"><div class="scriptbox-output" contenteditable="true" spellcheck="false"></div></div></div><div class="info-bar"></div></div>'),this.currentstatement=void 0,this.statements={},this.$codearea=this.contents.find(".scriptbox-codearea"),this.codearea=this.$codearea.get(0),this.intextarea=this.contents.find(".hidden-textarea").get(0),this.outdiv=this.contents.find(".scriptbox-output").get(0),this.$codearea.sortable({revert:100,handle:".grippy",distance:10,axis:"y",scroll:!1}),this.infobox=this.contents.find(".info-bar").get(0),this.outputbox=this.contents.find(".scriptbox-outputbox").get(0),this.suggestions=this.contents.find(".eden_suggestions"),this.suggestions.hide(),$(this.infobox).hide(),this.highlighter=new EdenUI.Highlight(this.outdiv),this.enable(),this.ast=void 0,this.refreshentire=!0,this.dirty=!0,this.rebuildtimer=void 0,this.rebuildtimeout=10,this.currentlineno=1,this.currentcharno=0,this.dragint=!1,this.dragline=-1,this.dragvalue=0,this.draglast=0,this.history=void 0,window.localStorage?this.history=JSON.parse(window.localStorage.getItem("console_history"))||[]:this.history=[],this.historyindex=this.history.length;var q=this;this.contents.on("input",".hidden-textarea",c).on("keydown",".hidden-textarea",d).on("keyup",".hidden-textarea",f).on("paste",".hidden-textarea",e).on("keydown",".scriptbox-output",g).on("keyup",".scriptbox-output",i).on("paste",".scriptbox-output",h).on("blur",".hidden-textarea",j).on("focus",".hidden-textarea",k).on("mouseup",".scriptbox-output",l).on("click",".scriptbox-gutter",m).on("click",".scriptbox-sticky",n).on("click",".scriptbox-valueclose",p).on("mousedown",".scriptbox-statement",o),this.setSource(""),setInterval(function(){for(var a in q.valuedivs){var b=Eden.Statement.statements[a];if(b){var c=EdenUI.htmlForStatement(b,30,30);b.isActive();q.valuedivs[a].innerHTML='<div class="eden-line">'+c+"</div>"}}},200)},EdenUI.ScriptBox.consoleAgent={local:!1,name:"*Console"},EdenUI.ScriptBox.prototype.focus=function(){if(this.outdiv.focus(),document.activeElement===this.outdiv){var a=this.intextarea.value.length,b=this.currentlineno;this.intextarea.focus(),this.intextarea.selectionEnd=a,this.intextarea.selectionStart=a,this.ast&&(this.highlighter.highlight(this.ast,b,a),this.updateLineCachedHighlight())}},EdenUI.ScriptBox.prototype.setCaretToFakeCaret=function(){var a=$(this.outdiv).find(".fake-caret").get(0),b=document.createRange(),c=window.getSelection();a.nextSibling&&(a=a.nextSibling),b.setStart(a,0),b.collapse(!0),c.removeAllRanges(),c.addRange(b),$(this.outdiv).remove(".fake-caret")},EdenUI.ScriptBox.prototype.setChangeCB=function(a){this.savecb=a},EdenUI.ScriptBox.prototype.hideInfoBox=function(){$(this.infobox).hide("fast")},EdenUI.ScriptBox.prototype.showInfoBox=function(a,b,c,d){console.log("SHOW INFO BOX "+d),"warning"==c?this.infobox.innerHTML="<div class='info-warnitem'><span>"+d+"</span></div>":"error"==c&&(this.infobox.innerHTML="<div class='info-erroritem'><span>"+d+"</span></div>");var e=$(this.infobox);e.css("top",""+b+"px"),e.css("left",""+a+"px"),$(this.infobox).show()},EdenUI.ScriptBox.prototype.disable=function(){if(this.outdiv){changeClass(this.outdiv,"goto",!1),this.valuedivs[this.currentstatement]=this.outdiv;var a=EdenUI.htmlForStatement(Eden.Statement.statements[this.currentstatement],30,30);this.valuedivs[this.currentstatement].innerHTML='<div class="eden-line">'+a+"</div>",changeClass(this.outdiv.parentNode,"readonly",!0),this.ast}},EdenUI.ScriptBox.prototype.enable=function(){this.outdiv&&(this.outdiv.contentEditable=!0,changeClass(this.outdiv.parentNode,"readonly",!1),this.ast&&this.highlighter.highlight(this.ast,-1,-1))},EdenUI.ScriptBox.prototype.setSource=function(a){this.intextarea.value=a,this.ast=new Eden.AST(a,(void 0),EdenUI.ScriptBox.consoleAgent),this.highlightContent(this.ast,-1,0),this.intextarea.focus(),this.ast.script&&0==this.ast.script.errors.length?(console.log("NO ERRORS!!!"),changeClass(this.outdiv.parentNode,"error",!1)):""==a?changeClass(this.outdiv.parentNode,"error",!1):changeClass(this.outdiv.parentNode,"error",!0),this.outdiv.contentEditable=!0},EdenUI.ScriptBox.prototype.updateLineHighlight=function(){var a=-1,b=-1;document.activeElement===this.intextarea&&(b=this.intextarea.selectionEnd,a=this.getLineNumber(this.intextarea)),this.ast=new Eden.AST(this.intextarea.value,(void 0),EdenUI.ScriptBox.consoleAgent),this.highlighter.ast=this.ast,this.runScript(a),this.highlightContent(this.ast,a,b),this.ast.script&&0==this.ast.script.errors.length?(console.log("NO ERRORS!!!"),changeClass(this.outdiv.parentNode,"error",!1)):changeClass(this.outdiv.parentNode,"error",!0)},EdenUI.ScriptBox.prototype.updateLineCachedHighlight=function(){var a=-1,b=-1;document.activeElement===this.intextarea&&(b=this.intextarea.selectionEnd,a=this.getLineNumber(this.intextarea)),this.highlightContent(this.ast,a,b)},EdenUI.ScriptBox.prototype.updateEntireHighlight=function(a){this.ast=new Eden.AST(this.intextarea.value,(void 0),EdenUI.ScriptBox.consoleAgent),this.highlighter.ast=this.ast;var b=-1;document.activeElement===this.intextarea&&(b=this.intextarea.selectionEnd),a&&this.runScript(0),this.highlightContent(this.ast,-1,b),this.ast.script&&0==this.ast.script.errors.length?console.log("NO ERROR so execute!"):console.log("indicated error")},EdenUI.ScriptBox.prototype.highlightContent=function(a,b,c){if(this.highlighter.highlight(a,b,c),a.mainDoxyComment&&(b==-1||b>=1&&b<=a.mainDoxyComment.endline)){var d=a.mainDoxyComment.content.match(/@[a-z]+.*\n/gi);if(d)for(var e=0;e<d.length;e++){var f=d[e].search(/\s/);if(f>=0){d[e].substring(0,f),d[e].substr(f).trim()}}}document.activeElement!==this.intextarea&&$(this.outdiv).find(".fake-caret").addClass("fake-blur-caret");var g=this;$(this.outdiv).find(".eden-number").draggable({helper:function(a){return $("<div class='eden-drag-helper'></div>")},axis:"x",distance:5,drag:function(a,b){var c;if(g.dragint?c=Math.round(g.dragvalue+(b.position.left-g.dragstart)/2):(c=g.dragvalue+.005*(b.position.left-g.dragstart),c=c.toFixed(4)),c!=g.draglast){g.draglast=c,a.target.innerHTML=""+c;var d=a.target.parentNode.textContent;"\n"==d.charAt(d.length-1)&&(d=d.slice(0,-1)),g.replaceLine(g.dragline,d),g.ast=new Eden.AST(g.intextarea.value,(void 0),EdenUI.ScriptBox.consoleAgent),g.highlighter.ast=g.ast,g.highlightContent(g.ast,g.dragline,-1),Eden.Statement.statements[g.currentstatement].setSource(g.intextarea.value,g.ast)}},start:function(a,b){g.edited=!0,g.dragline=g.findElementLineNumber(a.target),g.dragstart=b.position.left;var c=a.target.textContent;c.indexOf(".")==-1?(g.dragvalue=parseInt(c),g.dragint=!0):(g.dragvalue=parseFloat(c),g.dragint=!1),g.draglast=g.dragvalue,$(a.target).addClass("eden-select"),$(g.outdiv).css("cursor","ew-resize")},stop:function(a,b){$(a.target).removeClass("eden-select"),$(g.outdiv).css("cursor","text"),g.dragline=-1},cursor:"move",cursorAt:{top:-5,left:-5}}).click(function(){$(this).draggable({disabled:!0})}).blur(function(){$(this).draggable({disabled:!1})})},EdenUI.ScriptBox.prototype.clear=function(){this.$codearea.html(""),this.setSource("")},EdenUI.ScriptBox.prototype.getLineNumber=function(a){var b=a.value.substr(0,a.selectionStart).split("\n");return this.currentlineno=b.length,this.currentcharno=b[b.length-1].length,this.currentlineno},EdenUI.ScriptBox.prototype.doRebuild=function(){this.refreshentire?(this.updateEntireHighlight(),this.refreshentire=!1):this.updateLineHighlight()},EdenUI.ScriptBox.prototype.runScript=function(a){},EdenUI.ScriptBox.prototype.rebuild=function(){clearTimeout(this.rebuildtimer);var a=this;this.rebuildtimer=setTimeout(function(){a.doRebuild()},this.rebuildinterval)},EdenUI.ScriptBox.prototype.findElementLineNumber=function(a){for(var b=a;b.parentNode!==this.outdiv;)b=b.parentNode;for(var c=0;c<this.outdiv.childNodes.length;c++)if(this.outdiv.childNodes[c]===b)return c;return-1},EdenUI.ScriptBox.prototype.replaceLine=function(a,b){var c=this.intextarea.value.split("\n");c[a]=b,this.intextarea.value=c.join("\n")},EdenUI.Explorer=function(){var a=this;this.element=$('<div class="explore-main"><div class="explore-controls"><button class="explorer-control capture"><span class="explorer-control-icon">&#xf111;</span>Capture</button><button class="explorer-control clear"><span class="explorer-control-icon">&#xf05e;</span>Clear</button><span class="explorerfilter"><input type="text" class="explorerfilter" placeholder="Filter..."></input></span></div><div class="explore-symbols"></div><div class="explore-console"><div class="explore-console-buttons"><div style="margin-top: 4px; float: left;">Script Input</div><button class="control-button clear-button control-enabled" style="float: right;">&#xf05e;</button></div><div class="explore-console-code"></div></div></div>'),$("#jseden-main").append(this.element),this.results=this.element.find(".explore-symbols"),this.consoleele=this.element.find(".explore-console-code"),this.searchbox=this.element.find(".explorerfilter"),this.element.resizable({handles:"w"}),this.watchobs={},this.capture=!1,this.delay=100,this.delay2=20,this.timeout=void 0,this.timeout2=void 0,this.mode="tree",this.index={},this.todo={},this.filter=void 0,this.console=new EdenUI.ScriptBox(this.consoleele.get(0),{nobuttons:!0}),eden.root.addGlobal(function(b,c){var d=b.name.slice(1);!a.capture||c==Symbol.EXPIRED&&void 0!==a.watchobs[d]||void 0!==a.filter&&!a.filter[d]?(a.todo[d]=!0,void 0===a.timeout2&&(a.timeout2=setTimeout(function(){a.timeout2=void 0;var b=a.todo;a.todo={};for(var c in a.index)if(b[c]){var d=eden.root.symbols[c];if(void 0===d){for(var e=0;e<a.index[c].length;e++)a.removeEntry(c,a.index[c][e]);delete a.index[c]}else for(var e=0;e<a.index[c].length;e++)a.updateEntry(d,a.index[c][e])}},a.delay2))):(void 0===a.watchobs[d]?a.watchobs[b.name.slice(1)]=1:a.watchobs[d].lastupdate=1,a.triggerUpdate())}),this.element.on("click",".clear-button",function(b){a.console.clear()}),this.element.on("click",".clear",function(a){var b=eden.root.lookup("jseden_explorer_clear");b.eden_definition||b.assign(!0,eden.root.scope,Symbol.localJSAgent)}),this.element.on("click",".capture",function(a){var b=eden.root.lookup("jseden_explorer_capture");b.eden_definition||b.assign(!b.value(),eden.root.scope,Symbol.localJSAgent)}),this.results.on("click",".explore-observable",function(b){var c=b.currentTarget.parentNode.parentNode.parentNode.getAttribute("data-obs");if(b.ctrlKey||b.metaKey)console.log("GOTO",c),edenUI.gotoCode("/"+c),b.stopPropagation();else{var d=eden.root.symbols[c];d&&(d.eden_definition?a.console.setSource(d.eden_definition):a.console.setSource(c+" = "+Eden.edenCodeForValue(d.value())+";"),a.console.focus())}}),this.results.on("click",".explore-expand-value",function(b){var c=b.currentTarget.parentNode.parentNode.parentNode,d=c.getAttribute("data-obs");a.updateEntry(eden.root.lookup(d),b.currentTarget.parentNode,!0)}),this.results.on("click",".eden-path",function(a){var b=a.currentTarget.textContent;edenUI.gotoCode(b,-1)}),this.results.on("click",".explore-entry-icon",function(b){var c=b.currentTarget.parentNode.parentNode.parentNode,d=c.getAttribute("data-obs"),e="true"==c.getAttribute("data-expanded");if(e){b.currentTarget.innerHTML="&#xf067;",c.setAttribute("data-expanded","false");for(var f=c.firstChild;f;){var g=f.nextSibling;"DIV"==f.nodeName&&"explore-entry-inner"!=f.className&&0==f.className.includes("active")&&c.removeChild(f),f=g}}else{b.currentTarget.innerHTML="&#xf068;",c.setAttribute("data-expanded","true");for(var h=eden.root.symbols[d],i={},f=c.firstChild;f;)"DIV"==f.nodeName&&(i[f.getAttribute("data-obs")]=!0),f=f.nextSibling;for(var j in h.dependencies)if(!i[j.slice(1)]){var k=h.dependencies[j],d=j.slice(1),l=$('<div class="explore-entry" data-obs="'+d+'"><div class="explore-entry-inner"><span><span class="explore-entry-icon">&#xf067;</span><span class="explore-observable">'+d+'</span> </span><div class="symvalue"></div></div></div>'),m=l.find(".symvalue").get(0);a.updateEntry(k,m),void 0===a.index[d]&&(a.index[d]=[]),a.index[d].push(m),c.appendChild(l.get(0))}$(c).append(a.makeAgentEntry(h.last_modified_by))}});var b=eden.root.lookup("jseden_explorer_enabled"),c=b.value();c||(this.enabled=!1,this.element.hide()),b.addJSObserver("explorer",function(b,c){a.enabled=c,c?eden.root.lookup("jseden_explorer_visible").value()&&a.element.show():a.element.hide()});var d=eden.root.lookup("jseden_explorer_visible"),e=d.value();e||this.element.hide(),d.addJSObserver("explorer",function(b,c){c&&a.enabled?a.element.show():a.element.hide()});var f=eden.root.lookup("jseden_explorer_search"),g=f.value();g&&this.searchbox.val(searchval),f.addJSObserver("explorer",function(b,c){void 0!==c&&"*JavaScript"!=b.last_modified_by.name&&a.searchbox.val(c)}),this.searchbox.on("keyup",function(a){void 0===f.eden_definition&&f.assign(a.target.value,eden.root.scope,Symbol.localJSAgent)});var h=eden.root.lookup("jseden_explorer_watch"),i=h.value();Array.isArray(i)&&(this.clear(),this.watch(i)),h.addJSObserver("explorer",function(b,c){Array.isArray(c)&&(a.capture?a.filter=void 0:a.clear(),a.watch(c))});var j=eden.root.lookup("jseden_explorer_zoom"),k=j.value();j.addJSObserver("explorer",function(b,c){if("number"==typeof c&&c>0){var d=10*c;a.results.css("font-size",""+d+"pt")}}),void 0===k&&j.assign(1,eden.root.scope,Symbol.defaultAgent);var l=eden.root.lookup("jseden_explorer_capture");l.addJSObserver("explorer",function(b,c){c?(a.record(),a.element.find(".capture").addClass("active")):(a.capture=!1,a.element.find(".capture").removeClass("active"))}),l.value()&&a.record();var m=eden.root.lookup("jseden_explorer_clear");m.addJSObserver("explorer",function(b,c){c&&a.clear()})},EdenUI.Explorer.MAXHIGHLIGHTLENGTH=1e3,EdenUI.Explorer.prototype.triggerUpdate=function(){if(void 0===this.timeout){var a=this;this.timeout=setTimeout(function(){a.index={},a.timeout=void 0,"list"==a.mode?a.updateList():"tree"==a.mode?a.updateTree():"graph"==a.mode&&a.updateGraph()},this.delay)}},EdenUI.Explorer.prototype.updateList=function(){},EdenUI.Explorer.prototype.makeAgentEntry=function(a){var b=a.name;if(b.startsWith("*Console"))return $('<div class="explore-entry"><span class="explore-entry-icon">&#xf108;</span> <b>console</b></div>');if(b.startsWith("*When")){var c=b.split(":"),d=c[1].split("/");return d=d[d.length-1],c=d+":"+c[2],$('<div class="explore-entry"><span class="explore-entry-icon">&#xf183;</span><span class="eden-keyword">when</span> <span class="eden-path">'+c+"</span></div>")}if(b.startsWith("*Action")){var c=b.split(":"),d=c[1].split("/");return d=d[d.length-1],c=d+":"+c[2],$('<div class="explore-entry"><span class="explore-entry-icon">&#xf183;</span><span class="eden-keyword">action</span> <span class="eden-path">'+c+"</span></div>")}if("/"==b.charAt(0)){if(a.eden_definition&&a.eden_definition.startsWith("proc"))return $('<div class="explore-entry"><span class="explore-entry-icon">&#xf183;</span><span class="eden-keyword">proc</span> <span class="eden-path">'+b.slice(1)+"</span></div>")}else if("*"!=b.charAt(0))return $('<div class="explore-entry"><span class="explore-entry-icon">&#xf15c;</span><span class="eden-path">'+b+"</span></div>")},EdenUI.Explorer.prototype.removeEntry=function(a,b){b.innerHTML='<span style="font-weight: bold; color: red">DELETED</span>',delete this.watchobs[a],this.triggerUpdate()},EdenUI.Explorer.prototype.updateEntry=function(a,b,c){if(a){var d,e,f=a.value();if(a.eden_definition&&a.eden_definition.startsWith("func"))e='<span class="eden-keyword">func</span>';else{if(c){var g=Eden.edenCodeForValue(f,void 0,2);d=g.length<EdenUI.Explorer.MAXHIGHLIGHTLENGTH?EdenUI.Highlight.html(g,!0):g}else if(Array.isArray(f))d='[.. <span class="explore-expand-value">&#xf0fe;</span> ..]';else{var g=Eden.edenCodeForValue(f,void 0,2);d=g.length<EdenUI.Explorer.MAXHIGHLIGHTLENGTH?EdenUI.Highlight.html(g,!0):g}var h=a.eden_definition?'<span class="eden-keyword">is</span>':"<b>=</b>";e=h+" "+d}b.innerHTML=e}},EdenUI.Explorer.prototype.makeEntry=function(a,b,c){var d=eden.root.symbols[a],e=$('<div class="explore-entry'+(c?" active":"")+'" data-obs="'+a+'"><div class="explore-entry-inner"><span><span class="explore-entry-icon">&#xf067;</span><span class="explore-observable">'+a+'</span> </span><div class="symvalue"></div></div></div>'),f=e.find(".symvalue").get(0);this.updateEntry(d,f),void 0===this.index[a]&&(this.index[a]=[]),this.index[a].push(f);var g=0;if(b)for(var h in b)g++,e.append(this.makeEntry(h,b[h],c));return e},EdenUI.Explorer.prototype.updateTree=function(){var a=this.capture?Eden.Query.dependencyTree(this.watchobs):this.watchobs;this.results.html("");for(var b in a)this.results.append(this.makeEntry(b,this.capture?a[b]:void 0,this.capture))},EdenUI.Explorer.prototype.watch=function(a){this.capture,void 0===this.filter&&a.length>0&&(this.filter={});for(var b=0;b<a.length;b++)this.filter[a[b]]=!0,this.capture||(this.watchobs[a[b]]={elements:[],lastupdate:1});this.triggerUpdate()},EdenUI.Explorer.prototype.record=function(){this.watchobs={},this.triggerUpdate(),this.capture=!0},EdenUI.Explorer.prototype.clear=function(){this.watchobs={},this.filter=void 0,this.triggerUpdate()},EdenUI.Explorer.prototype.displayAsTree=function(){},EdenUI.Explorer.prototype.displayAsList=function(){},EdenUI.Explorer.prototype.displayAsGraph=function(){},EdenUI.Explorer.prototype.search=function(a){},EdenUI.Explorer.prototype.showConsole=function(){},EdenUI.Explorer.prototype.hideConsole=function(){};