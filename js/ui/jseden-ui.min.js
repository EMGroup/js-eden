!function(a){function b(a,b,c,d){function e(){f.insertBefore(b,g)}var f=b.parentNode,g=b.nextSibling;f&&(f.removeChild(b),"boolean"!=typeof c&&(d=c,c=!1),d&&c?d.call(a,b,e):d&&(d.call(a,b),e()))}var c={"int":!0,str:!0,round:!0,min:!0,max:!0,random:!0,floor:!0,ceil:!0,abs:!0,acos:!0,asin:!0,atan:!0,cos:!0,exp:!0,ln:!0,log:!0,mod:!0,randomInteger:!0,randomFloat:!0,sin:!0,sqrt:!0,sum:!0,tan:!0,length:!0,error:!0,substr:!0,type:!0,createView:!0,createCanvas:!0,zonesAt:!0,execute:!0,indexOf:!0,forget:!0,eager:!0,time:!0,writeln:!0,apply:!0,todo:!0,"char":!0,isBoolean:!0,isCallable:!0,isChar:!0,isDefined:!0,isValue:!0,isFunc:!0,isInt:!0,isNaN:!0,isNumber:!0,isObject:!0,isPoint:!0,isProc:!0,showView:!0,array:!0,sublist:!0,reverse:!0,search:!0,sort:!0,tail:!0,concat:!0,decodeHTML:!0},d={autocalc:!0,mouseX:!0,mouseY:!0,mousePosition:!0,screenHeight:!0,screenWidth:!0,PI:!0},e={"true":!0,"false":!0,green:!0},f={"var":!0,"if":!0,"while":!0,"typeof":!0,"this":!0,"function":!0,"return":!0,"else":!0,"break":!0,"continue":!0,"switch":!0,"for":!0,prototype:!0};EdenUI.Highlight=function(a){this.ast=void 0,this.outelement=a,this.line=1,this.currentline=-1,this.mode=0,this.mode_at_line={}},EdenUI.Highlight.isType=function(a){return!1},EdenUI.Highlight.prototype.highlightLine=function(a,b){var g=-1,h=-1,i="",j=!1,k=a.stream,l=!1,m="INVALID",n="INVALID",o=[];this.mode_at_line[this.line-1]?this.mode=this.mode_at_line[this.line-1]:this.mode=0,a.script.errors.length>0&&(g=a.script.errors[0].prevposition,h=a.script.errors[0].position,i=a.script.errors[0].messageText());for(var p="",q=document.createElement("span");;){if(6==this.mode&&(this.mode=0,q=o.pop()),k.position==b){if(""!=p){var r=document.createTextNode(p);q.appendChild(r),p=""}var s=document.createElement("span");s.className="fake-caret",q.appendChild(s)}var t=k.peek();if(10==t){if(""!=p){var r=document.createTextNode(p);q.appendChild(r),p=""}break}if(9!=t&&13!=t&&32!=t&&160!=t){if(""!=p){8==this.mode&&(q=o.pop(),this.mode=1);var r=document.createTextNode(p);q.appendChild(r),p=""}if(n=m,m=k.readToken(),"string"!=typeof m&&console.error("Token error: line = "+this.line+" position = "+k.position),"EOF"==m){if(""!=p){var r=document.createTextNode(p);q.appendChild(r),p=""}break}if("INVALID"!=m){var u=k.tokenType(m),v="",w=k.tokenText();if(-1!=g&&(g<=k.prevposition&&!j&&(j=!0),h<=k.prevposition&&j&&(j=!1),j&&(l=!0)),j&&"EOF"!=a.script.errors[0].token&&(v+="eden-error "),0==this.mode||5==this.mode)if("##"==m){v+="eden-comment";for(var x="";k.valid()&&10!=k.peek();)x+=String.fromCharCode(k.get());w="##"+x}else if("local"==m||"auto"==m||"para"==m)v+="eden-storage";else if("keyword"==u)v+="eden-keyword","import"==k.data.value&&(this.mode=7);else if("NUMBER"==m)v+="eden-number";else if("STRING"==m)v+="eden-string";else if("CHARACTER"==m)v+="eden-string";else if("BOOLEAN"==m)v+="eden-constant";else if("OBSERVABLE"==m)v+=c[k.data.value]?"eden-function":EdenUI.Highlight.isType(k.data.value)?"eden-type":e[k.data.value]?"eden-constant":d[k.data.value]?"eden-special":"eden-observable";else if("`"==m)if(5==this.mode)this.mode=6;else{this.mode=5,o.push(q);var y=document.createElement("span");y.className="eden-backticks",q.appendChild(y),q=y}else"${{"==m?(v+="eden-javascript",this.mode=4):"-"==m&&k.isNumeric(k.peek())?(m=k.readToken(),w="-"+k.tokenText(),v+="eden-number"):"/*"==m?(this.mode=2,v+="eden-comment"):v+="eden-operator";else if(1==this.mode||7==this.mode||8==this.mode){if(7==this.mode){o.push(q);var y=document.createElement("span");y.className="eden-pathblock",q.appendChild(y),q=y,this.mode=8}";"==m?(8==this.mode&&(q=o.pop()),this.mode=0,v+="eden-operator"):v+=Language.importoptions[k.data.value]?"eden-importopt":"eden-path"}else 2==this.mode?"*/"==m?(this.mode=0,v+="eden-comment"):"@"==m?(this.mode=3,v+="eden-doxytag"):v+="eden-comment":3==this.mode?(this.mode=2,v+=Language.doxytags[k.data.value]?"eden-doxytag":"eden-doxytagerror"):4==this.mode&&(v+=("OBSERVABLE"==m||"keyword"==u)&&f.hasOwnProperty(k.data.value)?"eden-javascript-bold":"eden-javascript","}}$"==m&&(this.mode=0));if(k.prevposition<b&&k.position>b){var s=b-k.prevposition,z=w.slice(0,s),A=w.slice(s),B=document.createElement("span");B.className=v,"eden-observable"==v&&B.setAttribute("data-observable",w),B.appendChild(document.createTextNode(z)),q.appendChild(B);var s=document.createElement("span");s.className="fake-caret",q.appendChild(s),B=document.createElement("span"),B.className=v,"eden-observable"==v&&B.setAttribute("data-observable",w),B.appendChild(document.createTextNode(A)),q.appendChild(B)}else{var B=document.createElement("span");B.className=v,"eden-observable"==v&&B.setAttribute("data-observable",w),B.appendChild(document.createTextNode(w)),q.appendChild(B)}}else console.log("INVALID: "+k.peek()),k.skip()}else k.skip(),32==t||160==t?p+=" ":13!=t&&(p+=String.fromCharCode(t))}return o.length>0&&(q=o[0],this.mode=0),this.mode_at_line[this.line]=this.mode,q},EdenUI.Highlight.prototype.highlight=function(a,c,d){this.ast=a,this.line=1;var e=-1,f=-1,g="",h=a.stream;if(void 0!==this.outelement){if(0==a.stream.code.length)return void(this.outelement&&(this.outelement.innerHTML="<div class='eden-line'><span class='fake-caret'></span></div>"));a.script.errors.length>0&&(e=a.script.errors[0].prevposition,f=a.script.errors[0].position,g=a.script.errors[0].messageText()),h.reset();var i=void 0,j=!1,k=0;if(-1==c)b(this,this.outelement,!1,function(){for(this.outelement.innerHTML="",this.mode_at_line={};h.valid();){var b=h.peek();if(10!=b)i=this.highlightLine(a,d);else{j=e>=k&&h.position>=f;var c=document.createElement("div");c.className="eden-line",this.line++,void 0!==i?c.appendChild(i):this.mode_at_line[this.line-1]=this.mode;var g=document.createTextNode("\n");c.appendChild(g),this.outelement.appendChild(c),k=h.position+1,i=void 0,h.skip()}}if(j=e>=k&&h.position>=f,void 0!==i){var c=document.createElement("div");c.className="eden-line",c.appendChild(i),this.outelement.appendChild(c)}else{var c=document.createElement("div");if(d>=h.position){c.className="eden-line";var l=document.createElement("span");l.className="fake-caret",c.appendChild(l)}else c.className="eden-line";this.outelement.appendChild(c)}});else{for(;h.valid()&&this.line<c-1;){var l=h.peek();10==l&&this.line++,h.skip()}for(var m=2;m>=0;m--){this.line=c-m+1;var n=this.outelement.childNodes[c-m];if(void 0!==n){for(;n.firstChild;)n.removeChild(n.firstChild);k=h.position,i=this.highlightLine(a,d),j=e>=k&&h.position>=f,n.appendChild(i);var o=document.createTextNode("\n");n.appendChild(o),h.skip()}}}}}}("undefined"!=typeof window?window:global),EdenUI.ContextMenu=function(a){this.element=$('<div class="eden-contextmenu"></div>'),this.origin=a,this.target=void 0,this.items=[],$(document.body).append(this.element);var b=this;this.element.on("mousedown",".eden-contextmenu-item",function(a){var c=parseInt(a.currentTarget.getAttribute("data-index"));b.items[c].action&&b.items[c].action(b.target)}),this.origin.oncontextmenu=function(a){b.target=a.target,b.element.css("top",""+(a.clientY+10)+"px"),b.element.css("left",""+a.clientX+"px");for(var c=0;c<b.items.length;c++){var d;d="function"==typeof b.items[c].status?b.items[c].status(a.target):b.items[c].status,changeClass(b.items[c].element,"disabled",!d)}b.element.slideDown("fast"),a.preventDefault()},document.addEventListener("mousedown",function(){b.element.hide()},!0)},EdenUI.ContextMenu.prototype.addItem=function(a,b,c,d){var e=$('<div class="eden-contextmenu-item"><span class="eden-contextmenu-icon">'+a+"</span><span>"+b+"</span></div>");e.get(0).setAttribute("data-index",""+this.items.length),this.element.append(e),this.items.push({status:c,action:d,element:e.get(0)})},EdenUI.ContextMenu.prototype.addSeparator=function(){var a=$('<div class="eden-contextmenu-sep"></div>');this.element.append(a)};