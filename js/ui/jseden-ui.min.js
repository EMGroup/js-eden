!function(a){function b(a,b,c,d){function e(){f.insertBefore(b,g)}var f=b.parentNode,g=b.nextSibling;return f?(f.removeChild(b),"boolean"!=typeof c&&(d=c,c=!1),void(d&&c?d.call(a,b,e):d&&(d.call(a,b),e()))):void d.call(a,b)}var c={apply:!0,array:!0,canvasURL:!0,centroid:!0,"char":!0,charCode:!0,choose:!0,compose:!0,concat:!0,curry:!0,decodeHTML:!0,definitionOf:!0,definitionRHS:!0,doDefault:!0,edenCode:!0,escapeRE:!0,foldl:!0,foldr:!0,hasProperty:!0,hslColour:!0,htmlBulletList:!0,htmlNumberedList:!0,positionInList:!0,positionOfRE:!0,substringPosition:!0,"int":!0,isBoolean:!0,isCallable:!0,isChar:!0,isDefined:!0,isDependency:!0,isDependent:!0,isFunc:!0,isInt:!0,isList:!0,isNaN:!0,isNumber:!0,isObject:!0,isPoint:!0,isPointer:!0,isProc:!0,isString:!0,isValue:!0,distanceMoved:!0,angleTurned:!0,List:!0,listcat:!0,lookup:!0,lowercase:!0,map:!0,mapPartial:!0,max:!0,Menu:!0,MenuItem:!0,min:!0,mod:!0,nameof:!0,partApply:!0,Point:!0,pow:!0,properties:!0,randomBoolean:!0,randomFloat:!0,randomInteger:!0,RE:!0,replaceFirst:!0,reverse:!0,rgbColour:!0,rotatePoint:!0,round:!0,roundMultiple:!0,scalePoint:!0,search:!0,sequenceItoJ:!0,sequenceN:!0,sequenceArithmeticN:!0,sequenceList:!0,sequencePrevious:!0,sort:!0,str:!0,sqrt:!0,strcat:!0,sublist:!0,substitute:!0,substr:!0,sum:!0,tail:!0,trim:!0,type:!0,uppercase:!0,include_css:!0,html:!0,time:!0,execute:!0,Text:!0,textWidth:!0,textHeight:!0,Arc:!0,Curve:!0,FillPattern:!0,Ellipse:!0,Line:!0,LinearGradient:!0,LineSequence:!0,PixelList:!0,GreyPixelList:!0,Rectangle:!0,RotateAboutCentre:!0,RotateAboutPoint:!0,CombinedRotation:!0,Scale:!0,Translate:!0,RoundedRectangle:!0,Polygon:!0,RegularPolygon:!0,Sector:!0,Shadow:!0,Circle:!0,Button:!0,Checkbox:!0,Div:!0,Image:!0,imageWithZones:!0,HTMLImage:!0,RadioButtons:!0,Slider:!0,Textbox:!0,DropDownList:!0,Combobox:!0,BulletSlide:!0,Video:!0,Audio:!0,Slide:!0,TitledSlide:!0,TitleSlide:!0,cos:!0,sin:!0,tan:!0,abs:!0,acos:!0,asin:!0,atan:!0,ceil:!0,roundUp:!0,exp:!0,floor:!0,roundDown:!0,log:!0,random:!0,forget:!0,forgetAll:!0,shapeOnTopAt:!0,zoneOnTopAt:!0,observableOnTopAt:!0,shapeOnBottomAt:!0,zoneOnBottomAt:!0,observableOnBottomAt:!0,shapesAt:!0,zonesAt:!0,observablesAt:!0,observableForShape:!0,alias:!0,arrangeWindows:!0,attemptMouseCapture:!0,bindCSSNumericProperty:!0,bindCSSProperty:!0,bindCSSRule:!0,createCanvas:!0,createHTMLView:!0,createProjectList:!0,createView:!0,destroyView:!0,eager:!0,error:!0,hideView:!0,highlightView:!0,moveView:!0,patch:!0,removeedenclock:!0,resizeView:!0,setedenclock:!0,showObservables:!0,showView:!0,stopHighlightingView:!0,todo:!0,touch:!0,unbind:!0,withAppendedItem:!0,writeln:!0},d={autocalc:!0,mouseX:!0,mouseY:!0,mousePosition:!0,screenHeight:!0,screenWidth:!0,PI:!0},e={"true":!0,"false":!0,green:!0},f={"var":!0,"if":!0,"while":!0,"typeof":!0,"this":!0,"function":!0,"return":!0,"else":!0,"break":!0,"continue":!0,"switch":!0,"for":!0,prototype:!0};EdenUI.Highlight=function(a){this.ast=void 0,this.outelement=a,this.line=1,this.currentline=-1,this.mode=0,this.mode_at_line={},this.heredocend=void 0},EdenUI.Highlight.isType=function(a){return!1},EdenUI.Highlight.prototype.highlightLine=function(a,b){var g=-1,h=-1,i="",j=!1,k=a.stream,l=!1,m="INVALID",n="INVALID",o=[];this.mode_at_line[this.line-1]?this.mode=this.mode_at_line[this.line-1]:this.mode=0,a.script&&a.script.errors.length>0&&(g=a.script.errors[0].prevposition,h=a.script.errors[0].position,i=a.script.errors[0].messageText());for(var p="",q=document.createElement("span");;){if(6==this.mode&&(this.mode=0,q=o.pop()),k.position==b){if(""!=p){var r=document.createTextNode(p);q.appendChild(r),p=""}var s=document.createElement("span");s.className="fake-caret",q.appendChild(s)}var t=k.peek();if(10==t){if(""!=p){var r=document.createTextNode(p);q.appendChild(r),p=""}break}if(9!=t&&13!=t&&32!=t&&160!=t){if(""!=p){8==this.mode&&(q=o.pop(),this.mode=1);var r=document.createTextNode(p);q.appendChild(r),p=""}if(n=m,m=k.readToken(),"string"!=typeof m&&console.error("Token error: line = "+this.line+" position = "+k.position),"EOF"==m){if(""!=p){var r=document.createTextNode(p);q.appendChild(r),p=""}break}if("INVALID"!=m){var u=k.tokenType(m),v="",w=k.tokenText();if(-1!=g&&(g<=k.prevposition&&!j&&(j=!0),h<=k.prevposition&&j&&(j=!1),j&&(l=!0)),j&&"EOF"!=a.script.errors[0].token&&(v+="eden-error "),0==this.mode||5==this.mode)if("##"==m){v+="eden-comment";for(var x="";k.valid()&&10!=k.peek();)x+=String.fromCharCode(k.get());w="##"+x}else if("local"==m||"auto"==m||"para"==m)v+="eden-storage";else if("keyword"==u)v+="eden-keyword","import"==k.data.value&&(this.mode=7);else if("NUMBER"==m)v+="eden-number";else if("<<"==m){var y=(k.readToken(),k.tokenText());w+=y,this.heredocend=y,v+="eden-storage",this.mode=44}else if("STRING"==m)v+="eden-string";else if("CHARACTER"==m)v+="eden-string";else if("BOOLEAN"==m)v+="eden-constant";else if("OBSERVABLE"==m)v+=c[k.data.value]?"eden-function":EdenUI.Highlight.isType(k.data.value)?"eden-type":e[k.data.value]?"eden-constant":d[k.data.value]?"eden-special":"eden-observable";else if("`"==m)if(5==this.mode)this.mode=6;else{this.mode=5,o.push(q);var z=document.createElement("span");z.className="eden-backticks",q.appendChild(z),q=z}else"${{"==m?(v+="eden-javascript",this.mode=4):"-"==m&&k.isNumeric(k.peek())?(m=k.readToken(),w="-"+k.tokenText(),v+="eden-number"):"/*"==m?(this.mode=2,v+="eden-comment"):v+="eden-operator";else if(1==this.mode||7==this.mode||8==this.mode){if(7==this.mode){o.push(q);var z=document.createElement("span");z.className="eden-pathblock",q.appendChild(z),q=z,this.mode=8}";"==m?(8==this.mode&&(q=o.pop()),this.mode=0,v+="eden-operator"):v+=Language.importoptions[k.data.value]?"eden-importopt":"eden-path"}else 2==this.mode?"*/"==m?(this.mode=0,v+="eden-comment"):"@"==m?(this.mode=3,v+="eden-doxytag"):v+="eden-comment":3==this.mode?(this.mode=2,v+=Language.doxytags[k.data.value]?"eden-doxytag":"eden-doxytagerror"):4==this.mode?(v+=("OBSERVABLE"==m||"keyword"==u)&&f.hasOwnProperty(k.data.value)?"eden-javascript-bold":"eden-javascript","}}$"==m&&(this.mode=0)):44==this.mode&&("INVALID"==n&&w==this.heredocend?(v+="eden-storage",this.mode=0):v+="eden-string");if(k.prevposition<b&&k.position>b){var s=b-k.prevposition,A=w.slice(0,s),B=w.slice(s),C=document.createElement("span");C.className=v,"eden-observable"==v&&C.setAttribute("data-observable",w);var D=document.createElement("span");D.appendChild(document.createTextNode(A)),C.appendChild(D);var s=document.createElement("span");s.className="fake-caret",C.appendChild(s),D=document.createElement("span"),D.appendChild(document.createTextNode(B)),C.appendChild(D),q.appendChild(C)}else{var D=document.createElement("span");D.className=v,"eden-observable"==v&&D.setAttribute("data-observable",w),D.appendChild(document.createTextNode(w)),q.appendChild(D)}}else console.log("INVALID: "+k.peek()),k.skip()}else k.skip(),32==t||160==t?p+=" ":13!=t&&(p+=String.fromCharCode(t))}return o.length>0&&(q=o[0],this.mode=0),this.mode_at_line[this.line]=this.mode,q},EdenUI.Highlight.prototype.highlight=function(a,c,d){this.ast=a,this.line=1;var e=-1,f=-1,g="",h=a.stream;if(void 0!==this.outelement){if(0==a.stream.code.length)return void(this.outelement&&(this.outelement.innerHTML="<div class='eden-line'><span class='fake-caret'></span></div>"));a.script&&a.script.errors.length>0&&(e=a.script.errors[0].prevposition,f=a.script.errors[0].position,g=a.script.errors[0].messageText()),h.reset();var i=void 0,j=!1,k=0;if(-1==c)b(this,this.outelement,!1,function(){for(this.outelement.innerHTML="",this.mode_at_line={};h.valid();){var b=h.peek();if(10!=b)i=this.highlightLine(a,d);else{j=e>=k&&h.position>=f;var c=document.createElement("div");c.className="eden-line",c.setAttribute("data-line",this.line-1),this.line++,void 0!==i?c.appendChild(i):this.mode_at_line[this.line-1]=this.mode;var g=document.createTextNode("\n");c.appendChild(g),this.outelement.appendChild(c),k=h.position+1,i=void 0,h.skip()}}if(j=e>=k&&h.position>=f,void 0!==i){var c=document.createElement("div");c.className="eden-line",c.setAttribute("data-line",this.line-1),c.appendChild(i),this.outelement.appendChild(c)}else{var c=document.createElement("div");if(d>=h.position){c.className="eden-line",c.setAttribute("data-line",this.line-1);var l=document.createElement("span");l.className="fake-caret",c.appendChild(l)}else c.className="eden-line";this.outelement.appendChild(c)}});else{for(;h.valid()&&this.line<c-1;){var l=h.peek();10==l&&this.line++,h.skip()}for(var m=2;m>=0;m--){this.line=c-m+1;var n=this.outelement.childNodes[c-m];if(void 0!==n){for(;n.firstChild;)n.removeChild(n.firstChild);k=h.position,i=this.highlightLine(a,d),j=e>=k&&h.position>=f,n.appendChild(i);var o=document.createTextNode("\n");n.appendChild(o),h.skip()}}}}},EdenUI.Highlight.html=function(a){var b=document.createElement("span"),c=new EdenUI.Highlight(b);return c.ast={stream:new EdenStream(a)},c.highlight(c.ast,-1,-1,void 0),b.childNodes[0].innerHTML}}("undefined"!=typeof window?window:global),EdenUI.ContextMenu=function(a){this.element=$('<div class="eden-contextmenu"></div>'),this.origin=a,this.target=void 0,this.items=[],$(document.body).append(this.element);var b=this;this.element.on("mousedown",".eden-contextmenu-item",function(a){var c=parseInt(a.currentTarget.getAttribute("data-index"));b.items[c].action&&b.items[c].action(b.target)}),this.origin.oncontextmenu=function(a){b.target=a.target;var c=document.body.scrollLeft+a.clientX;c+150>=screen.width&&(c-=c+150-screen.width),b.element.css("top",""+(document.body.scrollTop+a.clientY+10)+"px"),b.element.css("left",""+c+"px");for(var d=0;d<b.items.length;d++){var e;e="function"==typeof b.items[d].status?b.items[d].status(a.target):b.items[d].status,changeClass(b.items[d].element,"disabled",!e)}b.element.slideDown(100),a.preventDefault()},document.addEventListener("mousedown",function(){b.element.hide()},!0)},EdenUI.ContextMenu.prototype.addItem=function(a,b,c,d){var e=$('<div class="eden-contextmenu-item"><span class="eden-contextmenu-icon">'+a+"</span><span>"+b+"</span></div>");e.get(0).setAttribute("data-index",""+this.items.length),this.element.append(e),this.items.push({status:c,action:d,element:e.get(0)})},EdenUI.ContextMenu.prototype.addSeparator=function(){var a=$('<div class="eden-contextmenu-sep"></div>');this.element.append(a)},EdenUI.MenuBar=function(){function a(){$(".menubar-menu").hide(),s=!1;var a=$("#menubar-mainitem-views");a.children().css("display","")}function b(a){var b=$("#menubar-mainitem-"+a);b.show(),t=a,s=!0,"sharebox"==a&&o.sharebox.show()}function c(){var a=$("#menubar-mainitem-existing-views");Object.keys&&0===Object.keys(edenUI.activeDialogs).length&&a.html('<div class="menubar-item-fullwidth">Use the "New Window" menu to create windows.</div>')}function d(b){a();var c=edenUI.eden.root,d=c.lookup("mouseFollow").value(),e=c.lookup("_views_number_created"),f=e.value()+1;e.assign(f,c.scope,Symbol.hciAgent,!0);var g=this.view,h=g.toLowerCase()+f;d?edenUI.eden.execute('createView("'+h+'", "'+g+'");'):edenUI.createView(h,g),o.updateViewsMenu()}function e(b){var d=this.parentNode.viewname;edenUI.viewInstances[d].confirmClose&&a(),edenUI.closeView(d),c()}function f(a){var b=a.currentTarget.children[0],c=this.parentNode.viewname;edenUI.viewInstances[c].pinned?(edenUI.unpinView(c),b.src=n):(edenUI.pinView(c),b.src=m)}function g(a){for(var b=$("<div class='menubar-item'></div>"),c=0;c<a.length;++c)b.append(a[c]);return b}function h(a,b){return $('<div class="'+a+' menubar-item-clickable">'+b+"</div>")}function i(a){return $("<div class='menubar-item menubar-nonselectable'><div class='menubar-item-fullwidth menubar-item-separator'>"+a+"</div></div>")}function j(b){return{mouseover:function(a){edenUI.highlightView(b,!0)},mouseout:function(a){edenUI.stopHighlightingView(b,!0,!1)},click:function(c){edenUI.stopHighlightingView(b,!0,!0),a()}}}function k(a){return a&&"false"!=a?'checked="checked"':""}function l(a,b,c,d){var e=edenUI.getOptionValue(a);null===e&&(e=c);var f=h("menubar-item-input",'<input id="menu-'+a+'" type="checkbox"'+k(e)+" />"),i=f.get(0).children[0],j=h("menubar-item-label",b),l=g([f,j]);l.click(function(b){b.target!=i&&(i.checked=!i.checked),edenUI.setOptionValue(a,i.checked)}),edenUI.listenTo("optionChange",void 0,function(b,c){if(b==a){var e="true"===c;i.checked=e,d&&d(a,e)}}),l.appendTo(u)}var m="images/pin.png",n="images/pin-greyed.png",o=this;this.itemViews={},eden.execute2("_views_number_created = 0;","*Default"),this.element=$('<div id="menubar-main"><div id="eden-logo"></div><div contenteditable class="jseden-title" title="Rename project">Construit!</div>'+(mobilecheck()?'<div class="menubar-mobilebuttons"><button class="scriptview-button enabled mobilemore">&#xf078;</button></div>':'<div class="jseden-subtitle">by Some Author</div><div id="menubar-login"><span class="icon">&#xf05e;</span>Not Connected</div><div class="menubar-buttons"><div class="menubar-button enabled main share" data-obs="sharebox" title="Save or share" style="display: none;">&#xf1e0;<div id="menubar-mainitem-sharebox" class="menubar-menu"></div></div><div class="menubar-button enabled main create" data-obs="views" title="Create Views" style="display: none;">&#xf067;<div id="menubar-mainitem-views" class="menubar-menu"></div></div><div class="menubar-button enabled main existing" data-obs="existing" title="Existing" style="display: none;">&#xf2d2;<div id="menubar-mainitem-existing" class="menubar-menu"></div></div><div class="menubar-button enabled main settings" data-obs="options" title="Options" style="display: none;">&#xf013;<div id="menubar-mainitem-options" class="menubar-menu"></div></div><div class="menubar-button enabled main help" data-obs="help" title="Help" style="display: none;">&#xf128;<div id="menubar-mainitem-help" class="menubar-menu"></div></div><div class="menubar-button enabled main notifications" data-obs="notifications" title="Notifications">&#xf0f3;<span class="menubar-notification-jewel"></span><div id="menubar-mainitem-notifications" class="menubar-menu"></div></div><div class="menubar-button enabled main maker" data-obs="maker" title="Maker Mode">&#xf0ad;</div></div><div class="searchouter menusearch" style="display: none;"><input type="text" class="search menusearch" placeholder="Search..." spellcheck="false"></input><div id="menubar-searchresults"></div></div>')+"</div>"),$(document.body).append(this.element);var p=this.element.find("#menubar-login"),q=new EdenUI.ContextMenu(p.get(0));q.addItem("&#xf08b;","Log out",function(){return Eden.DB.isLoggedIn()},function(){Eden.DB.logOut(function(){$("#menubar-login").html('<a href="'+Eden.DB.remoteURL+'/login" target="logintarget"><span class="icon">&#xf090;</span>Login</a>')})}),edenUI.listenTo("loadPlugin",this,function(a,b){this.updateViewsMenu()}),edenUI.listenTo("createView",this,function(a,b){this.updateViewsMenu()}),edenUI.listenTo("destroyView",this,function(a){$(this.itemViews[a]).remove(),delete this.itemViews[a],c()}),Eden.DB.listenTo("connected",this,function(a){$("#menubar-login").html('<a href="'+a+'/login" target="logintarget"><span class="icon">&#xf090;</span>Login</a>')}),Eden.DB.listenTo("disconnected",this,function(){$("#menubar-login").html('<span class="icon">&#xf05e;</span>Not Connected')}),Eden.DB.listenTo("login",this,function(a){a&&(setTimeout(function(){$("#menubar-obscurer").remove()},1e3),$("#menubar-login").html('<a href="'+Eden.DB.remoteURL+'/#" target="_blank"><span class="icon">&#xf2be;</span>'+a+"</a>"))}),$("#menubar-login").click(function(){if(Eden.DB.isConnected()&&!Eden.DB.isLoggedIn()){var a=$('<div id="menubar-obscurer" class="login-subdialog modal" style="display: block;"></div>');a.html('<div class="modal-content" style="width: 290px;"><div class="menubar-sharebox-title"><span class="menubar-shareicon">&#xf090;</span>Login</div><iframe frameborder="0" name="logintarget" width="250" height="200" class="menubar-login-iframe"></iframe><br/><button class="jseden button-cancel">Cancel</button></div>'),$(document.body).append(a),a.on("click",".button-cancel",function(){a.remove()})}else Eden.DB.isConnected()&&Eden.DB.isLoggedIn()});var o=this;if(mobilecheck()){var r=new EdenUI.ContextMenu(this.element.find(".mobilemore").get(0));r.addItem("&#xf1e0;","Share",!0,function(a){o.script.stickAll()}),r.addItem("&#xf121;","New Script View",!0,function(a){o.script.unstickAll()}),r.addItem("&#xf022;","New Observable Lists",!0,function(a){o.script.clearUnstuck()}),r.addItem("&#xf03e;","New Graphic View",!0,function(a){o.script.activateAll()}),this.element.on("click",".mobilemore",function(a){o.element.find(".mobilemore").get(0).oncontextmenu(a)})}this.sharebox=new EdenUI.Sharebox(this.element.find("#menubar-mainitem-sharebox")),this.element.on("click",".menubar-button.share",function(a){a.currentTarget===a.target&&o.sharebox.update()}),this.searchbox=new EdenUI.SearchBox(this.element.find("#menubar-searchresults")),this.element.on("keyup",".search",function(a){o.searchbox.updateSearch(a.currentTarget.value)}),this.element.on("focus",".search",function(a){o.searchbox.updateSearch(a.currentTarget.value)});var s=!1,t=void 0;$(document.body).on("mousedown",function(){a(),o.searchbox.element.hide()}),this.element.on("mousedown",".menubar-search-outer",function(a){a.stopPropagation()}),this.element.on("mousedown",".menubar-button.main",function(c){var d=c.currentTarget.getAttribute("data-obs");s&&c.target===this?d==t?a():(a(),b(d)):b(d),o.searchbox.element.hide(),c.stopPropagation()}),this.element.on("mouseenter",".menubar-button.main",function(a){}),this.updateViewsMenu=function(){var a=$("#menubar-mainitem-views"),b=$("#menubar-mainitem-existing");a.html("");var k=$('<input id="menubar-view-type-search" class="menubar-search-box" type="text" placeholder="search"/>'),l=k[0],p=$('<div class="menubar-item-fullwidth"></div>');p.append(k);var q=$("<div class='menubar-item-search'></div>");q.append(p),l.search=function(){var b,c=l.value,d=new RegExp("(^|\\s)"+c,"i"),e=!1;a.children().each(function(a,f){if(!f.classList.contains("menubar-item-search")){var g=f.children[0],h=g.innerHTML,i=g.classList.contains("menubar-item-separator");i?(c.length>1&&(e=d.test(h)),b=f,e?f.style.display="":f.style.display="none"):e?f.style.display="":d.test(h)?(f.style.display="",b.style.display=""):f.style.display="none"}})},k.on("input",l.search);var r,s,t,u,v,w,x=[];for(s in edenUI.views){var y=edenUI.views[s],z=y.title,A=y.category.getLabel(),B=y.category.getMenuPriority(),C=y.menuPriority;u=h("menubar-item-fullwidth menubar-view",z),t=g([u]),t[0].view=s,t.click(d),x.push({title:z,viewEntry:t,categoryLabel:A,categoryPriority:B,itemPriority:C})}x=x.sort(function(a,b){if(a.categoryPriority!=b.categoryPriority)return a.categoryPriority-b.categoryPriority;if(void 0!==a.itemPriority){if(void 0===b.itemPriority)return-1;if(a.itemPriority!=b.itemPriority)return a.itemPriority-b.itemPriority}else if(void 0!==b.itemPriority)return 1;return a.title>b.title?1:a.title<b.title?-1:0});for(var D,E=0;E<x.length;++E){var F=x[E],G=F.categoryLabel;if(D!=G){var H=i(G);H.appendTo(a),D=G}F.viewEntry.appendTo(a)}a.append(q),b.html(""),o.itemViews={},c();for(r in edenUI.activeDialogs){var I=j(r),z=edenUI.eden.root.lookup("_view_"+r+"_title").value();u=h("menubar-item-label",z+' <span class="menubar-view-name">['+r+"]</span>"),u.click(I.click);var J;J=edenUI.viewInstances[r].pinned?m:n,v=h("menubar-item-pin",'<img src="'+J+'" width="18" height="18" class="menubar-item-pin-icon"/>'),v.click(f),w=h("menubar-item-close",'<div class="menubar-item-close-icon">X</div>'),w.click(e),t=g([u,v,w]),t.bind("mouseover",I.mouseover),t.bind("mouseout",I.mouseout),t[0].viewname=r,t.appendTo(b),o.itemViews[r]=t[0]}},this.updateViewsMenu();var u=$("#menubar-mainitem-options");l("optConfirmUnload",Language.ui.menu_bar.opt_confirm,!0,function(a,b){b?window.addEventListener("beforeunload",confirmUnload):window.removeEventListener("beforeunload",confirmUnload)}),l("optSimpleWildcards",Language.ui.menu_bar.opt_simple_search,!0),l("optHideOnMinimize",Language.ui.menu_bar.opt_hide,!1),l("optCollapseToTitleBar",Language.ui.menu_bar.opt_collapse,!1,function(a,b){var c;c=b?"collapse":"maximize",$(".ui-dialog-content").each(function(){$(this).dialogExtend("option","dblclick",c)})}),l("developer",Language.ui.menu_bar.opt_debug,!1,function(b,c){var d;d=c?"/index-dev.html":"/index.html";var e=document.location.pathname;d=e.slice(0,e.lastIndexOf("/"))+d,d!=document.location.pathname?(a(),edenUI.modalDialog("Restart Required","<p>JS-EDEN must be restarted for this change to fully take effect.  Would you like to restart JS-EDEN now?</p>",["Restart Now","Restart Later"],1,function(a){if(0==a)window.onbeforeunload=void 0,document.location.pathname=d;else if(1==a)root.lookup("debug").mutate(root.scope,function(a){a.cache.value.jsExceptions=c},Symbol.hciAgent);else{var b=document.getElementById("menu-developer");b.checked=!b.checked,edenUI.setOptionValue("developer",b.checked)}})):root.lookup("debug").mutate(root.scope,function(a){a.cache.value.jsExceptions=c},Symbol.hciAgent)}),this.element.on("keyup",".jseden-title",function(a){try{window.localStorage&&window.localStorage.setItem("title",a.currentTarget.textContent)}catch(a){}}),eden.root.lookup("jseden_project_title").addJSObserver("menubar",function(a,b){$(".jseden-title").get(0).textContent=b;try{window.localStorage&&window.localStorage.setItem("title",b)}catch(c){}}),eden.root.lookup("jseden_maker").addJSObserver("menubar",function(a,b){b?o.element.find(".maker").addClass("active"):o.element.find(".maker").removeClass("active")}),eden.root.lookup("jseden_menu_showsearch").addJSObserver("menubar",function(a,b){b?o.element.find(".menusearch").show():o.element.find(".menusearch").hide()}),eden.root.lookup("jseden_menu_showshare").addJSObserver("menubar",function(a,b){b?o.element.find(".menubar-button.share").show():o.element.find(".menubar-button.share").hide()}),eden.root.lookup("jseden_menu_showcreate").addJSObserver("menubar",function(a,b){b?o.element.find(".menubar-button.create").show():o.element.find(".menubar-button.create").hide()}),eden.root.lookup("jseden_menu_showexisting").addJSObserver("menubar",function(a,b){b?o.element.find(".menubar-button.existing").show():o.element.find(".menubar-button.existing").hide()}),eden.root.lookup("jseden_menu_showsettings").addJSObserver("menubar",function(a,b){b?o.element.find(".menubar-button.settings").show():o.element.find(".menubar-button.settings").hide()}),eden.root.lookup("jseden_menu_showhelp").addJSObserver("menubar",function(a,b){b?o.element.find(".menubar-button.help").show():o.element.find(".menubar-button.help").hide()}),eden.root.lookup("jseden_project_subtitle").addJSObserver("menubar",function(a,b){$(".jseden-subtitle").get(0).textContent=b}),this.notifications=new EdenUI.Notifications(this.element.find("#menubar-mainitem-notifications"),this.element.find(".menubar-notification-jewel")),this.element.on("click",".notifications",function(a){o.notifications.clearCount()}),this.element.on("click",".maker",function(a){var b=eden.root.lookup("jseden_maker");if(!b.eden_definition){var c=b.value();void 0===c&&(c=!1),b.assign(!c,eden.root.scope,Symbol.localJSAgent)}})},EdenUI.MenuBar.reset=function(){$(".jseden-title").html("Construit!")},EdenUI.MenuBar.saveTitle=function(a){eden.root.lookup("jseden_project_title").assign(a,eden.root.scope,Symbol.jsAgent)},EdenUI.Dialogs={},EdenUI.Dialogs.MergeError=function(a,b,c){var d=new diff_match_patch,e=d.diff_main(a,b);d.diff_cleanupSemantic(e);var f=d.diff_prettyHtml(e),g=$('<div title="Import Merge Conflict">'+f+"</div>");g.dialog({resizable:!0,height:"auto",width:600,modal:!0,buttons:{"Use Mine":function(){c&&c("old"),$(this).dialog("close")},"Use New":function(){c&&c("new"),$(this).dialog("close")},Merge:function(){c&&c("merge"),$(this).dialog("close")}}})};